%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object16{{"Object[16∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access14{{"Access[14∈0]<br />ᐸ3.pgSettingsᐳ"}}:::plan
    Access15{{"Access[15∈0]<br />ᐸ3.withPgClientᐳ"}}:::plan
    Access14 & Access15 --> Object16
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value3 --> Access14
    __Value3 --> Access15
    Lambda18{{"Lambda[18∈0]<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Constant215{{"Constant[215∈0]<br />ᐸ'WyJyZWxhdGlvbmFsX3Bvc3RzIiw0XQ=='ᐳ"}}:::plan
    Constant215 --> Lambda18
    Access214{{"Access[214∈0]<br />ᐸ18.base64JSON.1ᐳ"}}:::plan
    Lambda18 --> Access214
    List22{{"List[22∈0]<br />ᐸ214ᐳ"}}:::plan
    Access214 --> List22
    Lambda47{{"Lambda[47∈0]<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Constant217{{"Constant[217∈0]<br />ᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ"}}:::plan
    Constant217 --> Lambda47
    Access216{{"Access[216∈0]<br />ᐸ47.base64JSON.1ᐳ"}}:::plan
    Lambda47 --> Access216
    List51{{"List[51∈0]<br />ᐸ216ᐳ"}}:::plan
    Access216 --> List51
    __Value0["__Value[0∈0]"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    List44{{"List[44∈1]<br />ᐸ23,28,33,38,43ᐳ"}}:::plan
    Object23{{"Object[23∈1]<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object28{{"Object[28∈1]<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object33{{"Object[33∈1]<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object38{{"Object[38∈1]<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object43{{"Object[43∈1]<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object23 & Object28 & Object33 & Object38 & Object43 --> List44
    List73{{"List[73∈1]<br />ᐸ52,57,62,67,72ᐳ"}}:::plan
    Object52{{"Object[52∈1]<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object57{{"Object[57∈1]<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object62{{"Object[62∈1]<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object67{{"Object[67∈1]<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object72{{"Object[72∈1]<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object52 & Object57 & Object62 & Object67 & Object72 --> List73
    PgInsertSingle13[["PgInsertSingle[13∈1]<br />ᐸrelational_item_relations(child_id,parent_id)ᐳ"]]:::sideeffectplan
    Access46{{"Access[46∈1]<br />ᐸ45.0ᐳ"}}:::plan
    Access75{{"Access[75∈1]<br />ᐸ74.0ᐳ"}}:::plan
    Object16 & Access46 & Access75 --> PgInsertSingle13
    Lambda21[["Lambda[21∈1]"]]:::unbatchedplan
    Lambda21 & List22 --> Object23
    Lambda26[["Lambda[26∈1]"]]:::unbatchedplan
    Lambda26 & List22 --> Object28
    Lambda31[["Lambda[31∈1]"]]:::unbatchedplan
    Lambda31 & List22 --> Object33
    Lambda36[["Lambda[36∈1]"]]:::unbatchedplan
    Lambda36 & List22 --> Object38
    Lambda41[["Lambda[41∈1]"]]:::unbatchedplan
    Lambda41 & List22 --> Object43
    Lambda50[["Lambda[50∈1]"]]:::unbatchedplan
    Lambda50 & List51 --> Object52
    Lambda55[["Lambda[55∈1]"]]:::unbatchedplan
    Lambda55 & List51 --> Object57
    Lambda60[["Lambda[60∈1]"]]:::unbatchedplan
    Lambda60 & List51 --> Object62
    Lambda65[["Lambda[65∈1]"]]:::unbatchedplan
    Lambda65 & List51 --> Object67
    Lambda70[["Lambda[70∈1]"]]:::unbatchedplan
    Lambda70 & List51 --> Object72
    Lambda18 --> Lambda21
    Lambda18 --> Lambda26
    Lambda18 --> Lambda31
    Lambda18 --> Lambda36
    Lambda18 --> Lambda41
    Lambda45{{"Lambda[45∈1]"}}:::plan
    List44 --> Lambda45
    Lambda45 --> Access46
    Lambda47 --> Lambda50
    Lambda47 --> Lambda55
    Lambda47 --> Lambda60
    Lambda47 --> Lambda65
    Lambda47 --> Lambda70
    Lambda74{{"Lambda[74∈1]"}}:::plan
    List73 --> Lambda74
    Lambda74 --> Access75
    Object17{{"Object[17∈1]<br />ᐸ{result}ᐳ"}}:::plan
    PgInsertSingle13 --> Object17
    List78{{"List[78∈3]<br />ᐸ76,77ᐳ"}}:::plan
    Constant76{{"Constant[76∈3]<br />ᐸ'relational_item_relations'ᐳ"}}:::plan
    PgClassExpression77{{"PgClassExpression[77∈3]<br />ᐸ__relation...ons__.”id”ᐳ"}}:::plan
    Constant76 & PgClassExpression77 --> List78
    PgSelect81[["PgSelect[81∈3]<br />ᐸrelational_itemsᐳ"]]:::plan
    PgClassExpression80{{"PgClassExpression[80∈3]<br />ᐸ__relation...”child_id”ᐳ"}}:::plan
    Object16 & PgClassExpression80 --> PgSelect81
    PgSelect148[["PgSelect[148∈3]<br />ᐸrelational_itemsᐳ"]]:::plan
    PgClassExpression147{{"PgClassExpression[147∈3]<br />ᐸ__relation...parent_id”ᐳ"}}:::plan
    Object16 & PgClassExpression147 --> PgSelect148
    PgInsertSingle13 --> PgClassExpression77
    Lambda79{{"Lambda[79∈3]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List78 --> Lambda79
    PgInsertSingle13 --> PgClassExpression80
    First85{{"First[85∈3]"}}:::plan
    PgSelect81 --> First85
    PgSelectSingle86{{"PgSelectSingle[86∈3]<br />ᐸrelational_itemsᐳ"}}:::plan
    First85 --> PgSelectSingle86
    PgClassExpression87{{"PgClassExpression[87∈3]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle86 --> PgClassExpression87
    PgClassExpression98{{"PgClassExpression[98∈3]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle86 --> PgClassExpression98
    PgInsertSingle13 --> PgClassExpression147
    First152{{"First[152∈3]"}}:::plan
    PgSelect148 --> First152
    PgSelectSingle153{{"PgSelectSingle[153∈3]<br />ᐸrelational_itemsᐳ"}}:::plan
    First152 --> PgSelectSingle153
    PgClassExpression154{{"PgClassExpression[154∈3]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle153 --> PgClassExpression154
    PgClassExpression165{{"PgClassExpression[165∈3]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle153 --> PgClassExpression165
    PgSelect155[["PgSelect[155∈5]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object16 & PgClassExpression154 --> PgSelect155
    List163{{"List[163∈5]<br />ᐸ161,162ᐳ<br />ᐳRelationalTopic"}}:::plan
    Constant161{{"Constant[161∈5]<br />ᐸ'relational_topics'ᐳ<br />ᐳRelationalTopic"}}:::plan
    PgClassExpression162{{"PgClassExpression[162∈5]<br />ᐸ__relation...c_item_id”ᐳ"}}:::plan
    Constant161 & PgClassExpression162 --> List163
    PgSelect167[["PgSelect[167∈5]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object16 & PgClassExpression154 --> PgSelect167
    List175{{"List[175∈5]<br />ᐸ173,174ᐳ<br />ᐳRelationalPost"}}:::plan
    Constant173{{"Constant[173∈5]<br />ᐸ'relational_posts'ᐳ<br />ᐳRelationalPost"}}:::plan
    PgClassExpression174{{"PgClassExpression[174∈5]<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant173 & PgClassExpression174 --> List175
    PgSelect179[["PgSelect[179∈5]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object16 & PgClassExpression154 --> PgSelect179
    List187{{"List[187∈5]<br />ᐸ185,186ᐳ<br />ᐳRelationalDivider"}}:::plan
    Constant185{{"Constant[185∈5]<br />ᐸ'relational_dividers'ᐳ<br />ᐳRelationalDivider"}}:::plan
    PgClassExpression186{{"PgClassExpression[186∈5]<br />ᐸ__relation...r_item_id”ᐳ"}}:::plan
    Constant185 & PgClassExpression186 --> List187
    PgSelect191[["PgSelect[191∈5]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object16 & PgClassExpression154 --> PgSelect191
    List199{{"List[199∈5]<br />ᐸ197,198ᐳ<br />ᐳRelationalChecklist"}}:::plan
    Constant197{{"Constant[197∈5]<br />ᐸ'relational_checklists'ᐳ<br />ᐳRelationalChecklist"}}:::plan
    PgClassExpression198{{"PgClassExpression[198∈5]<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant197 & PgClassExpression198 --> List199
    PgSelect203[["PgSelect[203∈5]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object16 & PgClassExpression154 --> PgSelect203
    List211{{"List[211∈5]<br />ᐸ209,210ᐳ<br />ᐳRelationalChecklistItem"}}:::plan
    Constant209{{"Constant[209∈5]<br />ᐸ'relational_checklist_items'ᐳ<br />ᐳRelationalChecklistItem"}}:::plan
    PgClassExpression210{{"PgClassExpression[210∈5]<br />ᐸ__relation...m_item_id”ᐳ"}}:::plan
    Constant209 & PgClassExpression210 --> List211
    First159{{"First[159∈5]"}}:::plan
    PgSelect155 --> First159
    PgSelectSingle160{{"PgSelectSingle[160∈5]<br />ᐸrelational_topicsᐳ"}}:::plan
    First159 --> PgSelectSingle160
    PgSelectSingle160 --> PgClassExpression162
    Lambda164{{"Lambda[164∈5]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List163 --> Lambda164
    First171{{"First[171∈5]"}}:::plan
    PgSelect167 --> First171
    PgSelectSingle172{{"PgSelectSingle[172∈5]<br />ᐸrelational_postsᐳ"}}:::plan
    First171 --> PgSelectSingle172
    PgSelectSingle172 --> PgClassExpression174
    Lambda176{{"Lambda[176∈5]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List175 --> Lambda176
    First183{{"First[183∈5]"}}:::plan
    PgSelect179 --> First183
    PgSelectSingle184{{"PgSelectSingle[184∈5]<br />ᐸrelational_dividersᐳ"}}:::plan
    First183 --> PgSelectSingle184
    PgSelectSingle184 --> PgClassExpression186
    Lambda188{{"Lambda[188∈5]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List187 --> Lambda188
    First195{{"First[195∈5]"}}:::plan
    PgSelect191 --> First195
    PgSelectSingle196{{"PgSelectSingle[196∈5]<br />ᐸrelational_checklistsᐳ"}}:::plan
    First195 --> PgSelectSingle196
    PgSelectSingle196 --> PgClassExpression198
    Lambda200{{"Lambda[200∈5]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List199 --> Lambda200
    First207{{"First[207∈5]"}}:::plan
    PgSelect203 --> First207
    PgSelectSingle208{{"PgSelectSingle[208∈5]<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First207 --> PgSelectSingle208
    PgSelectSingle208 --> PgClassExpression210
    Lambda212{{"Lambda[212∈5]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List211 --> Lambda212
    PgSelect88[["PgSelect[88∈4]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object16 & PgClassExpression87 --> PgSelect88
    List96{{"List[96∈4]<br />ᐸ94,95ᐳ<br />ᐳRelationalTopic"}}:::plan
    Constant94{{"Constant[94∈4]<br />ᐸ'relational_topics'ᐳ<br />ᐳRelationalTopic"}}:::plan
    PgClassExpression95{{"PgClassExpression[95∈4]<br />ᐸ__relation...c_item_id”ᐳ"}}:::plan
    Constant94 & PgClassExpression95 --> List96
    PgSelect100[["PgSelect[100∈4]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object16 & PgClassExpression87 --> PgSelect100
    List108{{"List[108∈4]<br />ᐸ106,107ᐳ<br />ᐳRelationalPost"}}:::plan
    Constant106{{"Constant[106∈4]<br />ᐸ'relational_posts'ᐳ<br />ᐳRelationalPost"}}:::plan
    PgClassExpression107{{"PgClassExpression[107∈4]<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant106 & PgClassExpression107 --> List108
    PgSelect112[["PgSelect[112∈4]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object16 & PgClassExpression87 --> PgSelect112
    List120{{"List[120∈4]<br />ᐸ118,119ᐳ<br />ᐳRelationalDivider"}}:::plan
    Constant118{{"Constant[118∈4]<br />ᐸ'relational_dividers'ᐳ<br />ᐳRelationalDivider"}}:::plan
    PgClassExpression119{{"PgClassExpression[119∈4]<br />ᐸ__relation...r_item_id”ᐳ"}}:::plan
    Constant118 & PgClassExpression119 --> List120
    PgSelect124[["PgSelect[124∈4]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object16 & PgClassExpression87 --> PgSelect124
    List132{{"List[132∈4]<br />ᐸ130,131ᐳ<br />ᐳRelationalChecklist"}}:::plan
    Constant130{{"Constant[130∈4]<br />ᐸ'relational_checklists'ᐳ<br />ᐳRelationalChecklist"}}:::plan
    PgClassExpression131{{"PgClassExpression[131∈4]<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant130 & PgClassExpression131 --> List132
    PgSelect136[["PgSelect[136∈4]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object16 & PgClassExpression87 --> PgSelect136
    List144{{"List[144∈4]<br />ᐸ142,143ᐳ<br />ᐳRelationalChecklistItem"}}:::plan
    Constant142{{"Constant[142∈4]<br />ᐸ'relational_checklist_items'ᐳ<br />ᐳRelationalChecklistItem"}}:::plan
    PgClassExpression143{{"PgClassExpression[143∈4]<br />ᐸ__relation...m_item_id”ᐳ"}}:::plan
    Constant142 & PgClassExpression143 --> List144
    First92{{"First[92∈4]"}}:::plan
    PgSelect88 --> First92
    PgSelectSingle93{{"PgSelectSingle[93∈4]<br />ᐸrelational_topicsᐳ"}}:::plan
    First92 --> PgSelectSingle93
    PgSelectSingle93 --> PgClassExpression95
    Lambda97{{"Lambda[97∈4]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List96 --> Lambda97
    First104{{"First[104∈4]"}}:::plan
    PgSelect100 --> First104
    PgSelectSingle105{{"PgSelectSingle[105∈4]<br />ᐸrelational_postsᐳ"}}:::plan
    First104 --> PgSelectSingle105
    PgSelectSingle105 --> PgClassExpression107
    Lambda109{{"Lambda[109∈4]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List108 --> Lambda109
    First116{{"First[116∈4]"}}:::plan
    PgSelect112 --> First116
    PgSelectSingle117{{"PgSelectSingle[117∈4]<br />ᐸrelational_dividersᐳ"}}:::plan
    First116 --> PgSelectSingle117
    PgSelectSingle117 --> PgClassExpression119
    Lambda121{{"Lambda[121∈4]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List120 --> Lambda121
    First128{{"First[128∈4]"}}:::plan
    PgSelect124 --> First128
    PgSelectSingle129{{"PgSelectSingle[129∈4]<br />ᐸrelational_checklistsᐳ"}}:::plan
    First128 --> PgSelectSingle129
    PgSelectSingle129 --> PgClassExpression131
    Lambda133{{"Lambda[133∈4]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List132 --> Lambda133
    First140{{"First[140∈4]"}}:::plan
    PgSelect136 --> First140
    PgSelectSingle141{{"PgSelectSingle[141∈4]<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First140 --> PgSelectSingle141
    PgSelectSingle141 --> PgClassExpression143
    Lambda145{{"Lambda[145∈4]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List144 --> Lambda145

    %% define steps

    subgraph "Buckets for mutations/v4/polymorphic.relay"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value3,__Value5,Access14,Access15,Object16,Lambda18,List22,Lambda47,List51,Access214,Constant215,Access216,Constant217 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 16, 18, 22, 47, 51<br /><br />1: Lambda[21]<br />2: Object[23]<br />3: Lambda[26]<br />4: Object[28]<br />5: Lambda[31]<br />6: Object[33]<br />7: Lambda[36]<br />8: Object[38]<br />9: Lambda[41]<br />10: Object[43]<br />11: List[44]<br />12: Lambda[45]<br />13: Access[46]<br />14: Lambda[50]<br />15: Object[52]<br />16: Lambda[55]<br />17: Object[57]<br />18: Lambda[60]<br />19: Object[62]<br />20: Lambda[65]<br />21: Object[67]<br />22: Lambda[70]<br />23: Object[72]<br />24: List[73]<br />25: Lambda[74]<br />26: Access[75]<br />27: PgInsertSingle[13]<br />28: <br />ᐳ: Object[17]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgInsertSingle13,Object17,Lambda21,Object23,Lambda26,Object28,Lambda31,Object33,Lambda36,Object38,Lambda41,Object43,List44,Lambda45,Access46,Lambda50,Object52,Lambda55,Object57,Lambda60,Object62,Lambda65,Object67,Lambda70,Object72,List73,Lambda74,Access75 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 17, 13, 16<br /><br />ROOT Object{1}ᐸ{result}ᐳ[17]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 13, 16<br /><br />ROOT PgInsertSingle{1}ᐸrelational_item_relations(child_id,parent_id)ᐳ[13]<br />1: <br />ᐳ: 76, 77, 80, 147, 78, 79<br />2: PgSelect[81], PgSelect[148]<br />ᐳ: 85, 86, 87, 98, 152, 153, 154, 165"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,Constant76,PgClassExpression77,List78,Lambda79,PgClassExpression80,PgSelect81,First85,PgSelectSingle86,PgClassExpression87,PgClassExpression98,PgClassExpression147,PgSelect148,First152,PgSelectSingle153,PgClassExpression154,PgClassExpression165 bucket3
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 16, 87, 86, 98<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect88,First92,PgSelectSingle93,Constant94,PgClassExpression95,List96,Lambda97,PgSelect100,First104,PgSelectSingle105,Constant106,PgClassExpression107,List108,Lambda109,PgSelect112,First116,PgSelectSingle117,Constant118,PgClassExpression119,List120,Lambda121,PgSelect124,First128,PgSelectSingle129,Constant130,PgClassExpression131,List132,Lambda133,PgSelect136,First140,PgSelectSingle141,Constant142,PgClassExpression143,List144,Lambda145 bucket4
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 16, 154, 153, 165<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect155,First159,PgSelectSingle160,Constant161,PgClassExpression162,List163,Lambda164,PgSelect167,First171,PgSelectSingle172,Constant173,PgClassExpression174,List175,Lambda176,PgSelect179,First183,PgSelectSingle184,Constant185,PgClassExpression186,List187,Lambda188,PgSelect191,First195,PgSelectSingle196,Constant197,PgClassExpression198,List199,Lambda200,PgSelect203,First207,PgSelectSingle208,Constant209,PgClassExpression210,List211,Lambda212 bucket5
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5
    end
