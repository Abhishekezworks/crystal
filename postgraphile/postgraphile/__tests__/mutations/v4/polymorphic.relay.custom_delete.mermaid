%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object46{{"Object[46∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access44{{"Access[44∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access45{{"Access[45∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access44 & Access45 --> Object46
    Lambda9{{"Lambda[9∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Constant119{{"Constant[119∈0] ➊<br />ᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ"}}:::plan
    Constant119 --> Lambda9
    List14{{"List[14∈0] ➊<br />ᐸ118ᐳ"}}:::plan
    Access118{{"Access[118∈0] ➊<br />ᐸ9.base64JSON.1ᐳ"}}:::plan
    Access118 --> List14
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access44
    __Value2 --> Access45
    Lambda9 --> Access118
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    List40{{"List[40∈1] ➊<br />ᐸ15,21,27,33,39ᐳ"}}:::plan
    Object15{{"Object[15∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object21{{"Object[21∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object27{{"Object[27∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object33{{"Object[33∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object39{{"Object[39∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object15 & Object21 & Object27 & Object33 & Object39 --> List40
    Lambda13[["Lambda[13∈1] ➊"]]:::unbatchedplan
    Lambda13 & List14 --> Object15
    Lambda19[["Lambda[19∈1] ➊"]]:::unbatchedplan
    Lambda19 & List14 --> Object21
    Lambda25[["Lambda[25∈1] ➊"]]:::unbatchedplan
    Lambda25 & List14 --> Object27
    Lambda31[["Lambda[31∈1] ➊"]]:::unbatchedplan
    Lambda31 & List14 --> Object33
    Lambda37[["Lambda[37∈1] ➊"]]:::unbatchedplan
    Lambda37 & List14 --> Object39
    PgSelect43[["PgSelect[43∈1] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Access42{{"Access[42∈1] ➊<br />ᐸ41.0ᐳ"}}:::plan
    Object46 & Access42 --> PgSelect43
    PgSelect50[["PgSelect[50∈1] ➊<br />ᐸcustom_delete_relational_item(mutation)ᐳ"]]:::sideeffectplan
    PgClassExpression49{{"PgClassExpression[49∈1] ➊<br />ᐸ__relational_items__ᐳ"}}:::plan
    Object46 & PgClassExpression49 --> PgSelect50
    Lambda9 --> Lambda13
    Lambda9 --> Lambda19
    Lambda9 --> Lambda25
    Lambda9 --> Lambda31
    Lambda9 --> Lambda37
    Lambda41{{"Lambda[41∈1] ➊"}}:::plan
    List40 --> Lambda41
    Lambda41 --> Access42
    First47{{"First[47∈1] ➊"}}:::plan
    PgSelect43 --> First47
    PgSelectSingle48{{"PgSelectSingle[48∈1] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First47 --> PgSelectSingle48
    PgSelectSingle48 --> PgClassExpression49
    First54{{"First[54∈1] ➊"}}:::plan
    PgSelect50 --> First54
    PgSelectSingle55{{"PgSelectSingle[55∈1] ➊<br />ᐸcustom_delete_relational_itemᐳ"}}:::plan
    First54 --> PgSelectSingle55
    PgClassExpression56{{"PgClassExpression[56∈1] ➊<br />ᐸ__custom_d...l_item__.vᐳ"}}:::plan
    PgSelectSingle55 --> PgClassExpression56
    Object57{{"Object[57∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgClassExpression56 --> Object57
    Connection70{{"Connection[70∈2] ➊<br />ᐸ66ᐳ"}}:::plan
    Constant120{{"Constant[120∈2] ➊<br />ᐸ1ᐳ"}}:::plan
    Constant120 --> Connection70
    PgSelect71[["PgSelect[71∈4] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object46 & Connection70 --> PgSelect71
    __Item72[/"__Item[72∈5]<br />ᐸ71ᐳ"\]:::itemplan
    PgSelect71 ==> __Item72
    PgSelectSingle73{{"PgSelectSingle[73∈5]<br />ᐸrelational_itemsᐳ"}}:::plan
    __Item72 --> PgSelectSingle73
    PgSelect75[["PgSelect[75∈6]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    PgClassExpression74{{"PgClassExpression[74∈6]<br />ᐸ__relation...ems__.”id”ᐳ<br />ᐳRelationalTopic"}}:::plan
    Object46 & PgClassExpression74 --> PgSelect75
    List83{{"List[83∈6]<br />ᐸ81,82ᐳ<br />ᐳRelationalTopic"}}:::plan
    Constant81{{"Constant[81∈6] ➊<br />ᐸ'relational_topics'ᐳ<br />ᐳRelationalTopic"}}:::plan
    PgClassExpression82{{"PgClassExpression[82∈6]<br />ᐸ__relation...c_item_id”ᐳ"}}:::plan
    Constant81 & PgClassExpression82 --> List83
    PgSelect86[["PgSelect[86∈6]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object46 & PgClassExpression74 --> PgSelect86
    List92{{"List[92∈6]<br />ᐸ90,91ᐳ<br />ᐳRelationalPost"}}:::plan
    Constant90{{"Constant[90∈6] ➊<br />ᐸ'relational_posts'ᐳ<br />ᐳRelationalPost"}}:::plan
    PgClassExpression91{{"PgClassExpression[91∈6]<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant90 & PgClassExpression91 --> List92
    PgSelect94[["PgSelect[94∈6]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object46 & PgClassExpression74 --> PgSelect94
    List100{{"List[100∈6]<br />ᐸ98,99ᐳ<br />ᐳRelationalDivider"}}:::plan
    Constant98{{"Constant[98∈6] ➊<br />ᐸ'relational_dividers'ᐳ<br />ᐳRelationalDivider"}}:::plan
    PgClassExpression99{{"PgClassExpression[99∈6]<br />ᐸ__relation...r_item_id”ᐳ"}}:::plan
    Constant98 & PgClassExpression99 --> List100
    PgSelect102[["PgSelect[102∈6]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object46 & PgClassExpression74 --> PgSelect102
    List108{{"List[108∈6]<br />ᐸ106,107ᐳ<br />ᐳRelationalChecklist"}}:::plan
    Constant106{{"Constant[106∈6] ➊<br />ᐸ'relational_checklists'ᐳ<br />ᐳRelationalChecklist"}}:::plan
    PgClassExpression107{{"PgClassExpression[107∈6]<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant106 & PgClassExpression107 --> List108
    PgSelect110[["PgSelect[110∈6]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object46 & PgClassExpression74 --> PgSelect110
    List116{{"List[116∈6]<br />ᐸ114,115ᐳ<br />ᐳRelationalChecklistItem"}}:::plan
    Constant114{{"Constant[114∈6] ➊<br />ᐸ'relational_checklist_items'ᐳ<br />ᐳRelationalChecklistItem"}}:::plan
    PgClassExpression115{{"PgClassExpression[115∈6]<br />ᐸ__relation...m_item_id”ᐳ"}}:::plan
    Constant114 & PgClassExpression115 --> List116
    PgSelectSingle73 --> PgClassExpression74
    First79{{"First[79∈6]"}}:::plan
    PgSelect75 --> First79
    PgSelectSingle80{{"PgSelectSingle[80∈6]<br />ᐸrelational_topicsᐳ"}}:::plan
    First79 --> PgSelectSingle80
    PgSelectSingle80 --> PgClassExpression82
    Lambda84{{"Lambda[84∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List83 --> Lambda84
    PgClassExpression85{{"PgClassExpression[85∈6]<br />ᐸ__relation...s__.”type”ᐳ<br />ᐳRelationalTopic"}}:::plan
    PgSelectSingle73 --> PgClassExpression85
    First88{{"First[88∈6]"}}:::plan
    PgSelect86 --> First88
    PgSelectSingle89{{"PgSelectSingle[89∈6]<br />ᐸrelational_postsᐳ"}}:::plan
    First88 --> PgSelectSingle89
    PgSelectSingle89 --> PgClassExpression91
    Lambda93{{"Lambda[93∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List92 --> Lambda93
    First96{{"First[96∈6]"}}:::plan
    PgSelect94 --> First96
    PgSelectSingle97{{"PgSelectSingle[97∈6]<br />ᐸrelational_dividersᐳ"}}:::plan
    First96 --> PgSelectSingle97
    PgSelectSingle97 --> PgClassExpression99
    Lambda101{{"Lambda[101∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List100 --> Lambda101
    First104{{"First[104∈6]"}}:::plan
    PgSelect102 --> First104
    PgSelectSingle105{{"PgSelectSingle[105∈6]<br />ᐸrelational_checklistsᐳ"}}:::plan
    First104 --> PgSelectSingle105
    PgSelectSingle105 --> PgClassExpression107
    Lambda109{{"Lambda[109∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List108 --> Lambda109
    First112{{"First[112∈6]"}}:::plan
    PgSelect110 --> First112
    PgSelectSingle113{{"PgSelectSingle[113∈6]<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First112 --> PgSelectSingle113
    PgSelectSingle113 --> PgClassExpression115
    Lambda117{{"Lambda[117∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List116 --> Lambda117

    %% define steps

    subgraph "Buckets for mutations/v4/polymorphic.relay.custom_delete"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Lambda9,List14,Access44,Access45,Object46,Access118,Constant119 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 9, 14, 46, 4<br /><br />1: Lambda[13]<br />2: Object[15]<br />3: Lambda[19]<br />4: Object[21]<br />5: Lambda[25]<br />6: Object[27]<br />7: Lambda[31]<br />8: Object[33]<br />9: Lambda[37]<br />10: Object[39]<br />11: List[40]<br />12: Lambda[41]<br />13: Access[42]<br />14: PgSelect[43]<br />15: First[47]<br />16: PgSelectSingle[48]<br />17: PgClassExpression[49]<br />18: PgSelect[50]<br />19: <br />ᐳ: 54, 55, 56, 57"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,Lambda13,Object15,Lambda19,Object21,Lambda25,Object27,Lambda31,Object33,Lambda37,Object39,List40,Lambda41,Access42,PgSelect43,First47,PgSelectSingle48,PgClassExpression49,PgSelect50,First54,PgSelectSingle55,PgClassExpression56,Object57 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 57, 4, 46, 56<br /><br />ROOT Object{1}ᐸ{result}ᐳ[57]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,Connection70,Constant120 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 46, 70<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 46, 70<br /><br />ROOT Connection{2}ᐸ66ᐳ[70]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect71 bucket4
    Bucket5("Bucket 5 (listItem)<br />Deps: 46<br /><br />ROOT __Item{5}ᐸ71ᐳ[72]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item72,PgSelectSingle73 bucket5
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 73, 46<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: <br />ᐳ: 74, 81, 85, 90, 98, 106, 114<br />2: 75, 86, 94, 102, 110<br />ᐳ: 79, 80, 82, 83, 84, 88, 89, 91, 92, 93, 96, 97, 99, 100, 101, 104, 105, 107, 108, 109, 112, 113, 115, 116, 117"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression74,PgSelect75,First79,PgSelectSingle80,Constant81,PgClassExpression82,List83,Lambda84,PgClassExpression85,PgSelect86,First88,PgSelectSingle89,Constant90,PgClassExpression91,List92,Lambda93,PgSelect94,First96,PgSelectSingle97,Constant98,PgClassExpression99,List100,Lambda101,PgSelect102,First104,PgSelectSingle105,Constant106,PgClassExpression107,List108,Lambda109,PgSelect110,First112,PgSelectSingle113,Constant114,PgClassExpression115,List116,Lambda117 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    end
