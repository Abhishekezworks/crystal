%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/v4/polymorphic.relay.custom_delete"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 9, 17, 44, 66, 151, 4, 123, 129, 134, 139, 144<br /><br />1: Lambda[16]<br />2: Object[18]<br />3: Lambda[20]<br />4: Object[22]<br />5: Lambda[24]<br />6: Object[26]<br />7: Lambda[28]<br />8: Object[30]<br />9: Lambda[32]<br />10: Object[34]<br />11: List[35]<br />12: Lambda[36]<br />13: Access[38]<br />14: PgSelect[40]<br />15: PgSelectRows[48]<br />16: First[47]<br />17: PgSelectSingle[50]<br />18: PgClassExpression[51]<br />19: PgFromExpression[58]<br />20: PgSelect[52]<br />21: PgSelectRows[61]<br />ᐳ: 60, 63, 64, 65"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 151, 65, 4, 44, 123, 129, 134, 139, 144, 64<br /><br />ROOT Object{1}ᐸ{result}ᐳ[65]"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 44, 76, 151, 123, 129, 134, 139, 144<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 44, 76, 151, 123, 129, 134, 139, 144<br /><br />ROOT Connection{2}ᐸ70ᐳ[76]<br />1: PgSelect[78]<br />2: PgSelectRows[80]"):::bucket
    Bucket5("Bucket 5 (listItem)<br />Deps: 44, 123, 129, 134, 139, 144<br /><br />ROOT __Item{5}ᐸ80ᐳ[81]"):::bucket
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 44, 83, 123, 129, 134, 139, 144, 82, 128<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 84, 95, 102, 109, 116<br />2: 92, 99, 106, 113, 120<br />ᐳ: 91, 94, 98, 101, 105, 108, 112, 115, 119, 122, 124, 125, 126, 130, 131, 132, 135, 136, 137, 140, 141, 142, 145, 146, 147"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6

    %% plan dependencies
    __InputObject6{{"__InputObject[6∈0] ➊"}}:::plan
    Constant150{{"Constant[150∈0] ➊<br />ᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ"}}:::plan
    Constant150 --> __InputObject6
    Object44{{"Object[44∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access41{{"Access[41∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access43{{"Access[43∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access41 & Access43 --> Object44
    Lambda9{{"Lambda[9∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Constant150 --> Lambda9
    List17{{"List[17∈0] ➊<br />ᐸ149ᐳ"}}:::plan
    Access149{{"Access[149∈0] ➊<br />ᐸ9.base64JSON.1ᐳ"}}:::plan
    Access149 --> List17
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access41
    __Value2 --> Access43
    ApplyInput66{{"ApplyInput[66∈0] ➊"}}:::plan
    __InputObject6 --> ApplyInput66
    Lambda9 --> Access149
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant123{{"Constant[123∈0] ➊<br />ᐸ'relational_topics'ᐳ"}}:::plan
    Constant129{{"Constant[129∈0] ➊<br />ᐸ'relational_posts'ᐳ"}}:::plan
    Constant134{{"Constant[134∈0] ➊<br />ᐸ'relational_dividers'ᐳ"}}:::plan
    Constant139{{"Constant[139∈0] ➊<br />ᐸ'relational_checklists'ᐳ"}}:::plan
    Constant144{{"Constant[144∈0] ➊<br />ᐸ'relational_checklist_items'ᐳ"}}:::plan
    Constant151{{"Constant[151∈0] ➊<br />ᐸ1ᐳ"}}:::plan
    List35{{"List[35∈1] ➊<br />ᐸ18,22,26,30,34ᐳ"}}:::plan
    Object18{{"Object[18∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object22{{"Object[22∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object26{{"Object[26∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object30{{"Object[30∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object34{{"Object[34∈1] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object18 & Object22 & Object26 & Object30 & Object34 --> List35
    PgSelect52[["PgSelect[52∈1] ➊<br />ᐸcustom_delete_relational_item(mutation)ᐳ"]]:::sideeffectplan
    PgFromExpression58{{"PgFromExpression[58∈1] ➊"}}:::plan
    Object44 & PgFromExpression58 & ApplyInput66 --> PgSelect52
    Lambda16[["Lambda[16∈1] ➊"]]:::unbatchedplan
    Lambda16 & List17 --> Object18
    Lambda20[["Lambda[20∈1] ➊"]]:::unbatchedplan
    Lambda20 & List17 --> Object22
    Lambda24[["Lambda[24∈1] ➊"]]:::unbatchedplan
    Lambda24 & List17 --> Object26
    Lambda28[["Lambda[28∈1] ➊"]]:::unbatchedplan
    Lambda28 & List17 --> Object30
    Lambda32[["Lambda[32∈1] ➊"]]:::unbatchedplan
    Lambda32 & List17 --> Object34
    PgSelect40[["PgSelect[40∈1] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Access38{{"Access[38∈1] ➊<br />ᐸ36.0ᐳ"}}:::plan
    Object44 & Access38 --> PgSelect40
    Lambda9 --> Lambda16
    Lambda9 --> Lambda20
    Lambda9 --> Lambda24
    Lambda9 --> Lambda28
    Lambda9 --> Lambda32
    Lambda36{{"Lambda[36∈1] ➊"}}:::plan
    List35 --> Lambda36
    Lambda36 --> Access38
    First47{{"First[47∈1] ➊"}}:::plan
    PgSelectRows48[["PgSelectRows[48∈1] ➊"]]:::plan
    PgSelectRows48 --> First47
    PgSelect40 --> PgSelectRows48
    PgSelectSingle50{{"PgSelectSingle[50∈1] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First47 --> PgSelectSingle50
    PgClassExpression51{{"PgClassExpression[51∈1] ➊<br />ᐸ__relational_items__ᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression51
    PgClassExpression51 --> PgFromExpression58
    First60{{"First[60∈1] ➊"}}:::plan
    PgSelectRows61[["PgSelectRows[61∈1] ➊"]]:::plan
    PgSelectRows61 --> First60
    PgSelect52 --> PgSelectRows61
    PgSelectSingle63{{"PgSelectSingle[63∈1] ➊<br />ᐸcustom_delete_relational_itemᐳ"}}:::plan
    First60 --> PgSelectSingle63
    PgClassExpression64{{"PgClassExpression[64∈1] ➊<br />ᐸ__custom_d...l_item__.vᐳ"}}:::plan
    PgSelectSingle63 --> PgClassExpression64
    Object65{{"Object[65∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgClassExpression64 --> Object65
    Connection76{{"Connection[76∈2] ➊<br />ᐸ70ᐳ"}}:::plan
    Constant151 --> Connection76
    PgSelect78[["PgSelect[78∈4] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object44 & Connection76 & Constant151 --> PgSelect78
    PgSelectRows80[["PgSelectRows[80∈4] ➊"]]:::plan
    PgSelect78 --> PgSelectRows80
    __Item81[/"__Item[81∈5]<br />ᐸ80ᐳ"\]:::itemplan
    PgSelectRows80 ==> __Item81
    PgSelectSingle82{{"PgSelectSingle[82∈5]<br />ᐸrelational_itemsᐳ"}}:::plan
    __Item81 --> PgSelectSingle82
    PgClassExpression83{{"PgClassExpression[83∈5]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle82 --> PgClassExpression83
    PgClassExpression128{{"PgClassExpression[128∈5]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle82 --> PgClassExpression128
    PgSelect84[["PgSelect[84∈6]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object44 & PgClassExpression83 --> PgSelect84
    PgSelect95[["PgSelect[95∈6]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object44 & PgClassExpression83 --> PgSelect95
    PgSelect102[["PgSelect[102∈6]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object44 & PgClassExpression83 --> PgSelect102
    PgSelect109[["PgSelect[109∈6]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object44 & PgClassExpression83 --> PgSelect109
    PgSelect116[["PgSelect[116∈6]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object44 & PgClassExpression83 --> PgSelect116
    List125{{"List[125∈6]^<br />ᐸ123,124ᐳ"}}:::plan
    PgClassExpression124{{"PgClassExpression[124∈6]^<br />ᐸ__relation...c_item_id”ᐳ"}}:::plan
    Constant123 & PgClassExpression124 --> List125
    List131{{"List[131∈6]^<br />ᐸ129,130ᐳ"}}:::plan
    PgClassExpression130{{"PgClassExpression[130∈6]^<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant129 & PgClassExpression130 --> List131
    List136{{"List[136∈6]^<br />ᐸ134,135ᐳ"}}:::plan
    PgClassExpression135{{"PgClassExpression[135∈6]^<br />ᐸ__relation...r_item_id”ᐳ"}}:::plan
    Constant134 & PgClassExpression135 --> List136
    List141{{"List[141∈6]^<br />ᐸ139,140ᐳ"}}:::plan
    PgClassExpression140{{"PgClassExpression[140∈6]^<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    Constant139 & PgClassExpression140 --> List141
    List146{{"List[146∈6]^<br />ᐸ144,145ᐳ"}}:::plan
    PgClassExpression145{{"PgClassExpression[145∈6]^<br />ᐸ__relation...m_item_id”ᐳ"}}:::plan
    Constant144 & PgClassExpression145 --> List146
    First91{{"First[91∈6]^"}}:::plan
    PgSelectRows92[["PgSelectRows[92∈6]^"]]:::plan
    PgSelectRows92 --> First91
    PgSelect84 --> PgSelectRows92
    PgSelectSingle94{{"PgSelectSingle[94∈6]^<br />ᐸrelational_topicsᐳ"}}:::plan
    First91 --> PgSelectSingle94
    First98{{"First[98∈6]^"}}:::plan
    PgSelectRows99[["PgSelectRows[99∈6]^"]]:::plan
    PgSelectRows99 --> First98
    PgSelect95 --> PgSelectRows99
    PgSelectSingle101{{"PgSelectSingle[101∈6]^<br />ᐸrelational_postsᐳ"}}:::plan
    First98 --> PgSelectSingle101
    First105{{"First[105∈6]^"}}:::plan
    PgSelectRows106[["PgSelectRows[106∈6]^"]]:::plan
    PgSelectRows106 --> First105
    PgSelect102 --> PgSelectRows106
    PgSelectSingle108{{"PgSelectSingle[108∈6]^<br />ᐸrelational_dividersᐳ"}}:::plan
    First105 --> PgSelectSingle108
    First112{{"First[112∈6]^"}}:::plan
    PgSelectRows113[["PgSelectRows[113∈6]^"]]:::plan
    PgSelectRows113 --> First112
    PgSelect109 --> PgSelectRows113
    PgSelectSingle115{{"PgSelectSingle[115∈6]^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First112 --> PgSelectSingle115
    First119{{"First[119∈6]^"}}:::plan
    PgSelectRows120[["PgSelectRows[120∈6]^"]]:::plan
    PgSelectRows120 --> First119
    PgSelect116 --> PgSelectRows120
    PgSelectSingle122{{"PgSelectSingle[122∈6]^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First119 --> PgSelectSingle122
    PgSelectSingle94 --> PgClassExpression124
    Lambda126{{"Lambda[126∈6]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List125 --> Lambda126
    PgSelectSingle101 --> PgClassExpression130
    Lambda132{{"Lambda[132∈6]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List131 --> Lambda132
    PgSelectSingle108 --> PgClassExpression135
    Lambda137{{"Lambda[137∈6]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List136 --> Lambda137
    PgSelectSingle115 --> PgClassExpression140
    Lambda142{{"Lambda[142∈6]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List141 --> Lambda142
    PgSelectSingle122 --> PgClassExpression145
    Lambda147{{"Lambda[147∈6]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List146 --> Lambda147

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,__InputObject6,Lambda9,List17,Access41,Access43,Object44,ApplyInput66,Constant123,Constant129,Constant134,Constant139,Constant144,Access149,Constant150,Constant151 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,Lambda16,Object18,Lambda20,Object22,Lambda24,Object26,Lambda28,Object30,Lambda32,Object34,List35,Lambda36,Access38,PgSelect40,First47,PgSelectRows48,PgSelectSingle50,PgClassExpression51,PgSelect52,PgFromExpression58,First60,PgSelectRows61,PgSelectSingle63,PgClassExpression64,Object65 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,Connection76 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect78,PgSelectRows80 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item81,PgSelectSingle82,PgClassExpression83,PgClassExpression128 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect84,First91,PgSelectRows92,PgSelectSingle94,PgSelect95,First98,PgSelectRows99,PgSelectSingle101,PgSelect102,First105,PgSelectRows106,PgSelectSingle108,PgSelect109,First112,PgSelectRows113,PgSelectSingle115,PgSelect116,First119,PgSelectRows120,PgSelectSingle122,PgClassExpression124,List125,Lambda126,PgClassExpression130,List131,Lambda132,PgClassExpression135,List136,Lambda137,PgClassExpression140,List141,Lambda142,PgClassExpression145,List146,Lambda147 bucket6

