%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/v4/polymorphic.relay.custom_delete"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 7, 31, 32, 106, 110, 114, 118, 122, 132, 133, 6, 9, 33, 49, 131, 13<br />2: 12, 15, 18, 21, 24<br />ᐳ: 14, 17, 20, 23, 26, 27, 28, 29<br />3: PgSelect[30]<br />4: PgSelectRows[35]<br />ᐳ: 34, 36, 37, 43"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 33, 43, 49, 133, 4, 106, 110, 114, 118, 122<br /><br />1: PgSelect[39]<br />2: PgSelectRows[45]<br />ᐳ: 44, 46, 47, 48"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 133, 48, 4, 33, 106, 110, 114, 118, 122, 47<br /><br />ROOT Object{1}ᐸ{result}ᐳ[48]"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 33, 56, 133, 106, 110, 114, 118, 122<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 33, 56, 133, 106, 110, 114, 118, 122<br /><br />ROOT Connection{2}ᐸ52ᐳ[56]<br />1: PgSelect[58]<br />2: PgSelectRows[59]"):::bucket
    Bucket5("Bucket 5 (listItem)<br />Deps: 33, 106, 110, 114, 118, 122<br /><br />ROOT __Item{5}ᐸ59ᐳ[60]"):::bucket
    Bucket6("Bucket 6 (polymorphic)<br />__typename: Lambda[65]<br />Deps: 65, 33, 62, 106, 110, 114, 118, 122, 64"):::bucket
    Bucket7("Bucket 7 (polymorphicPartition)<br />|RelationalTopic<br />Deps: 33, 62, 106, 64<br />ᐳRelationalTopic<br /><br />1: PgSelect[67]<br />2: PgSelectRows[72]<br />ᐳ: 71, 73, 107, 108, 109"):::bucket
    Bucket8("Bucket 8 (polymorphicPartition)<br />|RelationalPost<br />Deps: 33, 62, 110, 64<br />ᐳRelationalPost<br /><br />1: PgSelect[75]<br />2: PgSelectRows[80]<br />ᐳ: 79, 81, 111, 112, 113"):::bucket
    Bucket9("Bucket 9 (polymorphicPartition)<br />|RelationalDivider<br />Deps: 33, 62, 114, 64<br />ᐳRelationalDivider<br /><br />1: PgSelect[83]<br />2: PgSelectRows[88]<br />ᐳ: 87, 89, 115, 116, 117"):::bucket
    Bucket10("Bucket 10 (polymorphicPartition)<br />|RelationalChecklist<br />Deps: 33, 62, 118, 64<br />ᐳRelationalChecklist<br /><br />1: PgSelect[91]<br />2: PgSelectRows[96]<br />ᐳ: 95, 97, 119, 120, 121"):::bucket
    Bucket11("Bucket 11 (polymorphicPartition)<br />|RelationalChecklistItem<br />Deps: 33, 62, 122, 64<br />ᐳRelationalChecklistItem<br /><br />1: PgSelect[99]<br />2: PgSelectRows[104]<br />ᐳ: 103, 105, 123, 124, 125"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket6 --> Bucket7 & Bucket8 & Bucket9 & Bucket10 & Bucket11

    %% plan dependencies
    List27{{"List[27∈0] ➊<br />ᐸ14,17,20,23,26ᐳ"}}:::plan
    Object14{{"Object[14∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object17{{"Object[17∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object20{{"Object[20∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object23{{"Object[23∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object26{{"Object[26∈0] ➊<br />ᐸ{match,pks}ᐳ"}}:::plan
    Object14 & Object17 & Object20 & Object23 & Object26 --> List27
    __InputObject6{{"__InputObject[6∈0] ➊<br />More deps:<br />- Constantᐸundefinedᐳ[7]<br />- Constantᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ[132]"}}:::plan
    Lambda12[["Lambda[12∈0] ➊"]]:::unbatchedplan
    List13{{"List[13∈0] ➊<br />ᐸ131ᐳ"}}:::plan
    Lambda12 & List13 --> Object14
    Lambda15[["Lambda[15∈0] ➊"]]:::unbatchedplan
    Lambda15 & List13 --> Object17
    Lambda18[["Lambda[18∈0] ➊"]]:::unbatchedplan
    Lambda18 & List13 --> Object20
    Lambda21[["Lambda[21∈0] ➊"]]:::unbatchedplan
    Lambda21 & List13 --> Object23
    Lambda24[["Lambda[24∈0] ➊"]]:::unbatchedplan
    Lambda24 & List13 --> Object26
    PgSelect30[["PgSelect[30∈0] ➊<br />ᐸrelational_itemsᐳ<br />More deps:<br />- Object[33]"]]:::plan
    Access29{{"Access[29∈0] ➊<br />ᐸ28.0ᐳ"}}:::plan
    Access29 --> PgSelect30
    Object33{{"Object[33∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ<br />Dependents: 8"}}:::plan
    Access31{{"Access[31∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access32{{"Access[32∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access31 & Access32 --> Object33
    Lambda9{{"Lambda[9∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ<br />More deps:<br />- Constantᐸ'WyJyZWxhdGlvbmFsX3RvcGljcyIsMV0='ᐳ[132]"}}:::plan
    Lambda9 --> Lambda12
    Access131{{"Access[131∈0] ➊<br />ᐸ9.base64JSON.1ᐳ"}}:::plan
    Access131 --> List13
    Lambda9 --> Lambda15
    Lambda9 --> Lambda18
    Lambda9 --> Lambda21
    Lambda9 --> Lambda24
    Lambda28{{"Lambda[28∈0] ➊"}}:::plan
    List27 --> Lambda28
    Lambda28 --> Access29
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access31
    __Value2 --> Access32
    First34{{"First[34∈0] ➊"}}:::plan
    PgSelectRows35[["PgSelectRows[35∈0] ➊"]]:::plan
    PgSelectRows35 --> First34
    PgSelect30 --> PgSelectRows35
    PgSelectSingle36{{"PgSelectSingle[36∈0] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First34 --> PgSelectSingle36
    PgClassExpression37{{"PgClassExpression[37∈0] ➊<br />ᐸ__relational_items__ᐳ"}}:::plan
    PgSelectSingle36 --> PgClassExpression37
    PgFromExpression43{{"PgFromExpression[43∈0] ➊"}}:::plan
    PgClassExpression37 -->|trapInhibited| PgFromExpression43
    ApplyInput49{{"ApplyInput[49∈0] ➊"}}:::plan
    __InputObject6 --> ApplyInput49
    Lambda9 --> Access131
    PgSelect39[["PgSelect[39∈1] ➊<br />ᐸcustom_delete_relational_item(mutation)ᐳ<br />More deps:<br />- Object[33]"]]:::sideeffectplan
    PgFromExpression43 & ApplyInput49 --> PgSelect39
    First44{{"First[44∈1] ➊"}}:::plan
    PgSelectRows45[["PgSelectRows[45∈1] ➊"]]:::plan
    PgSelectRows45 --> First44
    PgSelect39 --> PgSelectRows45
    PgSelectSingle46{{"PgSelectSingle[46∈1] ➊<br />ᐸcustom_delete_relational_itemᐳ"}}:::plan
    First44 --> PgSelectSingle46
    PgClassExpression47{{"PgClassExpression[47∈1] ➊<br />ᐸ__custom_d...l_item__.vᐳ"}}:::plan
    PgSelectSingle46 --> PgClassExpression47
    Object48{{"Object[48∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgClassExpression47 --> Object48
    Connection56{{"Connection[56∈2] ➊<br />ᐸ52ᐳ<br />More deps:<br />- Constantᐸ1ᐳ[133]"}}:::plan
    PgSelect58[["PgSelect[58∈4] ➊<br />ᐸrelational_itemsᐳ<br />More deps:<br />- Object[33]<br />- Constantᐸ1ᐳ[133]"]]:::plan
    Connection56 --> PgSelect58
    PgSelectRows59[["PgSelectRows[59∈4] ➊"]]:::plan
    PgSelect58 --> PgSelectRows59
    __Item60[/"__Item[60∈5]<br />ᐸ59ᐳ"\]:::itemplan
    PgSelectRows59 ==> __Item60
    PgSelectSingle61{{"PgSelectSingle[61∈5]<br />ᐸrelational_itemsᐳ"}}:::plan
    __Item60 --> PgSelectSingle61
    PgClassExpression62{{"PgClassExpression[62∈5]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle61 --> PgClassExpression62
    PgClassExpression64{{"PgClassExpression[64∈5]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle61 --> PgClassExpression64
    Lambda65{{"Lambda[65∈5]<br />ᐸRelationalItem_typeNameFromTypeᐳ"}}:::plan
    PgClassExpression64 --> Lambda65
    PgSelect67[["PgSelect[67∈7]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic<br />More deps:<br />- Object[33]"]]:::plan
    PgClassExpression62 --> PgSelect67
    List108{{"List[108∈7]^<br />ᐸ106,107ᐳ<br />More deps:<br />- Constantᐸ'relational_topics'ᐳ[106]"}}:::plan
    PgClassExpression107{{"PgClassExpression[107∈7]^<br />ᐸ__relation...c_item_id”ᐳ"}}:::plan
    PgClassExpression107 --> List108
    First71{{"First[71∈7]^"}}:::plan
    PgSelectRows72[["PgSelectRows[72∈7]^"]]:::plan
    PgSelectRows72 --> First71
    PgSelect67 --> PgSelectRows72
    PgSelectSingle73{{"PgSelectSingle[73∈7]^<br />ᐸrelational_topicsᐳ"}}:::plan
    First71 --> PgSelectSingle73
    PgSelectSingle73 --> PgClassExpression107
    Lambda109{{"Lambda[109∈7]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List108 --> Lambda109
    PgSelect75[["PgSelect[75∈8]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost<br />More deps:<br />- Object[33]"]]:::plan
    PgClassExpression62 --> PgSelect75
    List112{{"List[112∈8]^<br />ᐸ110,111ᐳ<br />More deps:<br />- Constantᐸ'relational_posts'ᐳ[110]"}}:::plan
    PgClassExpression111{{"PgClassExpression[111∈8]^<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    PgClassExpression111 --> List112
    First79{{"First[79∈8]^"}}:::plan
    PgSelectRows80[["PgSelectRows[80∈8]^"]]:::plan
    PgSelectRows80 --> First79
    PgSelect75 --> PgSelectRows80
    PgSelectSingle81{{"PgSelectSingle[81∈8]^<br />ᐸrelational_postsᐳ"}}:::plan
    First79 --> PgSelectSingle81
    PgSelectSingle81 --> PgClassExpression111
    Lambda113{{"Lambda[113∈8]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List112 --> Lambda113
    PgSelect83[["PgSelect[83∈9]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider<br />More deps:<br />- Object[33]"]]:::plan
    PgClassExpression62 --> PgSelect83
    List116{{"List[116∈9]^<br />ᐸ114,115ᐳ<br />More deps:<br />- Constantᐸ'relational_dividers'ᐳ[114]"}}:::plan
    PgClassExpression115{{"PgClassExpression[115∈9]^<br />ᐸ__relation...r_item_id”ᐳ"}}:::plan
    PgClassExpression115 --> List116
    First87{{"First[87∈9]^"}}:::plan
    PgSelectRows88[["PgSelectRows[88∈9]^"]]:::plan
    PgSelectRows88 --> First87
    PgSelect83 --> PgSelectRows88
    PgSelectSingle89{{"PgSelectSingle[89∈9]^<br />ᐸrelational_dividersᐳ"}}:::plan
    First87 --> PgSelectSingle89
    PgSelectSingle89 --> PgClassExpression115
    Lambda117{{"Lambda[117∈9]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List116 --> Lambda117
    PgSelect91[["PgSelect[91∈10]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist<br />More deps:<br />- Object[33]"]]:::plan
    PgClassExpression62 --> PgSelect91
    List120{{"List[120∈10]^<br />ᐸ118,119ᐳ<br />More deps:<br />- Constantᐸ'relational_checklists'ᐳ[118]"}}:::plan
    PgClassExpression119{{"PgClassExpression[119∈10]^<br />ᐸ__relation...t_item_id”ᐳ"}}:::plan
    PgClassExpression119 --> List120
    First95{{"First[95∈10]^"}}:::plan
    PgSelectRows96[["PgSelectRows[96∈10]^"]]:::plan
    PgSelectRows96 --> First95
    PgSelect91 --> PgSelectRows96
    PgSelectSingle97{{"PgSelectSingle[97∈10]^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First95 --> PgSelectSingle97
    PgSelectSingle97 --> PgClassExpression119
    Lambda121{{"Lambda[121∈10]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List120 --> Lambda121
    PgSelect99[["PgSelect[99∈11]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem<br />More deps:<br />- Object[33]"]]:::plan
    PgClassExpression62 --> PgSelect99
    List124{{"List[124∈11]^<br />ᐸ122,123ᐳ<br />More deps:<br />- Constantᐸ'relational_checklist_items'ᐳ[122]"}}:::plan
    PgClassExpression123{{"PgClassExpression[123∈11]^<br />ᐸ__relation...m_item_id”ᐳ"}}:::plan
    PgClassExpression123 --> List124
    First103{{"First[103∈11]^"}}:::plan
    PgSelectRows104[["PgSelectRows[104∈11]^"]]:::plan
    PgSelectRows104 --> First103
    PgSelect99 --> PgSelectRows104
    PgSelectSingle105{{"PgSelectSingle[105∈11]^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First103 --> PgSelectSingle105
    PgSelectSingle105 --> PgClassExpression123
    Lambda125{{"Lambda[125∈11]^<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List124 --> Lambda125

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__InputObject6,Lambda9,Lambda12,List13,Object14,Lambda15,Object17,Lambda18,Object20,Lambda21,Object23,Lambda24,Object26,List27,Lambda28,Access29,PgSelect30,Access31,Access32,Object33,First34,PgSelectRows35,PgSelectSingle36,PgClassExpression37,PgFromExpression43,ApplyInput49,Access131 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect39,First44,PgSelectRows45,PgSelectSingle46,PgClassExpression47,Object48 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,Connection56 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect58,PgSelectRows59 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item60,PgSelectSingle61,PgClassExpression62,PgClassExpression64,Lambda65 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect67,First71,PgSelectRows72,PgSelectSingle73,PgClassExpression107,List108,Lambda109 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgSelect75,First79,PgSelectRows80,PgSelectSingle81,PgClassExpression111,List112,Lambda113 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgSelect83,First87,PgSelectRows88,PgSelectSingle89,PgClassExpression115,List116,Lambda117 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgSelect91,First95,PgSelectRows96,PgSelectSingle97,PgClassExpression119,List120,Lambda121 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgSelect99,First103,PgSelectRows104,PgSelectSingle105,PgClassExpression123,List124,Lambda125 bucket11

