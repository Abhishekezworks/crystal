%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    __InputObject9{{"__InputObject[9∈0] ➊"}}:::plan
    Constant80{{"Constant[80∈0] ➊<br />ᐸ'postgraphile_test_authenticator'ᐳ"}}:::plan
    Constant81{{"Constant[81∈0] ➊<br />ᐸ'pg11'ᐳ"}}:::plan
    Constant12{{"Constant[12∈0] ➊<br />ᐸ[ '2098288669218571759', '2098288669218571760', '20982886692ᐳ"}}:::plan
    __InputObject13{{"__InputObject[13∈0] ➊"}}:::plan
    Constant80 & Constant81 & Constant12 & __InputObject13 --> __InputObject9
    __InputObject23{{"__InputObject[23∈0] ➊"}}:::plan
    Constant83{{"Constant[83∈0] ➊<br />ᐸ'postgraphile_test_visitor'ᐳ"}}:::plan
    Constant84{{"Constant[84∈0] ➊<br />ᐸ'c'ᐳ"}}:::plan
    Constant26{{"Constant[26∈0] ➊<br />ᐸ[ '2098288669218571759', '2098288669218571760', '20982886692ᐳ"}}:::plan
    __InputObject27{{"__InputObject[27∈0] ➊"}}:::plan
    Constant83 & Constant84 & Constant26 & __InputObject27 --> __InputObject23
    __InputObject6{{"__InputObject[6∈0] ➊"}}:::plan
    Constant79{{"Constant[79∈0] ➊<br />ᐸ12ᐳ"}}:::plan
    Constant79 & __InputObject9 --> __InputObject6
    Constant82{{"Constant[82∈0] ➊<br />ᐸ1ᐳ"}}:::plan
    Constant82 --> __InputObject13
    Object18{{"Object[18∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access16{{"Access[16∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access17{{"Access[17∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access16 & Access17 --> Object18
    __InputObject21{{"__InputObject[21∈0] ➊"}}:::plan
    __InputObject23 --> __InputObject21
    Constant82 --> __InputObject27
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access16
    __Value2 --> Access17
    ApplyInput19{{"ApplyInput[19∈0] ➊"}}:::plan
    __InputObject6 --> ApplyInput19
    ApplyInput33{{"ApplyInput[33∈0] ➊"}}:::plan
    __InputObject21 --> ApplyInput33
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgUpdateSingle15[["PgUpdateSingle[15∈1] ➊<br />ᐸtypes(id;)ᐳ"]]:::sideeffectplan
    Object18 & Constant79 & ApplyInput19 --> PgUpdateSingle15
    Object20{{"Object[20∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgUpdateSingle15 --> Object20
    PgSelect42[["PgSelect[42∈5] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"]]:::plan
    PgFromExpression46{{"PgFromExpression[46∈5] ➊"}}:::plan
    Object18 & PgFromExpression46 --> PgSelect42
    PgClassExpression35{{"PgClassExpression[35∈5] ➊<br />ᐸ__types__.”id”ᐳ"}}:::plan
    Access36{{"Access[36∈5] ➊<br />ᐸ15.tᐳ"}}:::plan
    Access36 --> PgClassExpression35
    PgUpdateSingle15 --> Access36
    PgClassExpression37{{"PgClassExpression[37∈5] ➊<br />ᐸ__types__.”regrole”ᐳ"}}:::plan
    Access36 --> PgClassExpression37
    PgClassExpression38{{"PgClassExpression[38∈5] ➊<br />ᐸ__types__....namespace”ᐳ"}}:::plan
    Access36 --> PgClassExpression38
    PgClassExpression39{{"PgClassExpression[39∈5] ➊<br />ᐸ__types__....ay_domain”ᐳ"}}:::plan
    Access36 --> PgClassExpression39
    PgClassExpression41{{"PgClassExpression[41∈5] ➊<br />ᐸ__types__....ound_type”ᐳ"}}:::plan
    Access36 --> PgClassExpression41
    PgClassExpression41 --> PgFromExpression46
    First47{{"First[47∈5] ➊"}}:::plan
    PgSelectRows48[["PgSelectRows[48∈5] ➊"]]:::plan
    PgSelectRows48 --> First47
    PgSelect42 --> PgSelectRows48
    PgSelectSingle49{{"PgSelectSingle[49∈5] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"}}:::plan
    First47 --> PgSelectSingle49
    __Item40[/"__Item[40∈7]<br />ᐸ39ᐳ"\]:::itemplan
    PgClassExpression39 ==> __Item40
    PgClassExpression65{{"PgClassExpression[65∈8] ➊<br />ᐸ__frmcdc_d...type__.”a”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression65
    PgClassExpression66{{"PgClassExpression[66∈8] ➊<br />ᐸ__frmcdc_d...type__.”b”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression66
    PgClassExpression67{{"PgClassExpression[67∈8] ➊<br />ᐸ__frmcdc_d...type__.”c”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression67
    PgClassExpression68{{"PgClassExpression[68∈8] ➊<br />ᐸ__frmcdc_d...type__.”d”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression68
    PgClassExpression69{{"PgClassExpression[69∈8] ➊<br />ᐸ__frmcdc_d...type__.”e”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression69
    PgClassExpression70{{"PgClassExpression[70∈8] ➊<br />ᐸ__frmcdc_d...type__.”f”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression70
    PgClassExpression71{{"PgClassExpression[71∈8] ➊<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression71
    PgInsertSingle29[["PgInsertSingle[29∈3] ➊<br />ᐸtypes()ᐳ"]]:::sideeffectplan
    Object32{{"Object[32∈3] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Object32 & ApplyInput33 --> PgInsertSingle29
    Access30{{"Access[30∈3] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access31{{"Access[31∈3] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access30 & Access31 --> Object32
    __Value2 --> Access30
    __Value2 --> Access31
    Object34{{"Object[34∈3] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgInsertSingle29 --> Object34
    PgSelect57[["PgSelect[57∈6] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"]]:::plan
    PgFromExpression61{{"PgFromExpression[61∈6] ➊"}}:::plan
    Object32 & PgFromExpression61 --> PgSelect57
    PgClassExpression50{{"PgClassExpression[50∈6] ➊<br />ᐸ__types__.”id”ᐳ"}}:::plan
    Access51{{"Access[51∈6] ➊<br />ᐸ29.tᐳ"}}:::plan
    Access51 --> PgClassExpression50
    PgInsertSingle29 --> Access51
    PgClassExpression52{{"PgClassExpression[52∈6] ➊<br />ᐸ__types__.”regrole”ᐳ"}}:::plan
    Access51 --> PgClassExpression52
    PgClassExpression53{{"PgClassExpression[53∈6] ➊<br />ᐸ__types__....namespace”ᐳ"}}:::plan
    Access51 --> PgClassExpression53
    PgClassExpression54{{"PgClassExpression[54∈6] ➊<br />ᐸ__types__....ay_domain”ᐳ"}}:::plan
    Access51 --> PgClassExpression54
    PgClassExpression56{{"PgClassExpression[56∈6] ➊<br />ᐸ__types__....ound_type”ᐳ"}}:::plan
    Access51 --> PgClassExpression56
    PgClassExpression56 --> PgFromExpression61
    First62{{"First[62∈6] ➊"}}:::plan
    PgSelectRows63[["PgSelectRows[63∈6] ➊"]]:::plan
    PgSelectRows63 --> First62
    PgSelect57 --> PgSelectRows63
    PgSelectSingle64{{"PgSelectSingle[64∈6] ➊<br />ᐸfrmcdc_domainConstrainedCompoundTypeᐳ"}}:::plan
    First62 --> PgSelectSingle64
    __Item55[/"__Item[55∈9]<br />ᐸ54ᐳ"\]:::itemplan
    PgClassExpression54 ==> __Item55
    PgClassExpression72{{"PgClassExpression[72∈10] ➊<br />ᐸ__frmcdc_d...type__.”a”ᐳ"}}:::plan
    PgSelectSingle64 --> PgClassExpression72
    PgClassExpression73{{"PgClassExpression[73∈10] ➊<br />ᐸ__frmcdc_d...type__.”b”ᐳ"}}:::plan
    PgSelectSingle64 --> PgClassExpression73
    PgClassExpression74{{"PgClassExpression[74∈10] ➊<br />ᐸ__frmcdc_d...type__.”c”ᐳ"}}:::plan
    PgSelectSingle64 --> PgClassExpression74
    PgClassExpression75{{"PgClassExpression[75∈10] ➊<br />ᐸ__frmcdc_d...type__.”d”ᐳ"}}:::plan
    PgSelectSingle64 --> PgClassExpression75
    PgClassExpression76{{"PgClassExpression[76∈10] ➊<br />ᐸ__frmcdc_d...type__.”e”ᐳ"}}:::plan
    PgSelectSingle64 --> PgClassExpression76
    PgClassExpression77{{"PgClassExpression[77∈10] ➊<br />ᐸ__frmcdc_d...type__.”f”ᐳ"}}:::plan
    PgSelectSingle64 --> PgClassExpression77
    PgClassExpression78{{"PgClassExpression[78∈10] ➊<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"}}:::plan
    PgSelectSingle64 --> PgClassExpression78

    %% define steps

    subgraph "Buckets for mutations/v4/pg11.types"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,__InputObject6,__InputObject9,Constant12,__InputObject13,Access16,Access17,Object18,ApplyInput19,__InputObject21,__InputObject23,Constant26,__InputObject27,ApplyInput33,Constant79,Constant80,Constant81,Constant82,Constant83,Constant84 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 18, 79, 19<br /><br />1: PgUpdateSingle[15]<br />2: <br />ᐳ: Object[20]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgUpdateSingle15,Object20 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 20, 15, 18<br /><br />ROOT Object{1}ᐸ{result}ᐳ[20]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    Bucket3("Bucket 3 (mutationField)<br />Deps: 33, 2<br /><br />1: Access[30]<br />2: Access[31]<br />3: Object[32]<br />4: PgInsertSingle[29]<br />5: <br />ᐳ: Object[34]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgInsertSingle29,Access30,Access31,Object32,Object34 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 34, 29, 32<br /><br />ROOT Object{3}ᐸ{result}ᐳ[34]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4 bucket4
    Bucket5("Bucket 5 (nullableBoundary)<br />Deps: 15, 18<br /><br />ROOT PgUpdateSingle{1}ᐸtypes(id;)ᐳ[15]<br />1: <br />ᐳ: 36, 35, 37, 38, 39, 41, 46<br />2: PgSelect[42]<br />3: PgSelectRows[48]<br />ᐳ: First[47], PgSelectSingle[49]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression35,Access36,PgClassExpression37,PgClassExpression38,PgClassExpression39,PgClassExpression41,PgSelect42,PgFromExpression46,First47,PgSelectRows48,PgSelectSingle49 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 29, 32<br /><br />ROOT PgInsertSingle{3}ᐸtypes()ᐳ[29]<br />1: <br />ᐳ: 51, 50, 52, 53, 54, 56, 61<br />2: PgSelect[57]<br />3: PgSelectRows[63]<br />ᐳ: First[62], PgSelectSingle[64]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression50,Access51,PgClassExpression52,PgClassExpression53,PgClassExpression54,PgClassExpression56,PgSelect57,PgFromExpression61,First62,PgSelectRows63,PgSelectSingle64 bucket6
    Bucket7("Bucket 7 (listItem)<br /><br />ROOT __Item{7}ᐸ39ᐳ[40]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,__Item40 bucket7
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 49<br /><br />ROOT PgSelectSingle{5}ᐸfrmcdc_domainConstrainedCompoundTypeᐳ[49]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression65,PgClassExpression66,PgClassExpression67,PgClassExpression68,PgClassExpression69,PgClassExpression70,PgClassExpression71 bucket8
    Bucket9("Bucket 9 (listItem)<br /><br />ROOT __Item{9}ᐸ54ᐳ[55]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item55 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 64<br /><br />ROOT PgSelectSingle{6}ᐸfrmcdc_domainConstrainedCompoundTypeᐳ[64]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression72,PgClassExpression73,PgClassExpression74,PgClassExpression75,PgClassExpression76,PgClassExpression77,PgClassExpression78 bucket10
    Bucket0 --> Bucket1 & Bucket3
    Bucket1 --> Bucket2
    Bucket2 --> Bucket5
    Bucket3 --> Bucket4
    Bucket4 --> Bucket6
    Bucket5 --> Bucket7 & Bucket8
    Bucket6 --> Bucket9 & Bucket10
    end
