%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    List157{{"List[157∈0] ➊<br />ᐸ61,126,191,191,191,191,191,191ᐳ"}}:::plan
    List61{{"List[61∈0] ➊<br />ᐸ36ᐳ"}}:::plan
    List126{{"List[126∈0] ➊<br />ᐸ71,101ᐳ"}}:::plan
    Constant191{{"Constant[191∈0] ➊<br />ᐸ[]ᐳ"}}:::plan
    List61 & List126 & Constant191 & Constant191 & Constant191 & Constant191 & Constant191 & Constant191 --> List157
    Object36{{"Object[36∈0] ➊<br />ᐸ{from_hours,from_minutes,to_hours,to_minutes}ᐳ"}}:::plan
    Access41{{"Access[41∈0] ➊<br />ᐸ0.input.tPatch.v.0.0.fromHoursᐳ"}}:::plan
    Access47{{"Access[47∈0] ➊<br />ᐸ0.input.tPatch.v.0.0.fromMinutesᐳ"}}:::plan
    Access53{{"Access[53∈0] ➊<br />ᐸ0.input.tPatch.v.0.0.toHoursᐳ"}}:::plan
    Access59{{"Access[59∈0] ➊<br />ᐸ0.input.tPatch.v.0.0.toMinutesᐳ"}}:::plan
    Access41 & Access47 & Access53 & Access59 --> Object36
    Object71{{"Object[71∈0] ➊<br />ᐸ{from_hours,from_minutes,to_hours,to_minutes}ᐳ"}}:::plan
    Access76{{"Access[76∈0] ➊<br />ᐸ0.input.tPatch.v.1.0.fromHoursᐳ"}}:::plan
    Access82{{"Access[82∈0] ➊<br />ᐸ0.input.tPatch.v.1.0.fromMinutesᐳ"}}:::plan
    Access88{{"Access[88∈0] ➊<br />ᐸ0.input.tPatch.v.1.0.toHoursᐳ"}}:::plan
    Access94{{"Access[94∈0] ➊<br />ᐸ0.input.tPatch.v.1.0.toMinutesᐳ"}}:::plan
    Access76 & Access82 & Access88 & Access94 --> Object71
    Object101{{"Object[101∈0] ➊<br />ᐸ{from_hours,from_minutes,to_hours,to_minutes}ᐳ"}}:::plan
    Access106{{"Access[106∈0] ➊<br />ᐸ0.input.tPatch.v.1.1.fromHoursᐳ"}}:::plan
    Access112{{"Access[112∈0] ➊<br />ᐸ0.input.tPatch.v.1.1.fromMinutesᐳ"}}:::plan
    Access118{{"Access[118∈0] ➊<br />ᐸ0.input.tPatch.v.1.1.toHoursᐳ"}}:::plan
    Access124{{"Access[124∈0] ➊<br />ᐸ0.input.tPatch.v.1.1.toMinutesᐳ"}}:::plan
    Access106 & Access112 & Access118 & Access124 --> Object101
    Object184{{"Object[184∈0] ➊<br />ᐸ{reverse,orders,alias,codec}ᐳ"}}:::plan
    Lambda176{{"Lambda[176∈0] ➊<br />ᐸcalculateShouldReverseOrderᐳ"}}:::plan
    Constant181{{"Constant[181∈0] ➊<br />ᐸ[]ᐳ"}}:::plan
    Constant182{{"Constant[182∈0] ➊<br />ᐸsql.identifier(”frmcdc_work_hour”)ᐳ"}}:::plan
    Constant183{{"Constant[183∈0] ➊<br />ᐸDomainCodecᐸworkHourPartsᐳ(workHour)ᐳ"}}:::plan
    Lambda176 & Constant181 & Constant182 & Constant183 --> Object184
    Object13{{"Object[13∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access11{{"Access[11∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access12{{"Access[12∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access11 & Access12 --> Object13
    Object71 & Object101 --> List126
    Access8{{"Access[8∈0] ➊<br />ᐸ0.input.kᐳ"}}:::plan
    __Value0["__Value[0∈0] ➊<br />ᐸvariableValuesᐳ"]:::plan
    __Value0 --> Access8
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access11
    __Value2 --> Access12
    __Value0 --> Access41
    __Value0 --> Access47
    __Value0 --> Access53
    __Value0 --> Access59
    Object36 --> List61
    __Value0 --> Access76
    __Value0 --> Access82
    __Value0 --> Access88
    __Value0 --> Access94
    __Value0 --> Access106
    __Value0 --> Access112
    __Value0 --> Access118
    __Value0 --> Access124
    Constant192{{"Constant[192∈0] ➊<br />ᐸ§{ first: null, last: null, cursorLower: null, cursorUpper: ᐳ"}}:::plan
    Constant192 --> Lambda176
    Lambda179{{"Lambda[179∈0] ➊<br />ᐸcalculateLimitAndOffsetSQLᐳ"}}:::plan
    Constant193{{"Constant[193∈0] ➊<br />ᐸ§{ first: null, last: null, cursorLower: null, cursorUpper: ᐳ"}}:::plan
    Constant193 --> Lambda179
    Access180{{"Access[180∈0] ➊<br />ᐸ179.0ᐳ"}}:::plan
    Lambda179 --> Access180
    Lambda185{{"Lambda[185∈0] ➊<br />ᐸcalculateOrderBySQLᐳ"}}:::plan
    Object184 --> Lambda185
    Lambda190{{"Lambda[190∈0] ➊<br />ᐸcalculateOrderBySQLᐳ"}}:::plan
    Constant194{{"Constant[194∈0] ➊<br />ᐸ§{ reverse: false, orders: [], alias: sql.identifier(”frmcdcᐳ"}}:::plan
    Constant194 --> Lambda190
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgUpdateSingle10[["PgUpdateSingle[10∈1] ➊<br />ᐸt(k;v)ᐳ"]]:::sideeffectplan
    Object13 & Access8 & List157 --> PgUpdateSingle10
    Object14{{"Object[14∈1] ➊<br />ᐸ{result}ᐳ"}}:::plan
    PgUpdateSingle10 --> Object14
    PgClassExpression158{{"PgClassExpression[158∈3] ➊<br />ᐸ__t__.”k”ᐳ"}}:::plan
    PgUpdateSingle10 --> PgClassExpression158
    PgClassExpression159{{"PgClassExpression[159∈3] ➊<br />ᐸ__t__.”v”ᐳ"}}:::plan
    PgUpdateSingle10 --> PgClassExpression159
    PgSelect163[["PgSelect[163∈5]<br />ᐸfrmcdc_workHourᐳ"]]:::plan
    __Item162[/"__Item[162∈5]<br />ᐸ159ᐳ"\]:::itemplan
    Object13 & __Item162 & Lambda176 & Access180 & Lambda185 & Lambda190 --> PgSelect163
    PgClassExpression159 ==> __Item162
    PgSelectRows167[["PgSelectRows[167∈5]"]]:::plan
    PgSelect163 --> PgSelectRows167
    __Item168[/"__Item[168∈6]<br />ᐸ167ᐳ"\]:::itemplan
    PgSelectRows167 ==> __Item168
    PgSelectSingle169{{"PgSelectSingle[169∈6]<br />ᐸfrmcdc_workHourᐳ"}}:::plan
    __Item168 --> PgSelectSingle169
    PgClassExpression170{{"PgClassExpression[170∈6]<br />ᐸ__frmcdc_w...rom_hours”ᐳ"}}:::plan
    PgSelectSingle169 --> PgClassExpression170
    PgClassExpression171{{"PgClassExpression[171∈6]<br />ᐸ__frmcdc_w...m_minutes”ᐳ"}}:::plan
    PgSelectSingle169 --> PgClassExpression171
    PgClassExpression172{{"PgClassExpression[172∈6]<br />ᐸ__frmcdc_w...”to_hours”ᐳ"}}:::plan
    PgSelectSingle169 --> PgClassExpression172
    PgClassExpression173{{"PgClassExpression[173∈6]<br />ᐸ__frmcdc_w...o_minutes”ᐳ"}}:::plan
    PgSelectSingle169 --> PgClassExpression173

    %% define steps

    subgraph "Buckets for mutations/v4/nested_arrays.updateT"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value2,__Value4,Access8,Access11,Access12,Object13,Object36,Access41,Access47,Access53,Access59,List61,Object71,Access76,Access82,Access88,Access94,Object101,Access106,Access112,Access118,Access124,List126,List157,Lambda176,Lambda179,Access180,Constant181,Constant182,Constant183,Object184,Lambda185,Lambda190,Constant191,Constant192,Constant193,Constant194 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 13, 8, 157, 176, 180, 185, 190<br /><br />1: PgUpdateSingle[10]<br />2: <br />ᐳ: Object[14]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgUpdateSingle10,Object14 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 14, 10, 13, 176, 180, 185, 190<br /><br />ROOT Object{1}ᐸ{result}ᐳ[14]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 10, 13, 176, 180, 185, 190<br /><br />ROOT PgUpdateSingle{1}ᐸt(k;v)ᐳ[10]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression158,PgClassExpression159 bucket3
    Bucket5("Bucket 5 (listItem)<br />Deps: 13, 176, 180, 185, 190<br /><br />ROOT __Item{5}ᐸ159ᐳ[162]<br />1: PgSelect[163]<br />2: PgSelectRows[167]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item162,PgSelect163,PgSelectRows167 bucket5
    Bucket6("Bucket 6 (listItem)<br /><br />ROOT __Item{6}ᐸ167ᐳ[168]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,__Item168,PgSelectSingle169,PgClassExpression170,PgClassExpression171,PgClassExpression172,PgClassExpression173 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket5
    Bucket5 --> Bucket6
    end
