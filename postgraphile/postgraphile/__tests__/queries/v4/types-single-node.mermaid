%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Node7{{"Node[7∈0] ➊"}}:::plan
    Lambda8{{"Lambda[8∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Lambda8 --> Node7
    Constant205{{"Constant[205∈0] ➊<br />ᐸ'WyJ0eXBlcyIsMTFd'ᐳ"}}:::plan
    Constant205 --> Lambda8
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgSelect75[["PgSelect[75∈1] ➊<br />ᐸcompound_keyᐳ<br />ᐳCompoundKey"]]:::plan
    Object16{{"Object[16∈1] ➊^<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access203{{"Access[203∈1] ➊<br />ᐸ8.base64JSON.1ᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access204{{"Access[204∈1] ➊<br />ᐸ8.base64JSON.2ᐳ<br />ᐳCompoundKey"}}:::plan
    Object16 -->|rejectNull| PgSelect75
    Access203 -->|rejectNull| PgSelect75
    Access204 --> PgSelect75
    PgSelect13[["PgSelect[13∈1] ➊<br />ᐸinputsᐳ<br />ᐳInput"]]:::plan
    Object16 -->|rejectNull| PgSelect13
    Access203 --> PgSelect13
    Access14{{"Access[14∈1] ➊<br />ᐸ2.pgSettingsᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access15{{"Access[15∈1] ➊<br />ᐸ2.withPgClientᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access14 & Access15 --> Object16
    PgSelect23[["PgSelect[23∈1] ➊<br />ᐸpatchsᐳ<br />ᐳPatch"]]:::plan
    Object16 -->|rejectNull| PgSelect23
    Access203 --> PgSelect23
    PgSelect33[["PgSelect[33∈1] ➊<br />ᐸreservedᐳ<br />ᐳReserved"]]:::plan
    Object16 -->|rejectNull| PgSelect33
    Access203 --> PgSelect33
    PgSelect43[["PgSelect[43∈1] ➊<br />ᐸreservedPatchsᐳ<br />ᐳReservedPatchRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect43
    Access203 --> PgSelect43
    PgSelect53[["PgSelect[53∈1] ➊<br />ᐸreserved_inputᐳ<br />ᐳReservedInputRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect53
    Access203 --> PgSelect53
    PgSelect63[["PgSelect[63∈1] ➊<br />ᐸdefault_valueᐳ<br />ᐳDefaultValue"]]:::plan
    Object16 -->|rejectNull| PgSelect63
    Access203 --> PgSelect63
    PgSelect85[["PgSelect[85∈1] ➊<br />ᐸpersonᐳ<br />ᐳPerson"]]:::plan
    Object16 -->|rejectNull| PgSelect85
    Access203 --> PgSelect85
    PgSelect95[["PgSelect[95∈1] ➊<br />ᐸpostᐳ<br />ᐳPost"]]:::plan
    Object16 -->|rejectNull| PgSelect95
    Access203 --> PgSelect95
    PgSelect105[["PgSelect[105∈1] ➊<br />ᐸtypesᐳ<br />ᐳType"]]:::plan
    Object16 -->|rejectNull| PgSelect105
    Access203 --> PgSelect105
    PgSelect116[["PgSelect[116∈1] ➊<br />ᐸperson_secretᐳ<br />ᐳPersonSecret"]]:::plan
    Object16 -->|rejectNull| PgSelect116
    Access203 --> PgSelect116
    PgSelect126[["PgSelect[126∈1] ➊<br />ᐸleft_armᐳ<br />ᐳLeftArm"]]:::plan
    Object16 -->|rejectNull| PgSelect126
    Access203 --> PgSelect126
    PgSelect136[["PgSelect[136∈1] ➊<br />ᐸmy_tableᐳ<br />ᐳMyTable"]]:::plan
    Object16 -->|rejectNull| PgSelect136
    Access203 --> PgSelect136
    PgSelect146[["PgSelect[146∈1] ➊<br />ᐸview_tableᐳ<br />ᐳViewTable"]]:::plan
    Object16 -->|rejectNull| PgSelect146
    Access203 --> PgSelect146
    PgSelect156[["PgSelect[156∈1] ➊<br />ᐸsimilar_table_1ᐳ<br />ᐳSimilarTable1"]]:::plan
    Object16 -->|rejectNull| PgSelect156
    Access203 --> PgSelect156
    PgSelect166[["PgSelect[166∈1] ➊<br />ᐸsimilar_table_2ᐳ<br />ᐳSimilarTable2"]]:::plan
    Object16 -->|rejectNull| PgSelect166
    Access203 --> PgSelect166
    PgSelect176[["PgSelect[176∈1] ➊<br />ᐸnull_test_recordᐳ<br />ᐳNullTestRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect176
    Access203 --> PgSelect176
    PgSelect186[["PgSelect[186∈1] ➊<br />ᐸissue756ᐳ<br />ᐳIssue756"]]:::plan
    Object16 -->|rejectNull| PgSelect186
    Access203 --> PgSelect186
    PgSelect196[["PgSelect[196∈1] ➊<br />ᐸlistsᐳ<br />ᐳList"]]:::plan
    Object16 -->|rejectNull| PgSelect196
    Access203 --> PgSelect196
    __Value2 --> Access14
    __Value2 --> Access15
    First17{{"First[17∈1] ➊^"}}:::plan
    PgSelectRows18[["PgSelectRows[18∈1] ➊^"]]:::plan
    PgSelectRows18 --> First17
    PgSelect13 --> PgSelectRows18
    PgSelectSingle19{{"PgSelectSingle[19∈1] ➊^<br />ᐸinputsᐳ"}}:::plan
    First17 --> PgSelectSingle19
    First27{{"First[27∈1] ➊^"}}:::plan
    PgSelectRows28[["PgSelectRows[28∈1] ➊^"]]:::plan
    PgSelectRows28 --> First27
    PgSelect23 --> PgSelectRows28
    PgSelectSingle29{{"PgSelectSingle[29∈1] ➊^<br />ᐸpatchsᐳ"}}:::plan
    First27 --> PgSelectSingle29
    First37{{"First[37∈1] ➊^"}}:::plan
    PgSelectRows38[["PgSelectRows[38∈1] ➊^"]]:::plan
    PgSelectRows38 --> First37
    PgSelect33 --> PgSelectRows38
    PgSelectSingle39{{"PgSelectSingle[39∈1] ➊^<br />ᐸreservedᐳ"}}:::plan
    First37 --> PgSelectSingle39
    First47{{"First[47∈1] ➊^"}}:::plan
    PgSelectRows48[["PgSelectRows[48∈1] ➊^"]]:::plan
    PgSelectRows48 --> First47
    PgSelect43 --> PgSelectRows48
    PgSelectSingle49{{"PgSelectSingle[49∈1] ➊^<br />ᐸreservedPatchsᐳ"}}:::plan
    First47 --> PgSelectSingle49
    First57{{"First[57∈1] ➊^"}}:::plan
    PgSelectRows58[["PgSelectRows[58∈1] ➊^"]]:::plan
    PgSelectRows58 --> First57
    PgSelect53 --> PgSelectRows58
    PgSelectSingle59{{"PgSelectSingle[59∈1] ➊^<br />ᐸreserved_inputᐳ"}}:::plan
    First57 --> PgSelectSingle59
    First67{{"First[67∈1] ➊^"}}:::plan
    PgSelectRows68[["PgSelectRows[68∈1] ➊^"]]:::plan
    PgSelectRows68 --> First67
    PgSelect63 --> PgSelectRows68
    PgSelectSingle69{{"PgSelectSingle[69∈1] ➊^<br />ᐸdefault_valueᐳ"}}:::plan
    First67 --> PgSelectSingle69
    First79{{"First[79∈1] ➊^"}}:::plan
    PgSelectRows80[["PgSelectRows[80∈1] ➊^"]]:::plan
    PgSelectRows80 --> First79
    PgSelect75 --> PgSelectRows80
    PgSelectSingle81{{"PgSelectSingle[81∈1] ➊^<br />ᐸcompound_keyᐳ"}}:::plan
    First79 --> PgSelectSingle81
    First89{{"First[89∈1] ➊^"}}:::plan
    PgSelectRows90[["PgSelectRows[90∈1] ➊^"]]:::plan
    PgSelectRows90 --> First89
    PgSelect85 --> PgSelectRows90
    PgSelectSingle91{{"PgSelectSingle[91∈1] ➊^<br />ᐸpersonᐳ"}}:::plan
    First89 --> PgSelectSingle91
    First99{{"First[99∈1] ➊^"}}:::plan
    PgSelectRows100[["PgSelectRows[100∈1] ➊^"]]:::plan
    PgSelectRows100 --> First99
    PgSelect95 --> PgSelectRows100
    PgSelectSingle101{{"PgSelectSingle[101∈1] ➊^<br />ᐸpostᐳ"}}:::plan
    First99 --> PgSelectSingle101
    First109{{"First[109∈1] ➊^"}}:::plan
    PgSelectRows110[["PgSelectRows[110∈1] ➊^"]]:::plan
    PgSelectRows110 --> First109
    PgSelect105 --> PgSelectRows110
    PgSelectSingle111{{"PgSelectSingle[111∈1] ➊^<br />ᐸtypesᐳ"}}:::plan
    First109 --> PgSelectSingle111
    PgClassExpression112{{"PgClassExpression[112∈1] ➊^<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgSelectSingle111 --> PgClassExpression112
    First120{{"First[120∈1] ➊^"}}:::plan
    PgSelectRows121[["PgSelectRows[121∈1] ➊^"]]:::plan
    PgSelectRows121 --> First120
    PgSelect116 --> PgSelectRows121
    PgSelectSingle122{{"PgSelectSingle[122∈1] ➊^<br />ᐸperson_secretᐳ"}}:::plan
    First120 --> PgSelectSingle122
    First130{{"First[130∈1] ➊^"}}:::plan
    PgSelectRows131[["PgSelectRows[131∈1] ➊^"]]:::plan
    PgSelectRows131 --> First130
    PgSelect126 --> PgSelectRows131
    PgSelectSingle132{{"PgSelectSingle[132∈1] ➊^<br />ᐸleft_armᐳ"}}:::plan
    First130 --> PgSelectSingle132
    First140{{"First[140∈1] ➊^"}}:::plan
    PgSelectRows141[["PgSelectRows[141∈1] ➊^"]]:::plan
    PgSelectRows141 --> First140
    PgSelect136 --> PgSelectRows141
    PgSelectSingle142{{"PgSelectSingle[142∈1] ➊^<br />ᐸmy_tableᐳ"}}:::plan
    First140 --> PgSelectSingle142
    First150{{"First[150∈1] ➊^"}}:::plan
    PgSelectRows151[["PgSelectRows[151∈1] ➊^"]]:::plan
    PgSelectRows151 --> First150
    PgSelect146 --> PgSelectRows151
    PgSelectSingle152{{"PgSelectSingle[152∈1] ➊^<br />ᐸview_tableᐳ"}}:::plan
    First150 --> PgSelectSingle152
    First160{{"First[160∈1] ➊^"}}:::plan
    PgSelectRows161[["PgSelectRows[161∈1] ➊^"]]:::plan
    PgSelectRows161 --> First160
    PgSelect156 --> PgSelectRows161
    PgSelectSingle162{{"PgSelectSingle[162∈1] ➊^<br />ᐸsimilar_table_1ᐳ"}}:::plan
    First160 --> PgSelectSingle162
    First170{{"First[170∈1] ➊^"}}:::plan
    PgSelectRows171[["PgSelectRows[171∈1] ➊^"]]:::plan
    PgSelectRows171 --> First170
    PgSelect166 --> PgSelectRows171
    PgSelectSingle172{{"PgSelectSingle[172∈1] ➊^<br />ᐸsimilar_table_2ᐳ"}}:::plan
    First170 --> PgSelectSingle172
    First180{{"First[180∈1] ➊^"}}:::plan
    PgSelectRows181[["PgSelectRows[181∈1] ➊^"]]:::plan
    PgSelectRows181 --> First180
    PgSelect176 --> PgSelectRows181
    PgSelectSingle182{{"PgSelectSingle[182∈1] ➊^<br />ᐸnull_test_recordᐳ"}}:::plan
    First180 --> PgSelectSingle182
    First190{{"First[190∈1] ➊^"}}:::plan
    PgSelectRows191[["PgSelectRows[191∈1] ➊^"]]:::plan
    PgSelectRows191 --> First190
    PgSelect186 --> PgSelectRows191
    PgSelectSingle192{{"PgSelectSingle[192∈1] ➊^<br />ᐸissue756ᐳ"}}:::plan
    First190 --> PgSelectSingle192
    First200{{"First[200∈1] ➊^"}}:::plan
    PgSelectRows201[["PgSelectRows[201∈1] ➊^"]]:::plan
    PgSelectRows201 --> First200
    PgSelect196 --> PgSelectRows201
    PgSelectSingle202{{"PgSelectSingle[202∈1] ➊^<br />ᐸlistsᐳ"}}:::plan
    First200 --> PgSelectSingle202
    Lambda8 --> Access203
    Lambda8 --> Access204

    %% define steps

    subgraph "Buckets for queries/v4/types-single-node"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Node7,Lambda8,Constant205 bucket0
    Bucket1("Bucket 1 (polymorphic)<br />Query,Input,Patch,Reserved,ReservedPatchRecord,ReservedInputRecord,DefaultValue,CompoundKey,Person,Post,Type,PersonSecret,LeftArm,MyTable,ViewTable,SimilarTable1,SimilarTable2,NullTestRecord,Issue756,List<br />Deps: 2, 8, 7, 4<br />ᐳQuery<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList<br /><br />1: <br />ᐳ: 14, 15, 203, 204, 16<br />2: 13, 23, 33, 43, 53, 63, 75, 85, 95, 105, 116, 126, 136, 146, 156, 166, 176, 186, 196<br />3: 18, 28, 38, 48, 58, 68, 80, 90, 100, 110, 121, 131, 141, 151, 161, 171, 181, 191, 201<br />ᐳ: 17, 19, 27, 29, 37, 39, 47, 49, 57, 59, 67, 69, 79, 81, 89, 91, 99, 101, 109, 111, 112, 120, 122, 130, 132, 140, 142, 150, 152, 160, 162, 170, 172, 180, 182, 190, 192, 200, 202"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect13,Access14,Access15,Object16,First17,PgSelectRows18,PgSelectSingle19,PgSelect23,First27,PgSelectRows28,PgSelectSingle29,PgSelect33,First37,PgSelectRows38,PgSelectSingle39,PgSelect43,First47,PgSelectRows48,PgSelectSingle49,PgSelect53,First57,PgSelectRows58,PgSelectSingle59,PgSelect63,First67,PgSelectRows68,PgSelectSingle69,PgSelect75,First79,PgSelectRows80,PgSelectSingle81,PgSelect85,First89,PgSelectRows90,PgSelectSingle91,PgSelect95,First99,PgSelectRows100,PgSelectSingle101,PgSelect105,First109,PgSelectRows110,PgSelectSingle111,PgClassExpression112,PgSelect116,First120,PgSelectRows121,PgSelectSingle122,PgSelect126,First130,PgSelectRows131,PgSelectSingle132,PgSelect136,First140,PgSelectRows141,PgSelectSingle142,PgSelect146,First150,PgSelectRows151,PgSelectSingle152,PgSelect156,First160,PgSelectRows161,PgSelectSingle162,PgSelect166,First170,PgSelectRows171,PgSelectSingle172,PgSelect176,First180,PgSelectRows181,PgSelectSingle182,PgSelect186,First190,PgSelectRows191,PgSelectSingle192,PgSelect196,First200,PgSelectRows201,PgSelectSingle202,Access203,Access204 bucket1
    Bucket0 --> Bucket1
    end
