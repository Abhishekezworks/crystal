%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/v4/types-single-node"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (polymorphic)<br />Query,Input,Patch,Reserved,ReservedPatchRecord,ReservedInputRecord,DefaultValue,CompoundKey,Person,Post,Type,PersonSecret,LeftArm,MyTable,ViewTable,SimilarTable1,SimilarTable2,NullTestRecord,Issue756,List<br />Deps: 2, 8, 7, 4<br />ᐳQuery<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList<br /><br />1: 17, 19, 193, 194<br />ᐳ: Object[20]<br />2: 16, 28, 37, 46, 55, 64, 75, 85, 94, 103, 112, 121, 130, 139, 148, 157, 166, 175, 184<br />3: 24, 33, 42, 51, 60, 69, 81, 90, 99, 108, 117, 126, 135, 144, 153, 162, 171, 180, 189<br />ᐳ: 23, 26, 32, 35, 41, 44, 50, 53, 59, 62, 68, 71, 80, 83, 89, 92, 98, 101, 107, 110, 116, 119, 125, 128, 134, 137, 143, 146, 152, 155, 161, 164, 170, 173, 179, 182, 188, 191, 192"):::bucket
    end
    Bucket0 --> Bucket1

    %% plan dependencies
    Node7{{"Node[7∈0] ➊"}}:::plan
    Lambda8{{"Lambda[8∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Lambda8 --> Node7
    Constant195{{"Constant[195∈0] ➊<br />ᐸ'WyJ0eXBlcyIsMTFd'ᐳ"}}:::plan
    Constant195 --> Lambda8
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgSelect75[["PgSelect[75∈1] ➊<br />ᐸcompound_keyᐳ<br />ᐳCompoundKey"]]:::plan
    Object20{{"Object[20∈1] ➊^<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access193{{"Access[193∈1] ➊<br />ᐸ8.base64JSON.1ᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access194{{"Access[194∈1] ➊<br />ᐸ8.base64JSON.2ᐳ<br />ᐳCompoundKey"}}:::plan
    Object20 -->|rejectNull| PgSelect75
    Access193 -->|rejectNull| PgSelect75
    Access194 --> PgSelect75
    PgSelect16[["PgSelect[16∈1] ➊<br />ᐸinputsᐳ<br />ᐳInput"]]:::plan
    Object20 -->|rejectNull| PgSelect16
    Access193 --> PgSelect16
    Access17{{"Access[17∈1] ➊<br />ᐸ2.pgSettingsᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access19{{"Access[19∈1] ➊<br />ᐸ2.withPgClientᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access17 & Access19 --> Object20
    PgSelect28[["PgSelect[28∈1] ➊<br />ᐸpatchsᐳ<br />ᐳPatch"]]:::plan
    Object20 -->|rejectNull| PgSelect28
    Access193 --> PgSelect28
    PgSelect37[["PgSelect[37∈1] ➊<br />ᐸreservedᐳ<br />ᐳReserved"]]:::plan
    Object20 -->|rejectNull| PgSelect37
    Access193 --> PgSelect37
    PgSelect46[["PgSelect[46∈1] ➊<br />ᐸreservedPatchsᐳ<br />ᐳReservedPatchRecord"]]:::plan
    Object20 -->|rejectNull| PgSelect46
    Access193 --> PgSelect46
    PgSelect55[["PgSelect[55∈1] ➊<br />ᐸreserved_inputᐳ<br />ᐳReservedInputRecord"]]:::plan
    Object20 -->|rejectNull| PgSelect55
    Access193 --> PgSelect55
    PgSelect64[["PgSelect[64∈1] ➊<br />ᐸdefault_valueᐳ<br />ᐳDefaultValue"]]:::plan
    Object20 -->|rejectNull| PgSelect64
    Access193 --> PgSelect64
    PgSelect85[["PgSelect[85∈1] ➊<br />ᐸpersonᐳ<br />ᐳPerson"]]:::plan
    Object20 -->|rejectNull| PgSelect85
    Access193 --> PgSelect85
    PgSelect94[["PgSelect[94∈1] ➊<br />ᐸpostᐳ<br />ᐳPost"]]:::plan
    Object20 -->|rejectNull| PgSelect94
    Access193 --> PgSelect94
    PgSelect103[["PgSelect[103∈1] ➊<br />ᐸtypesᐳ<br />ᐳType"]]:::plan
    Object20 -->|rejectNull| PgSelect103
    Access193 --> PgSelect103
    PgSelect112[["PgSelect[112∈1] ➊<br />ᐸperson_secretᐳ<br />ᐳPersonSecret"]]:::plan
    Object20 -->|rejectNull| PgSelect112
    Access193 --> PgSelect112
    PgSelect121[["PgSelect[121∈1] ➊<br />ᐸleft_armᐳ<br />ᐳLeftArm"]]:::plan
    Object20 -->|rejectNull| PgSelect121
    Access193 --> PgSelect121
    PgSelect130[["PgSelect[130∈1] ➊<br />ᐸmy_tableᐳ<br />ᐳMyTable"]]:::plan
    Object20 -->|rejectNull| PgSelect130
    Access193 --> PgSelect130
    PgSelect139[["PgSelect[139∈1] ➊<br />ᐸview_tableᐳ<br />ᐳViewTable"]]:::plan
    Object20 -->|rejectNull| PgSelect139
    Access193 --> PgSelect139
    PgSelect148[["PgSelect[148∈1] ➊<br />ᐸsimilar_table_1ᐳ<br />ᐳSimilarTable1"]]:::plan
    Object20 -->|rejectNull| PgSelect148
    Access193 --> PgSelect148
    PgSelect157[["PgSelect[157∈1] ➊<br />ᐸsimilar_table_2ᐳ<br />ᐳSimilarTable2"]]:::plan
    Object20 -->|rejectNull| PgSelect157
    Access193 --> PgSelect157
    PgSelect166[["PgSelect[166∈1] ➊<br />ᐸnull_test_recordᐳ<br />ᐳNullTestRecord"]]:::plan
    Object20 -->|rejectNull| PgSelect166
    Access193 --> PgSelect166
    PgSelect175[["PgSelect[175∈1] ➊<br />ᐸissue756ᐳ<br />ᐳIssue756"]]:::plan
    Object20 -->|rejectNull| PgSelect175
    Access193 --> PgSelect175
    PgSelect184[["PgSelect[184∈1] ➊<br />ᐸlistsᐳ<br />ᐳList"]]:::plan
    Object20 -->|rejectNull| PgSelect184
    Access193 --> PgSelect184
    __Value2 --> Access17
    __Value2 --> Access19
    First23{{"First[23∈1] ➊^"}}:::plan
    PgSelectRows24[["PgSelectRows[24∈1] ➊^"]]:::plan
    PgSelectRows24 --> First23
    PgSelect16 --> PgSelectRows24
    PgSelectSingle26{{"PgSelectSingle[26∈1] ➊^<br />ᐸinputsᐳ"}}:::plan
    First23 --> PgSelectSingle26
    First32{{"First[32∈1] ➊^"}}:::plan
    PgSelectRows33[["PgSelectRows[33∈1] ➊^"]]:::plan
    PgSelectRows33 --> First32
    PgSelect28 --> PgSelectRows33
    PgSelectSingle35{{"PgSelectSingle[35∈1] ➊^<br />ᐸpatchsᐳ"}}:::plan
    First32 --> PgSelectSingle35
    First41{{"First[41∈1] ➊^"}}:::plan
    PgSelectRows42[["PgSelectRows[42∈1] ➊^"]]:::plan
    PgSelectRows42 --> First41
    PgSelect37 --> PgSelectRows42
    PgSelectSingle44{{"PgSelectSingle[44∈1] ➊^<br />ᐸreservedᐳ"}}:::plan
    First41 --> PgSelectSingle44
    First50{{"First[50∈1] ➊^"}}:::plan
    PgSelectRows51[["PgSelectRows[51∈1] ➊^"]]:::plan
    PgSelectRows51 --> First50
    PgSelect46 --> PgSelectRows51
    PgSelectSingle53{{"PgSelectSingle[53∈1] ➊^<br />ᐸreservedPatchsᐳ"}}:::plan
    First50 --> PgSelectSingle53
    First59{{"First[59∈1] ➊^"}}:::plan
    PgSelectRows60[["PgSelectRows[60∈1] ➊^"]]:::plan
    PgSelectRows60 --> First59
    PgSelect55 --> PgSelectRows60
    PgSelectSingle62{{"PgSelectSingle[62∈1] ➊^<br />ᐸreserved_inputᐳ"}}:::plan
    First59 --> PgSelectSingle62
    First68{{"First[68∈1] ➊^"}}:::plan
    PgSelectRows69[["PgSelectRows[69∈1] ➊^"]]:::plan
    PgSelectRows69 --> First68
    PgSelect64 --> PgSelectRows69
    PgSelectSingle71{{"PgSelectSingle[71∈1] ➊^<br />ᐸdefault_valueᐳ"}}:::plan
    First68 --> PgSelectSingle71
    First80{{"First[80∈1] ➊^"}}:::plan
    PgSelectRows81[["PgSelectRows[81∈1] ➊^"]]:::plan
    PgSelectRows81 --> First80
    PgSelect75 --> PgSelectRows81
    PgSelectSingle83{{"PgSelectSingle[83∈1] ➊^<br />ᐸcompound_keyᐳ"}}:::plan
    First80 --> PgSelectSingle83
    First89{{"First[89∈1] ➊^"}}:::plan
    PgSelectRows90[["PgSelectRows[90∈1] ➊^"]]:::plan
    PgSelectRows90 --> First89
    PgSelect85 --> PgSelectRows90
    PgSelectSingle92{{"PgSelectSingle[92∈1] ➊^<br />ᐸpersonᐳ"}}:::plan
    First89 --> PgSelectSingle92
    First98{{"First[98∈1] ➊^"}}:::plan
    PgSelectRows99[["PgSelectRows[99∈1] ➊^"]]:::plan
    PgSelectRows99 --> First98
    PgSelect94 --> PgSelectRows99
    PgSelectSingle101{{"PgSelectSingle[101∈1] ➊^<br />ᐸpostᐳ"}}:::plan
    First98 --> PgSelectSingle101
    First107{{"First[107∈1] ➊^"}}:::plan
    PgSelectRows108[["PgSelectRows[108∈1] ➊^"]]:::plan
    PgSelectRows108 --> First107
    PgSelect103 --> PgSelectRows108
    PgSelectSingle110{{"PgSelectSingle[110∈1] ➊^<br />ᐸtypesᐳ"}}:::plan
    First107 --> PgSelectSingle110
    First116{{"First[116∈1] ➊^"}}:::plan
    PgSelectRows117[["PgSelectRows[117∈1] ➊^"]]:::plan
    PgSelectRows117 --> First116
    PgSelect112 --> PgSelectRows117
    PgSelectSingle119{{"PgSelectSingle[119∈1] ➊^<br />ᐸperson_secretᐳ"}}:::plan
    First116 --> PgSelectSingle119
    First125{{"First[125∈1] ➊^"}}:::plan
    PgSelectRows126[["PgSelectRows[126∈1] ➊^"]]:::plan
    PgSelectRows126 --> First125
    PgSelect121 --> PgSelectRows126
    PgSelectSingle128{{"PgSelectSingle[128∈1] ➊^<br />ᐸleft_armᐳ"}}:::plan
    First125 --> PgSelectSingle128
    First134{{"First[134∈1] ➊^"}}:::plan
    PgSelectRows135[["PgSelectRows[135∈1] ➊^"]]:::plan
    PgSelectRows135 --> First134
    PgSelect130 --> PgSelectRows135
    PgSelectSingle137{{"PgSelectSingle[137∈1] ➊^<br />ᐸmy_tableᐳ"}}:::plan
    First134 --> PgSelectSingle137
    First143{{"First[143∈1] ➊^"}}:::plan
    PgSelectRows144[["PgSelectRows[144∈1] ➊^"]]:::plan
    PgSelectRows144 --> First143
    PgSelect139 --> PgSelectRows144
    PgSelectSingle146{{"PgSelectSingle[146∈1] ➊^<br />ᐸview_tableᐳ"}}:::plan
    First143 --> PgSelectSingle146
    First152{{"First[152∈1] ➊^"}}:::plan
    PgSelectRows153[["PgSelectRows[153∈1] ➊^"]]:::plan
    PgSelectRows153 --> First152
    PgSelect148 --> PgSelectRows153
    PgSelectSingle155{{"PgSelectSingle[155∈1] ➊^<br />ᐸsimilar_table_1ᐳ"}}:::plan
    First152 --> PgSelectSingle155
    First161{{"First[161∈1] ➊^"}}:::plan
    PgSelectRows162[["PgSelectRows[162∈1] ➊^"]]:::plan
    PgSelectRows162 --> First161
    PgSelect157 --> PgSelectRows162
    PgSelectSingle164{{"PgSelectSingle[164∈1] ➊^<br />ᐸsimilar_table_2ᐳ"}}:::plan
    First161 --> PgSelectSingle164
    First170{{"First[170∈1] ➊^"}}:::plan
    PgSelectRows171[["PgSelectRows[171∈1] ➊^"]]:::plan
    PgSelectRows171 --> First170
    PgSelect166 --> PgSelectRows171
    PgSelectSingle173{{"PgSelectSingle[173∈1] ➊^<br />ᐸnull_test_recordᐳ"}}:::plan
    First170 --> PgSelectSingle173
    First179{{"First[179∈1] ➊^"}}:::plan
    PgSelectRows180[["PgSelectRows[180∈1] ➊^"]]:::plan
    PgSelectRows180 --> First179
    PgSelect175 --> PgSelectRows180
    PgSelectSingle182{{"PgSelectSingle[182∈1] ➊^<br />ᐸissue756ᐳ"}}:::plan
    First179 --> PgSelectSingle182
    First188{{"First[188∈1] ➊^"}}:::plan
    PgSelectRows189[["PgSelectRows[189∈1] ➊^"]]:::plan
    PgSelectRows189 --> First188
    PgSelect184 --> PgSelectRows189
    PgSelectSingle191{{"PgSelectSingle[191∈1] ➊^<br />ᐸlistsᐳ"}}:::plan
    First188 --> PgSelectSingle191
    PgClassExpression192{{"PgClassExpression[192∈1] ➊^<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgSelectSingle110 --> PgClassExpression192
    Lambda8 --> Access193
    Lambda8 --> Access194

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Node7,Lambda8,Constant195 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect16,Access17,Access19,Object20,First23,PgSelectRows24,PgSelectSingle26,PgSelect28,First32,PgSelectRows33,PgSelectSingle35,PgSelect37,First41,PgSelectRows42,PgSelectSingle44,PgSelect46,First50,PgSelectRows51,PgSelectSingle53,PgSelect55,First59,PgSelectRows60,PgSelectSingle62,PgSelect64,First68,PgSelectRows69,PgSelectSingle71,PgSelect75,First80,PgSelectRows81,PgSelectSingle83,PgSelect85,First89,PgSelectRows90,PgSelectSingle92,PgSelect94,First98,PgSelectRows99,PgSelectSingle101,PgSelect103,First107,PgSelectRows108,PgSelectSingle110,PgSelect112,First116,PgSelectRows117,PgSelectSingle119,PgSelect121,First125,PgSelectRows126,PgSelectSingle128,PgSelect130,First134,PgSelectRows135,PgSelectSingle137,PgSelect139,First143,PgSelectRows144,PgSelectSingle146,PgSelect148,First152,PgSelectRows153,PgSelectSingle155,PgSelect157,First161,PgSelectRows162,PgSelectSingle164,PgSelect166,First170,PgSelectRows171,PgSelectSingle173,PgSelect175,First179,PgSelectRows180,PgSelectSingle182,PgSelect184,First188,PgSelectRows189,PgSelectSingle191,PgClassExpression192,Access193,Access194 bucket1

