%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/v4/types-single-node"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (polymorphic)<br />__typename: Lambda[8]<br />Deps: 2, 7, 8, 4<br /><br />1: 17, 19, 339, 340<br />ᐳ: Object[21]<br />2: 16, 33, 50, 67, 84, 101, 121, 139, 156, 173, 190, 207, 224, 241, 258, 275, 292, 309, 326<br />3: 25, 42, 59, 76, 93, 110, 131, 148, 165, 182, 199, 216, 233, 250, 267, 284, 301, 318, 335<br />ᐳ: 24, 27, 41, 44, 58, 61, 75, 78, 92, 95, 109, 112, 130, 133, 147, 150, 164, 167, 181, 184, 198, 201, 215, 218, 232, 235, 249, 252, 266, 269, 283, 286, 300, 303, 317, 320, 334, 337, 338"):::bucket
    end
    Bucket0 --> Bucket1

    %% plan dependencies
    Lambda7{{"Lambda[7∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Constant341{{"Constant[341∈0] ➊<br />ᐸ'WyJ0eXBlcyIsMTFd'ᐳ"}}:::plan
    Constant341 --> Lambda7
    Lambda8{{"Lambda[8∈0] ➊<br />ᐸfindTypeNameMatchᐳ"}}:::plan
    Lambda7 --> Lambda8
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgSelect121[["PgSelect[121∈1] ➊<br />ᐸcompound_keyᐳ<br />ᐳCompoundKey"]]:::plan
    Object21{{"Object[21∈1] ➊^<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access339{{"Access[339∈1] ➊<br />ᐸ7.base64JSON.1ᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access340{{"Access[340∈1] ➊<br />ᐸ7.base64JSON.2ᐳ<br />ᐳCompoundKey"}}:::plan
    Access339 -->|rejectNull| PgSelect121
    Access340 -->|rejectNull| PgSelect121
    Object21 --> PgSelect121
    PgSelect16[["PgSelect[16∈1] ➊<br />ᐸinputsᐳ<br />ᐳInput"]]:::plan
    Access339 -->|rejectNull| PgSelect16
    Object21 --> PgSelect16
    Access17{{"Access[17∈1] ➊<br />ᐸ2.pgSettingsᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access19{{"Access[19∈1] ➊<br />ᐸ2.withPgClientᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access17 & Access19 --> Object21
    PgSelect33[["PgSelect[33∈1] ➊<br />ᐸpatchsᐳ<br />ᐳPatch"]]:::plan
    Access339 -->|rejectNull| PgSelect33
    Object21 --> PgSelect33
    PgSelect50[["PgSelect[50∈1] ➊<br />ᐸreservedᐳ<br />ᐳReserved"]]:::plan
    Access339 -->|rejectNull| PgSelect50
    Object21 --> PgSelect50
    PgSelect67[["PgSelect[67∈1] ➊<br />ᐸreservedPatchsᐳ<br />ᐳReservedPatchRecord"]]:::plan
    Access339 -->|rejectNull| PgSelect67
    Object21 --> PgSelect67
    PgSelect84[["PgSelect[84∈1] ➊<br />ᐸreserved_inputᐳ<br />ᐳReservedInputRecord"]]:::plan
    Access339 -->|rejectNull| PgSelect84
    Object21 --> PgSelect84
    PgSelect101[["PgSelect[101∈1] ➊<br />ᐸdefault_valueᐳ<br />ᐳDefaultValue"]]:::plan
    Access339 -->|rejectNull| PgSelect101
    Object21 --> PgSelect101
    PgSelect139[["PgSelect[139∈1] ➊<br />ᐸpersonᐳ<br />ᐳPerson"]]:::plan
    Access339 -->|rejectNull| PgSelect139
    Object21 --> PgSelect139
    PgSelect156[["PgSelect[156∈1] ➊<br />ᐸpostᐳ<br />ᐳPost"]]:::plan
    Access339 -->|rejectNull| PgSelect156
    Object21 --> PgSelect156
    PgSelect173[["PgSelect[173∈1] ➊<br />ᐸtypesᐳ<br />ᐳType"]]:::plan
    Access339 -->|rejectNull| PgSelect173
    Object21 --> PgSelect173
    PgSelect190[["PgSelect[190∈1] ➊<br />ᐸperson_secretᐳ<br />ᐳPersonSecret"]]:::plan
    Access339 -->|rejectNull| PgSelect190
    Object21 --> PgSelect190
    PgSelect207[["PgSelect[207∈1] ➊<br />ᐸleft_armᐳ<br />ᐳLeftArm"]]:::plan
    Access339 -->|rejectNull| PgSelect207
    Object21 --> PgSelect207
    PgSelect224[["PgSelect[224∈1] ➊<br />ᐸmy_tableᐳ<br />ᐳMyTable"]]:::plan
    Access339 -->|rejectNull| PgSelect224
    Object21 --> PgSelect224
    PgSelect241[["PgSelect[241∈1] ➊<br />ᐸview_tableᐳ<br />ᐳViewTable"]]:::plan
    Access339 -->|rejectNull| PgSelect241
    Object21 --> PgSelect241
    PgSelect258[["PgSelect[258∈1] ➊<br />ᐸsimilar_table_1ᐳ<br />ᐳSimilarTable1"]]:::plan
    Access339 -->|rejectNull| PgSelect258
    Object21 --> PgSelect258
    PgSelect275[["PgSelect[275∈1] ➊<br />ᐸsimilar_table_2ᐳ<br />ᐳSimilarTable2"]]:::plan
    Access339 -->|rejectNull| PgSelect275
    Object21 --> PgSelect275
    PgSelect292[["PgSelect[292∈1] ➊<br />ᐸnull_test_recordᐳ<br />ᐳNullTestRecord"]]:::plan
    Access339 -->|rejectNull| PgSelect292
    Object21 --> PgSelect292
    PgSelect309[["PgSelect[309∈1] ➊<br />ᐸissue756ᐳ<br />ᐳIssue756"]]:::plan
    Access339 -->|rejectNull| PgSelect309
    Object21 --> PgSelect309
    PgSelect326[["PgSelect[326∈1] ➊<br />ᐸlistsᐳ<br />ᐳList"]]:::plan
    Access339 -->|rejectNull| PgSelect326
    Object21 --> PgSelect326
    __Value2 --> Access17
    __Value2 --> Access19
    First24{{"First[24∈1] ➊^"}}:::plan
    PgSelectRows25[["PgSelectRows[25∈1] ➊^"]]:::plan
    PgSelectRows25 --> First24
    PgSelect16 --> PgSelectRows25
    PgSelectSingle27{{"PgSelectSingle[27∈1] ➊^<br />ᐸinputsᐳ"}}:::plan
    First24 --> PgSelectSingle27
    First41{{"First[41∈1] ➊^"}}:::plan
    PgSelectRows42[["PgSelectRows[42∈1] ➊^"]]:::plan
    PgSelectRows42 --> First41
    PgSelect33 --> PgSelectRows42
    PgSelectSingle44{{"PgSelectSingle[44∈1] ➊^<br />ᐸpatchsᐳ"}}:::plan
    First41 --> PgSelectSingle44
    First58{{"First[58∈1] ➊^"}}:::plan
    PgSelectRows59[["PgSelectRows[59∈1] ➊^"]]:::plan
    PgSelectRows59 --> First58
    PgSelect50 --> PgSelectRows59
    PgSelectSingle61{{"PgSelectSingle[61∈1] ➊^<br />ᐸreservedᐳ"}}:::plan
    First58 --> PgSelectSingle61
    First75{{"First[75∈1] ➊^"}}:::plan
    PgSelectRows76[["PgSelectRows[76∈1] ➊^"]]:::plan
    PgSelectRows76 --> First75
    PgSelect67 --> PgSelectRows76
    PgSelectSingle78{{"PgSelectSingle[78∈1] ➊^<br />ᐸreservedPatchsᐳ"}}:::plan
    First75 --> PgSelectSingle78
    First92{{"First[92∈1] ➊^"}}:::plan
    PgSelectRows93[["PgSelectRows[93∈1] ➊^"]]:::plan
    PgSelectRows93 --> First92
    PgSelect84 --> PgSelectRows93
    PgSelectSingle95{{"PgSelectSingle[95∈1] ➊^<br />ᐸreserved_inputᐳ"}}:::plan
    First92 --> PgSelectSingle95
    First109{{"First[109∈1] ➊^"}}:::plan
    PgSelectRows110[["PgSelectRows[110∈1] ➊^"]]:::plan
    PgSelectRows110 --> First109
    PgSelect101 --> PgSelectRows110
    PgSelectSingle112{{"PgSelectSingle[112∈1] ➊^<br />ᐸdefault_valueᐳ"}}:::plan
    First109 --> PgSelectSingle112
    First130{{"First[130∈1] ➊^"}}:::plan
    PgSelectRows131[["PgSelectRows[131∈1] ➊^"]]:::plan
    PgSelectRows131 --> First130
    PgSelect121 --> PgSelectRows131
    PgSelectSingle133{{"PgSelectSingle[133∈1] ➊^<br />ᐸcompound_keyᐳ"}}:::plan
    First130 --> PgSelectSingle133
    First147{{"First[147∈1] ➊^"}}:::plan
    PgSelectRows148[["PgSelectRows[148∈1] ➊^"]]:::plan
    PgSelectRows148 --> First147
    PgSelect139 --> PgSelectRows148
    PgSelectSingle150{{"PgSelectSingle[150∈1] ➊^<br />ᐸpersonᐳ"}}:::plan
    First147 --> PgSelectSingle150
    First164{{"First[164∈1] ➊^"}}:::plan
    PgSelectRows165[["PgSelectRows[165∈1] ➊^"]]:::plan
    PgSelectRows165 --> First164
    PgSelect156 --> PgSelectRows165
    PgSelectSingle167{{"PgSelectSingle[167∈1] ➊^<br />ᐸpostᐳ"}}:::plan
    First164 --> PgSelectSingle167
    First181{{"First[181∈1] ➊^"}}:::plan
    PgSelectRows182[["PgSelectRows[182∈1] ➊^"]]:::plan
    PgSelectRows182 --> First181
    PgSelect173 --> PgSelectRows182
    PgSelectSingle184{{"PgSelectSingle[184∈1] ➊^<br />ᐸtypesᐳ"}}:::plan
    First181 --> PgSelectSingle184
    First198{{"First[198∈1] ➊^"}}:::plan
    PgSelectRows199[["PgSelectRows[199∈1] ➊^"]]:::plan
    PgSelectRows199 --> First198
    PgSelect190 --> PgSelectRows199
    PgSelectSingle201{{"PgSelectSingle[201∈1] ➊^<br />ᐸperson_secretᐳ"}}:::plan
    First198 --> PgSelectSingle201
    First215{{"First[215∈1] ➊^"}}:::plan
    PgSelectRows216[["PgSelectRows[216∈1] ➊^"]]:::plan
    PgSelectRows216 --> First215
    PgSelect207 --> PgSelectRows216
    PgSelectSingle218{{"PgSelectSingle[218∈1] ➊^<br />ᐸleft_armᐳ"}}:::plan
    First215 --> PgSelectSingle218
    First232{{"First[232∈1] ➊^"}}:::plan
    PgSelectRows233[["PgSelectRows[233∈1] ➊^"]]:::plan
    PgSelectRows233 --> First232
    PgSelect224 --> PgSelectRows233
    PgSelectSingle235{{"PgSelectSingle[235∈1] ➊^<br />ᐸmy_tableᐳ"}}:::plan
    First232 --> PgSelectSingle235
    First249{{"First[249∈1] ➊^"}}:::plan
    PgSelectRows250[["PgSelectRows[250∈1] ➊^"]]:::plan
    PgSelectRows250 --> First249
    PgSelect241 --> PgSelectRows250
    PgSelectSingle252{{"PgSelectSingle[252∈1] ➊^<br />ᐸview_tableᐳ"}}:::plan
    First249 --> PgSelectSingle252
    First266{{"First[266∈1] ➊^"}}:::plan
    PgSelectRows267[["PgSelectRows[267∈1] ➊^"]]:::plan
    PgSelectRows267 --> First266
    PgSelect258 --> PgSelectRows267
    PgSelectSingle269{{"PgSelectSingle[269∈1] ➊^<br />ᐸsimilar_table_1ᐳ"}}:::plan
    First266 --> PgSelectSingle269
    First283{{"First[283∈1] ➊^"}}:::plan
    PgSelectRows284[["PgSelectRows[284∈1] ➊^"]]:::plan
    PgSelectRows284 --> First283
    PgSelect275 --> PgSelectRows284
    PgSelectSingle286{{"PgSelectSingle[286∈1] ➊^<br />ᐸsimilar_table_2ᐳ"}}:::plan
    First283 --> PgSelectSingle286
    First300{{"First[300∈1] ➊^"}}:::plan
    PgSelectRows301[["PgSelectRows[301∈1] ➊^"]]:::plan
    PgSelectRows301 --> First300
    PgSelect292 --> PgSelectRows301
    PgSelectSingle303{{"PgSelectSingle[303∈1] ➊^<br />ᐸnull_test_recordᐳ"}}:::plan
    First300 --> PgSelectSingle303
    First317{{"First[317∈1] ➊^"}}:::plan
    PgSelectRows318[["PgSelectRows[318∈1] ➊^"]]:::plan
    PgSelectRows318 --> First317
    PgSelect309 --> PgSelectRows318
    PgSelectSingle320{{"PgSelectSingle[320∈1] ➊^<br />ᐸissue756ᐳ"}}:::plan
    First317 --> PgSelectSingle320
    First334{{"First[334∈1] ➊^"}}:::plan
    PgSelectRows335[["PgSelectRows[335∈1] ➊^"]]:::plan
    PgSelectRows335 --> First334
    PgSelect326 --> PgSelectRows335
    PgSelectSingle337{{"PgSelectSingle[337∈1] ➊^<br />ᐸlistsᐳ"}}:::plan
    First334 --> PgSelectSingle337
    PgClassExpression338{{"PgClassExpression[338∈1] ➊^<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgSelectSingle184 --> PgClassExpression338
    Lambda7 --> Access339
    Lambda7 --> Access340

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Lambda7,Lambda8,Constant341 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect16,Access17,Access19,Object21,First24,PgSelectRows25,PgSelectSingle27,PgSelect33,First41,PgSelectRows42,PgSelectSingle44,PgSelect50,First58,PgSelectRows59,PgSelectSingle61,PgSelect67,First75,PgSelectRows76,PgSelectSingle78,PgSelect84,First92,PgSelectRows93,PgSelectSingle95,PgSelect101,First109,PgSelectRows110,PgSelectSingle112,PgSelect121,First130,PgSelectRows131,PgSelectSingle133,PgSelect139,First147,PgSelectRows148,PgSelectSingle150,PgSelect156,First164,PgSelectRows165,PgSelectSingle167,PgSelect173,First181,PgSelectRows182,PgSelectSingle184,PgSelect190,First198,PgSelectRows199,PgSelectSingle201,PgSelect207,First215,PgSelectRows216,PgSelectSingle218,PgSelect224,First232,PgSelectRows233,PgSelectSingle235,PgSelect241,First249,PgSelectRows250,PgSelectSingle252,PgSelect258,First266,PgSelectRows267,PgSelectSingle269,PgSelect275,First283,PgSelectRows284,PgSelectSingle286,PgSelect292,First300,PgSelectRows301,PgSelectSingle303,PgSelect309,First317,PgSelectRows318,PgSelectSingle320,PgSelect326,First334,PgSelectRows335,PgSelectSingle337,PgClassExpression338,Access339,Access340 bucket1

