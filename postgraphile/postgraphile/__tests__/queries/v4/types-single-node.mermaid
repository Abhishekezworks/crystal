%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/v4/types-single-node"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (polymorphic)<br />Query,Input,Patch,Reserved,ReservedPatchRecord,ReservedInputRecord,DefaultValue,CompoundKey,Person,Post,Type,PersonSecret,LeftArm,MyTable,ViewTable,SimilarTable1,SimilarTable2,NullTestRecord,Issue756,List<br />Deps: 2, 8, 7, 4<br />ᐳQuery<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList<br /><br />1: <br />ᐳ: 14, 15, 131, 132, 16<br />2: 13, 21, 27, 33, 39, 45, 53, 59, 65, 71, 77, 83, 89, 95, 101, 107, 113, 119, 125<br />3: 18, 24, 30, 36, 42, 48, 56, 62, 68, 74, 80, 86, 92, 98, 104, 110, 116, 122, 128<br />ᐳ: 17, 19, 23, 25, 29, 31, 35, 37, 41, 43, 47, 49, 55, 57, 61, 63, 67, 69, 73, 75, 79, 81, 85, 87, 91, 93, 97, 99, 103, 105, 109, 111, 115, 117, 121, 123, 127, 129, 130"):::bucket
    end
    Bucket0 --> Bucket1

    %% plan dependencies
    Node7{{"Node[7∈0] ➊"}}:::plan
    Lambda8{{"Lambda[8∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Lambda8 --> Node7
    Constant133{{"Constant[133∈0] ➊<br />ᐸ'WyJ0eXBlcyIsMTFd'ᐳ"}}:::plan
    Constant133 --> Lambda8
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgSelect53[["PgSelect[53∈1] ➊<br />ᐸcompound_keyᐳ<br />ᐳCompoundKey"]]:::plan
    Object16{{"Object[16∈1] ➊^<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access131{{"Access[131∈1] ➊<br />ᐸ8.base64JSON.1ᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access132{{"Access[132∈1] ➊<br />ᐸ8.base64JSON.2ᐳ<br />ᐳCompoundKey"}}:::plan
    Object16 -->|rejectNull| PgSelect53
    Access131 -->|rejectNull| PgSelect53
    Access132 --> PgSelect53
    PgSelect13[["PgSelect[13∈1] ➊<br />ᐸinputsᐳ<br />ᐳInput"]]:::plan
    Object16 -->|rejectNull| PgSelect13
    Access131 --> PgSelect13
    Access14{{"Access[14∈1] ➊<br />ᐸ2.pgSettingsᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access15{{"Access[15∈1] ➊<br />ᐸ2.withPgClientᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access14 & Access15 --> Object16
    PgSelect21[["PgSelect[21∈1] ➊<br />ᐸpatchsᐳ<br />ᐳPatch"]]:::plan
    Object16 -->|rejectNull| PgSelect21
    Access131 --> PgSelect21
    PgSelect27[["PgSelect[27∈1] ➊<br />ᐸreservedᐳ<br />ᐳReserved"]]:::plan
    Object16 -->|rejectNull| PgSelect27
    Access131 --> PgSelect27
    PgSelect33[["PgSelect[33∈1] ➊<br />ᐸreservedPatchsᐳ<br />ᐳReservedPatchRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect33
    Access131 --> PgSelect33
    PgSelect39[["PgSelect[39∈1] ➊<br />ᐸreserved_inputᐳ<br />ᐳReservedInputRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect39
    Access131 --> PgSelect39
    PgSelect45[["PgSelect[45∈1] ➊<br />ᐸdefault_valueᐳ<br />ᐳDefaultValue"]]:::plan
    Object16 -->|rejectNull| PgSelect45
    Access131 --> PgSelect45
    PgSelect59[["PgSelect[59∈1] ➊<br />ᐸpersonᐳ<br />ᐳPerson"]]:::plan
    Object16 -->|rejectNull| PgSelect59
    Access131 --> PgSelect59
    PgSelect65[["PgSelect[65∈1] ➊<br />ᐸpostᐳ<br />ᐳPost"]]:::plan
    Object16 -->|rejectNull| PgSelect65
    Access131 --> PgSelect65
    PgSelect71[["PgSelect[71∈1] ➊<br />ᐸtypesᐳ<br />ᐳType"]]:::plan
    Object16 -->|rejectNull| PgSelect71
    Access131 --> PgSelect71
    PgSelect77[["PgSelect[77∈1] ➊<br />ᐸperson_secretᐳ<br />ᐳPersonSecret"]]:::plan
    Object16 -->|rejectNull| PgSelect77
    Access131 --> PgSelect77
    PgSelect83[["PgSelect[83∈1] ➊<br />ᐸleft_armᐳ<br />ᐳLeftArm"]]:::plan
    Object16 -->|rejectNull| PgSelect83
    Access131 --> PgSelect83
    PgSelect89[["PgSelect[89∈1] ➊<br />ᐸmy_tableᐳ<br />ᐳMyTable"]]:::plan
    Object16 -->|rejectNull| PgSelect89
    Access131 --> PgSelect89
    PgSelect95[["PgSelect[95∈1] ➊<br />ᐸview_tableᐳ<br />ᐳViewTable"]]:::plan
    Object16 -->|rejectNull| PgSelect95
    Access131 --> PgSelect95
    PgSelect101[["PgSelect[101∈1] ➊<br />ᐸsimilar_table_1ᐳ<br />ᐳSimilarTable1"]]:::plan
    Object16 -->|rejectNull| PgSelect101
    Access131 --> PgSelect101
    PgSelect107[["PgSelect[107∈1] ➊<br />ᐸsimilar_table_2ᐳ<br />ᐳSimilarTable2"]]:::plan
    Object16 -->|rejectNull| PgSelect107
    Access131 --> PgSelect107
    PgSelect113[["PgSelect[113∈1] ➊<br />ᐸnull_test_recordᐳ<br />ᐳNullTestRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect113
    Access131 --> PgSelect113
    PgSelect119[["PgSelect[119∈1] ➊<br />ᐸissue756ᐳ<br />ᐳIssue756"]]:::plan
    Object16 -->|rejectNull| PgSelect119
    Access131 --> PgSelect119
    PgSelect125[["PgSelect[125∈1] ➊<br />ᐸlistsᐳ<br />ᐳList"]]:::plan
    Object16 -->|rejectNull| PgSelect125
    Access131 --> PgSelect125
    __Value2 --> Access14
    __Value2 --> Access15
    First17{{"First[17∈1] ➊^"}}:::plan
    PgSelectRows18[["PgSelectRows[18∈1] ➊^"]]:::plan
    PgSelectRows18 --> First17
    PgSelect13 --> PgSelectRows18
    PgSelectSingle19{{"PgSelectSingle[19∈1] ➊^<br />ᐸinputsᐳ"}}:::plan
    First17 --> PgSelectSingle19
    First23{{"First[23∈1] ➊^"}}:::plan
    PgSelectRows24[["PgSelectRows[24∈1] ➊^"]]:::plan
    PgSelectRows24 --> First23
    PgSelect21 --> PgSelectRows24
    PgSelectSingle25{{"PgSelectSingle[25∈1] ➊^<br />ᐸpatchsᐳ"}}:::plan
    First23 --> PgSelectSingle25
    First29{{"First[29∈1] ➊^"}}:::plan
    PgSelectRows30[["PgSelectRows[30∈1] ➊^"]]:::plan
    PgSelectRows30 --> First29
    PgSelect27 --> PgSelectRows30
    PgSelectSingle31{{"PgSelectSingle[31∈1] ➊^<br />ᐸreservedᐳ"}}:::plan
    First29 --> PgSelectSingle31
    First35{{"First[35∈1] ➊^"}}:::plan
    PgSelectRows36[["PgSelectRows[36∈1] ➊^"]]:::plan
    PgSelectRows36 --> First35
    PgSelect33 --> PgSelectRows36
    PgSelectSingle37{{"PgSelectSingle[37∈1] ➊^<br />ᐸreservedPatchsᐳ"}}:::plan
    First35 --> PgSelectSingle37
    First41{{"First[41∈1] ➊^"}}:::plan
    PgSelectRows42[["PgSelectRows[42∈1] ➊^"]]:::plan
    PgSelectRows42 --> First41
    PgSelect39 --> PgSelectRows42
    PgSelectSingle43{{"PgSelectSingle[43∈1] ➊^<br />ᐸreserved_inputᐳ"}}:::plan
    First41 --> PgSelectSingle43
    First47{{"First[47∈1] ➊^"}}:::plan
    PgSelectRows48[["PgSelectRows[48∈1] ➊^"]]:::plan
    PgSelectRows48 --> First47
    PgSelect45 --> PgSelectRows48
    PgSelectSingle49{{"PgSelectSingle[49∈1] ➊^<br />ᐸdefault_valueᐳ"}}:::plan
    First47 --> PgSelectSingle49
    First55{{"First[55∈1] ➊^"}}:::plan
    PgSelectRows56[["PgSelectRows[56∈1] ➊^"]]:::plan
    PgSelectRows56 --> First55
    PgSelect53 --> PgSelectRows56
    PgSelectSingle57{{"PgSelectSingle[57∈1] ➊^<br />ᐸcompound_keyᐳ"}}:::plan
    First55 --> PgSelectSingle57
    First61{{"First[61∈1] ➊^"}}:::plan
    PgSelectRows62[["PgSelectRows[62∈1] ➊^"]]:::plan
    PgSelectRows62 --> First61
    PgSelect59 --> PgSelectRows62
    PgSelectSingle63{{"PgSelectSingle[63∈1] ➊^<br />ᐸpersonᐳ"}}:::plan
    First61 --> PgSelectSingle63
    First67{{"First[67∈1] ➊^"}}:::plan
    PgSelectRows68[["PgSelectRows[68∈1] ➊^"]]:::plan
    PgSelectRows68 --> First67
    PgSelect65 --> PgSelectRows68
    PgSelectSingle69{{"PgSelectSingle[69∈1] ➊^<br />ᐸpostᐳ"}}:::plan
    First67 --> PgSelectSingle69
    First73{{"First[73∈1] ➊^"}}:::plan
    PgSelectRows74[["PgSelectRows[74∈1] ➊^"]]:::plan
    PgSelectRows74 --> First73
    PgSelect71 --> PgSelectRows74
    PgSelectSingle75{{"PgSelectSingle[75∈1] ➊^<br />ᐸtypesᐳ"}}:::plan
    First73 --> PgSelectSingle75
    First79{{"First[79∈1] ➊^"}}:::plan
    PgSelectRows80[["PgSelectRows[80∈1] ➊^"]]:::plan
    PgSelectRows80 --> First79
    PgSelect77 --> PgSelectRows80
    PgSelectSingle81{{"PgSelectSingle[81∈1] ➊^<br />ᐸperson_secretᐳ"}}:::plan
    First79 --> PgSelectSingle81
    First85{{"First[85∈1] ➊^"}}:::plan
    PgSelectRows86[["PgSelectRows[86∈1] ➊^"]]:::plan
    PgSelectRows86 --> First85
    PgSelect83 --> PgSelectRows86
    PgSelectSingle87{{"PgSelectSingle[87∈1] ➊^<br />ᐸleft_armᐳ"}}:::plan
    First85 --> PgSelectSingle87
    First91{{"First[91∈1] ➊^"}}:::plan
    PgSelectRows92[["PgSelectRows[92∈1] ➊^"]]:::plan
    PgSelectRows92 --> First91
    PgSelect89 --> PgSelectRows92
    PgSelectSingle93{{"PgSelectSingle[93∈1] ➊^<br />ᐸmy_tableᐳ"}}:::plan
    First91 --> PgSelectSingle93
    First97{{"First[97∈1] ➊^"}}:::plan
    PgSelectRows98[["PgSelectRows[98∈1] ➊^"]]:::plan
    PgSelectRows98 --> First97
    PgSelect95 --> PgSelectRows98
    PgSelectSingle99{{"PgSelectSingle[99∈1] ➊^<br />ᐸview_tableᐳ"}}:::plan
    First97 --> PgSelectSingle99
    First103{{"First[103∈1] ➊^"}}:::plan
    PgSelectRows104[["PgSelectRows[104∈1] ➊^"]]:::plan
    PgSelectRows104 --> First103
    PgSelect101 --> PgSelectRows104
    PgSelectSingle105{{"PgSelectSingle[105∈1] ➊^<br />ᐸsimilar_table_1ᐳ"}}:::plan
    First103 --> PgSelectSingle105
    First109{{"First[109∈1] ➊^"}}:::plan
    PgSelectRows110[["PgSelectRows[110∈1] ➊^"]]:::plan
    PgSelectRows110 --> First109
    PgSelect107 --> PgSelectRows110
    PgSelectSingle111{{"PgSelectSingle[111∈1] ➊^<br />ᐸsimilar_table_2ᐳ"}}:::plan
    First109 --> PgSelectSingle111
    First115{{"First[115∈1] ➊^"}}:::plan
    PgSelectRows116[["PgSelectRows[116∈1] ➊^"]]:::plan
    PgSelectRows116 --> First115
    PgSelect113 --> PgSelectRows116
    PgSelectSingle117{{"PgSelectSingle[117∈1] ➊^<br />ᐸnull_test_recordᐳ"}}:::plan
    First115 --> PgSelectSingle117
    First121{{"First[121∈1] ➊^"}}:::plan
    PgSelectRows122[["PgSelectRows[122∈1] ➊^"]]:::plan
    PgSelectRows122 --> First121
    PgSelect119 --> PgSelectRows122
    PgSelectSingle123{{"PgSelectSingle[123∈1] ➊^<br />ᐸissue756ᐳ"}}:::plan
    First121 --> PgSelectSingle123
    First127{{"First[127∈1] ➊^"}}:::plan
    PgSelectRows128[["PgSelectRows[128∈1] ➊^"]]:::plan
    PgSelectRows128 --> First127
    PgSelect125 --> PgSelectRows128
    PgSelectSingle129{{"PgSelectSingle[129∈1] ➊^<br />ᐸlistsᐳ"}}:::plan
    First127 --> PgSelectSingle129
    PgClassExpression130{{"PgClassExpression[130∈1] ➊^<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgSelectSingle75 --> PgClassExpression130
    Lambda8 --> Access131
    Lambda8 --> Access132

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Node7,Lambda8,Constant133 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect13,Access14,Access15,Object16,First17,PgSelectRows18,PgSelectSingle19,PgSelect21,First23,PgSelectRows24,PgSelectSingle25,PgSelect27,First29,PgSelectRows30,PgSelectSingle31,PgSelect33,First35,PgSelectRows36,PgSelectSingle37,PgSelect39,First41,PgSelectRows42,PgSelectSingle43,PgSelect45,First47,PgSelectRows48,PgSelectSingle49,PgSelect53,First55,PgSelectRows56,PgSelectSingle57,PgSelect59,First61,PgSelectRows62,PgSelectSingle63,PgSelect65,First67,PgSelectRows68,PgSelectSingle69,PgSelect71,First73,PgSelectRows74,PgSelectSingle75,PgSelect77,First79,PgSelectRows80,PgSelectSingle81,PgSelect83,First85,PgSelectRows86,PgSelectSingle87,PgSelect89,First91,PgSelectRows92,PgSelectSingle93,PgSelect95,First97,PgSelectRows98,PgSelectSingle99,PgSelect101,First103,PgSelectRows104,PgSelectSingle105,PgSelect107,First109,PgSelectRows110,PgSelectSingle111,PgSelect113,First115,PgSelectRows116,PgSelectSingle117,PgSelect119,First121,PgSelectRows122,PgSelectSingle123,PgSelect125,First127,PgSelectRows128,PgSelectSingle129,PgClassExpression130,Access131,Access132 bucket1

