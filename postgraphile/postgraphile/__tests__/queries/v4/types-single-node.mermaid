%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/v4/types-single-node"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (polymorphic)<br />Query,Input,Patch,Reserved,ReservedPatchRecord,ReservedInputRecord,DefaultValue,CompoundKey,Person,Post,Type,PersonSecret,LeftArm,MyTable,ViewTable,SimilarTable1,SimilarTable2,NullTestRecord,Issue756,List<br />Deps: 2, 8, 7, 4<br />ᐳQuery<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList<br /><br />1: 17, 19, 195, 196<br />ᐳ: Object[21]<br />2: 16, 29, 38, 47, 56, 65, 77, 87, 96, 105, 114, 123, 132, 141, 150, 159, 168, 177, 186<br />3: 25, 34, 43, 52, 61, 70, 83, 92, 101, 110, 119, 128, 137, 146, 155, 164, 173, 182, 191<br />ᐳ: 24, 27, 33, 36, 42, 45, 51, 54, 60, 63, 69, 72, 82, 85, 91, 94, 100, 103, 109, 112, 118, 121, 127, 130, 136, 139, 145, 148, 154, 157, 163, 166, 172, 175, 181, 184, 190, 193, 194"):::bucket
    end
    Bucket0 --> Bucket1

    %% plan dependencies
    Node7{{"Node[7∈0] ➊"}}:::plan
    Lambda8{{"Lambda[8∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Lambda8 --> Node7
    Constant197{{"Constant[197∈0] ➊<br />ᐸ'WyJ0eXBlcyIsMTFd'ᐳ"}}:::plan
    Constant197 --> Lambda8
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgSelect77[["PgSelect[77∈1] ➊<br />ᐸcompound_keyᐳ<br />ᐳCompoundKey"]]:::plan
    Object21{{"Object[21∈1] ➊^<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access195{{"Access[195∈1] ➊<br />ᐸ8.base64JSON.1ᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access196{{"Access[196∈1] ➊<br />ᐸ8.base64JSON.2ᐳ<br />ᐳCompoundKey"}}:::plan
    Object21 -->|rejectNull| PgSelect77
    Access195 -->|rejectNull| PgSelect77
    Access196 --> PgSelect77
    PgSelect16[["PgSelect[16∈1] ➊<br />ᐸinputsᐳ<br />ᐳInput"]]:::plan
    Object21 -->|rejectNull| PgSelect16
    Access195 --> PgSelect16
    Access17{{"Access[17∈1] ➊<br />ᐸ2.pgSettingsᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access19{{"Access[19∈1] ➊<br />ᐸ2.withPgClientᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access17 & Access19 --> Object21
    PgSelect29[["PgSelect[29∈1] ➊<br />ᐸpatchsᐳ<br />ᐳPatch"]]:::plan
    Object21 -->|rejectNull| PgSelect29
    Access195 --> PgSelect29
    PgSelect38[["PgSelect[38∈1] ➊<br />ᐸreservedᐳ<br />ᐳReserved"]]:::plan
    Object21 -->|rejectNull| PgSelect38
    Access195 --> PgSelect38
    PgSelect47[["PgSelect[47∈1] ➊<br />ᐸreservedPatchsᐳ<br />ᐳReservedPatchRecord"]]:::plan
    Object21 -->|rejectNull| PgSelect47
    Access195 --> PgSelect47
    PgSelect56[["PgSelect[56∈1] ➊<br />ᐸreserved_inputᐳ<br />ᐳReservedInputRecord"]]:::plan
    Object21 -->|rejectNull| PgSelect56
    Access195 --> PgSelect56
    PgSelect65[["PgSelect[65∈1] ➊<br />ᐸdefault_valueᐳ<br />ᐳDefaultValue"]]:::plan
    Object21 -->|rejectNull| PgSelect65
    Access195 --> PgSelect65
    PgSelect87[["PgSelect[87∈1] ➊<br />ᐸpersonᐳ<br />ᐳPerson"]]:::plan
    Object21 -->|rejectNull| PgSelect87
    Access195 --> PgSelect87
    PgSelect96[["PgSelect[96∈1] ➊<br />ᐸpostᐳ<br />ᐳPost"]]:::plan
    Object21 -->|rejectNull| PgSelect96
    Access195 --> PgSelect96
    PgSelect105[["PgSelect[105∈1] ➊<br />ᐸtypesᐳ<br />ᐳType"]]:::plan
    Object21 -->|rejectNull| PgSelect105
    Access195 --> PgSelect105
    PgSelect114[["PgSelect[114∈1] ➊<br />ᐸperson_secretᐳ<br />ᐳPersonSecret"]]:::plan
    Object21 -->|rejectNull| PgSelect114
    Access195 --> PgSelect114
    PgSelect123[["PgSelect[123∈1] ➊<br />ᐸleft_armᐳ<br />ᐳLeftArm"]]:::plan
    Object21 -->|rejectNull| PgSelect123
    Access195 --> PgSelect123
    PgSelect132[["PgSelect[132∈1] ➊<br />ᐸmy_tableᐳ<br />ᐳMyTable"]]:::plan
    Object21 -->|rejectNull| PgSelect132
    Access195 --> PgSelect132
    PgSelect141[["PgSelect[141∈1] ➊<br />ᐸview_tableᐳ<br />ᐳViewTable"]]:::plan
    Object21 -->|rejectNull| PgSelect141
    Access195 --> PgSelect141
    PgSelect150[["PgSelect[150∈1] ➊<br />ᐸsimilar_table_1ᐳ<br />ᐳSimilarTable1"]]:::plan
    Object21 -->|rejectNull| PgSelect150
    Access195 --> PgSelect150
    PgSelect159[["PgSelect[159∈1] ➊<br />ᐸsimilar_table_2ᐳ<br />ᐳSimilarTable2"]]:::plan
    Object21 -->|rejectNull| PgSelect159
    Access195 --> PgSelect159
    PgSelect168[["PgSelect[168∈1] ➊<br />ᐸnull_test_recordᐳ<br />ᐳNullTestRecord"]]:::plan
    Object21 -->|rejectNull| PgSelect168
    Access195 --> PgSelect168
    PgSelect177[["PgSelect[177∈1] ➊<br />ᐸissue756ᐳ<br />ᐳIssue756"]]:::plan
    Object21 -->|rejectNull| PgSelect177
    Access195 --> PgSelect177
    PgSelect186[["PgSelect[186∈1] ➊<br />ᐸlistsᐳ<br />ᐳList"]]:::plan
    Object21 -->|rejectNull| PgSelect186
    Access195 --> PgSelect186
    __Value2 --> Access17
    __Value2 --> Access19
    First24{{"First[24∈1] ➊^"}}:::plan
    PgSelectRows25[["PgSelectRows[25∈1] ➊^"]]:::plan
    PgSelectRows25 --> First24
    PgSelect16 --> PgSelectRows25
    PgSelectSingle27{{"PgSelectSingle[27∈1] ➊^<br />ᐸinputsᐳ"}}:::plan
    First24 --> PgSelectSingle27
    First33{{"First[33∈1] ➊^"}}:::plan
    PgSelectRows34[["PgSelectRows[34∈1] ➊^"]]:::plan
    PgSelectRows34 --> First33
    PgSelect29 --> PgSelectRows34
    PgSelectSingle36{{"PgSelectSingle[36∈1] ➊^<br />ᐸpatchsᐳ"}}:::plan
    First33 --> PgSelectSingle36
    First42{{"First[42∈1] ➊^"}}:::plan
    PgSelectRows43[["PgSelectRows[43∈1] ➊^"]]:::plan
    PgSelectRows43 --> First42
    PgSelect38 --> PgSelectRows43
    PgSelectSingle45{{"PgSelectSingle[45∈1] ➊^<br />ᐸreservedᐳ"}}:::plan
    First42 --> PgSelectSingle45
    First51{{"First[51∈1] ➊^"}}:::plan
    PgSelectRows52[["PgSelectRows[52∈1] ➊^"]]:::plan
    PgSelectRows52 --> First51
    PgSelect47 --> PgSelectRows52
    PgSelectSingle54{{"PgSelectSingle[54∈1] ➊^<br />ᐸreservedPatchsᐳ"}}:::plan
    First51 --> PgSelectSingle54
    First60{{"First[60∈1] ➊^"}}:::plan
    PgSelectRows61[["PgSelectRows[61∈1] ➊^"]]:::plan
    PgSelectRows61 --> First60
    PgSelect56 --> PgSelectRows61
    PgSelectSingle63{{"PgSelectSingle[63∈1] ➊^<br />ᐸreserved_inputᐳ"}}:::plan
    First60 --> PgSelectSingle63
    First69{{"First[69∈1] ➊^"}}:::plan
    PgSelectRows70[["PgSelectRows[70∈1] ➊^"]]:::plan
    PgSelectRows70 --> First69
    PgSelect65 --> PgSelectRows70
    PgSelectSingle72{{"PgSelectSingle[72∈1] ➊^<br />ᐸdefault_valueᐳ"}}:::plan
    First69 --> PgSelectSingle72
    First82{{"First[82∈1] ➊^"}}:::plan
    PgSelectRows83[["PgSelectRows[83∈1] ➊^"]]:::plan
    PgSelectRows83 --> First82
    PgSelect77 --> PgSelectRows83
    PgSelectSingle85{{"PgSelectSingle[85∈1] ➊^<br />ᐸcompound_keyᐳ"}}:::plan
    First82 --> PgSelectSingle85
    First91{{"First[91∈1] ➊^"}}:::plan
    PgSelectRows92[["PgSelectRows[92∈1] ➊^"]]:::plan
    PgSelectRows92 --> First91
    PgSelect87 --> PgSelectRows92
    PgSelectSingle94{{"PgSelectSingle[94∈1] ➊^<br />ᐸpersonᐳ"}}:::plan
    First91 --> PgSelectSingle94
    First100{{"First[100∈1] ➊^"}}:::plan
    PgSelectRows101[["PgSelectRows[101∈1] ➊^"]]:::plan
    PgSelectRows101 --> First100
    PgSelect96 --> PgSelectRows101
    PgSelectSingle103{{"PgSelectSingle[103∈1] ➊^<br />ᐸpostᐳ"}}:::plan
    First100 --> PgSelectSingle103
    First109{{"First[109∈1] ➊^"}}:::plan
    PgSelectRows110[["PgSelectRows[110∈1] ➊^"]]:::plan
    PgSelectRows110 --> First109
    PgSelect105 --> PgSelectRows110
    PgSelectSingle112{{"PgSelectSingle[112∈1] ➊^<br />ᐸtypesᐳ"}}:::plan
    First109 --> PgSelectSingle112
    First118{{"First[118∈1] ➊^"}}:::plan
    PgSelectRows119[["PgSelectRows[119∈1] ➊^"]]:::plan
    PgSelectRows119 --> First118
    PgSelect114 --> PgSelectRows119
    PgSelectSingle121{{"PgSelectSingle[121∈1] ➊^<br />ᐸperson_secretᐳ"}}:::plan
    First118 --> PgSelectSingle121
    First127{{"First[127∈1] ➊^"}}:::plan
    PgSelectRows128[["PgSelectRows[128∈1] ➊^"]]:::plan
    PgSelectRows128 --> First127
    PgSelect123 --> PgSelectRows128
    PgSelectSingle130{{"PgSelectSingle[130∈1] ➊^<br />ᐸleft_armᐳ"}}:::plan
    First127 --> PgSelectSingle130
    First136{{"First[136∈1] ➊^"}}:::plan
    PgSelectRows137[["PgSelectRows[137∈1] ➊^"]]:::plan
    PgSelectRows137 --> First136
    PgSelect132 --> PgSelectRows137
    PgSelectSingle139{{"PgSelectSingle[139∈1] ➊^<br />ᐸmy_tableᐳ"}}:::plan
    First136 --> PgSelectSingle139
    First145{{"First[145∈1] ➊^"}}:::plan
    PgSelectRows146[["PgSelectRows[146∈1] ➊^"]]:::plan
    PgSelectRows146 --> First145
    PgSelect141 --> PgSelectRows146
    PgSelectSingle148{{"PgSelectSingle[148∈1] ➊^<br />ᐸview_tableᐳ"}}:::plan
    First145 --> PgSelectSingle148
    First154{{"First[154∈1] ➊^"}}:::plan
    PgSelectRows155[["PgSelectRows[155∈1] ➊^"]]:::plan
    PgSelectRows155 --> First154
    PgSelect150 --> PgSelectRows155
    PgSelectSingle157{{"PgSelectSingle[157∈1] ➊^<br />ᐸsimilar_table_1ᐳ"}}:::plan
    First154 --> PgSelectSingle157
    First163{{"First[163∈1] ➊^"}}:::plan
    PgSelectRows164[["PgSelectRows[164∈1] ➊^"]]:::plan
    PgSelectRows164 --> First163
    PgSelect159 --> PgSelectRows164
    PgSelectSingle166{{"PgSelectSingle[166∈1] ➊^<br />ᐸsimilar_table_2ᐳ"}}:::plan
    First163 --> PgSelectSingle166
    First172{{"First[172∈1] ➊^"}}:::plan
    PgSelectRows173[["PgSelectRows[173∈1] ➊^"]]:::plan
    PgSelectRows173 --> First172
    PgSelect168 --> PgSelectRows173
    PgSelectSingle175{{"PgSelectSingle[175∈1] ➊^<br />ᐸnull_test_recordᐳ"}}:::plan
    First172 --> PgSelectSingle175
    First181{{"First[181∈1] ➊^"}}:::plan
    PgSelectRows182[["PgSelectRows[182∈1] ➊^"]]:::plan
    PgSelectRows182 --> First181
    PgSelect177 --> PgSelectRows182
    PgSelectSingle184{{"PgSelectSingle[184∈1] ➊^<br />ᐸissue756ᐳ"}}:::plan
    First181 --> PgSelectSingle184
    First190{{"First[190∈1] ➊^"}}:::plan
    PgSelectRows191[["PgSelectRows[191∈1] ➊^"]]:::plan
    PgSelectRows191 --> First190
    PgSelect186 --> PgSelectRows191
    PgSelectSingle193{{"PgSelectSingle[193∈1] ➊^<br />ᐸlistsᐳ"}}:::plan
    First190 --> PgSelectSingle193
    PgClassExpression194{{"PgClassExpression[194∈1] ➊^<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgSelectSingle112 --> PgClassExpression194
    Lambda8 --> Access195
    Lambda8 --> Access196

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Node7,Lambda8,Constant197 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect16,Access17,Access19,Object21,First24,PgSelectRows25,PgSelectSingle27,PgSelect29,First33,PgSelectRows34,PgSelectSingle36,PgSelect38,First42,PgSelectRows43,PgSelectSingle45,PgSelect47,First51,PgSelectRows52,PgSelectSingle54,PgSelect56,First60,PgSelectRows61,PgSelectSingle63,PgSelect65,First69,PgSelectRows70,PgSelectSingle72,PgSelect77,First82,PgSelectRows83,PgSelectSingle85,PgSelect87,First91,PgSelectRows92,PgSelectSingle94,PgSelect96,First100,PgSelectRows101,PgSelectSingle103,PgSelect105,First109,PgSelectRows110,PgSelectSingle112,PgSelect114,First118,PgSelectRows119,PgSelectSingle121,PgSelect123,First127,PgSelectRows128,PgSelectSingle130,PgSelect132,First136,PgSelectRows137,PgSelectSingle139,PgSelect141,First145,PgSelectRows146,PgSelectSingle148,PgSelect150,First154,PgSelectRows155,PgSelectSingle157,PgSelect159,First163,PgSelectRows164,PgSelectSingle166,PgSelect168,First172,PgSelectRows173,PgSelectSingle175,PgSelect177,First181,PgSelectRows182,PgSelectSingle184,PgSelect186,First190,PgSelectRows191,PgSelectSingle193,PgClassExpression194,Access195,Access196 bucket1

