%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Node7{{"Node[7∈0] ➊"}}:::plan
    Lambda8{{"Lambda[8∈0] ➊<br />ᐸdecodeNodeIdWithCodecsᐳ"}}:::plan
    Lambda8 --> Node7
    Constant150{{"Constant[150∈0] ➊<br />ᐸ'WyJ0eXBlcyIsMTFd'ᐳ"}}:::plan
    Constant150 --> Lambda8
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgSelect59[["PgSelect[59∈1] ➊<br />ᐸcompound_keyᐳ<br />ᐳCompoundKey"]]:::plan
    Object16{{"Object[16∈1] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access148{{"Access[148∈1] ➊<br />ᐸ8.base64JSON.1ᐳ<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList"}}:::plan
    Access149{{"Access[149∈1] ➊<br />ᐸ8.base64JSON.2ᐳ<br />ᐳCompoundKey"}}:::plan
    Object16 -->|rejectNull| PgSelect59
    Access148 -->|rejectNull| PgSelect59
    Access149 --> PgSelect59
    PgSelect13[["PgSelect[13∈1] ➊<br />ᐸinputsᐳ<br />ᐳInput"]]:::plan
    Object16 -->|rejectNull| PgSelect13
    Access148 --> PgSelect13
    Access14{{"Access[14∈1] ➊<br />ᐸ2.pgSettingsᐳ<br />ᐳInput"}}:::plan
    Access15{{"Access[15∈1] ➊<br />ᐸ2.withPgClientᐳ<br />ᐳInput"}}:::plan
    Access14 & Access15 --> Object16
    PgSelect22[["PgSelect[22∈1] ➊<br />ᐸpatchsᐳ<br />ᐳPatch"]]:::plan
    Object16 -->|rejectNull| PgSelect22
    Access148 --> PgSelect22
    PgSelect29[["PgSelect[29∈1] ➊<br />ᐸreservedᐳ<br />ᐳReserved"]]:::plan
    Object16 -->|rejectNull| PgSelect29
    Access148 --> PgSelect29
    PgSelect36[["PgSelect[36∈1] ➊<br />ᐸreservedPatchsᐳ<br />ᐳReservedPatchRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect36
    Access148 --> PgSelect36
    PgSelect43[["PgSelect[43∈1] ➊<br />ᐸreserved_inputᐳ<br />ᐳReservedInputRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect43
    Access148 --> PgSelect43
    PgSelect50[["PgSelect[50∈1] ➊<br />ᐸdefault_valueᐳ<br />ᐳDefaultValue"]]:::plan
    Object16 -->|rejectNull| PgSelect50
    Access148 --> PgSelect50
    PgSelect66[["PgSelect[66∈1] ➊<br />ᐸpersonᐳ<br />ᐳPerson"]]:::plan
    Object16 -->|rejectNull| PgSelect66
    Access148 --> PgSelect66
    PgSelect73[["PgSelect[73∈1] ➊<br />ᐸpostᐳ<br />ᐳPost"]]:::plan
    Object16 -->|rejectNull| PgSelect73
    Access148 --> PgSelect73
    PgSelect80[["PgSelect[80∈1] ➊<br />ᐸtypesᐳ<br />ᐳType"]]:::plan
    Object16 -->|rejectNull| PgSelect80
    Access148 --> PgSelect80
    PgSelect88[["PgSelect[88∈1] ➊<br />ᐸperson_secretᐳ<br />ᐳPersonSecret"]]:::plan
    Object16 -->|rejectNull| PgSelect88
    Access148 --> PgSelect88
    PgSelect95[["PgSelect[95∈1] ➊<br />ᐸleft_armᐳ<br />ᐳLeftArm"]]:::plan
    Object16 -->|rejectNull| PgSelect95
    Access148 --> PgSelect95
    PgSelect102[["PgSelect[102∈1] ➊<br />ᐸmy_tableᐳ<br />ᐳMyTable"]]:::plan
    Object16 -->|rejectNull| PgSelect102
    Access148 --> PgSelect102
    PgSelect109[["PgSelect[109∈1] ➊<br />ᐸview_tableᐳ<br />ᐳViewTable"]]:::plan
    Object16 -->|rejectNull| PgSelect109
    Access148 --> PgSelect109
    PgSelect116[["PgSelect[116∈1] ➊<br />ᐸsimilar_table_1ᐳ<br />ᐳSimilarTable1"]]:::plan
    Object16 -->|rejectNull| PgSelect116
    Access148 --> PgSelect116
    PgSelect123[["PgSelect[123∈1] ➊<br />ᐸsimilar_table_2ᐳ<br />ᐳSimilarTable2"]]:::plan
    Object16 -->|rejectNull| PgSelect123
    Access148 --> PgSelect123
    PgSelect130[["PgSelect[130∈1] ➊<br />ᐸnull_test_recordᐳ<br />ᐳNullTestRecord"]]:::plan
    Object16 -->|rejectNull| PgSelect130
    Access148 --> PgSelect130
    PgSelect137[["PgSelect[137∈1] ➊<br />ᐸissue756ᐳ<br />ᐳIssue756"]]:::plan
    Object16 -->|rejectNull| PgSelect137
    Access148 --> PgSelect137
    PgSelect144[["PgSelect[144∈1] ➊<br />ᐸlistsᐳ<br />ᐳList"]]:::plan
    Object16 -->|rejectNull| PgSelect144
    Access148 --> PgSelect144
    __Value2 --> Access14
    __Value2 --> Access15
    First17{{"First[17∈1] ➊"}}:::plan
    PgSelect13 --> First17
    PgSelectSingle18{{"PgSelectSingle[18∈1] ➊<br />ᐸinputsᐳ"}}:::plan
    First17 --> PgSelectSingle18
    First24{{"First[24∈1] ➊"}}:::plan
    PgSelect22 --> First24
    PgSelectSingle25{{"PgSelectSingle[25∈1] ➊<br />ᐸpatchsᐳ"}}:::plan
    First24 --> PgSelectSingle25
    First31{{"First[31∈1] ➊"}}:::plan
    PgSelect29 --> First31
    PgSelectSingle32{{"PgSelectSingle[32∈1] ➊<br />ᐸreservedᐳ"}}:::plan
    First31 --> PgSelectSingle32
    First38{{"First[38∈1] ➊"}}:::plan
    PgSelect36 --> First38
    PgSelectSingle39{{"PgSelectSingle[39∈1] ➊<br />ᐸreservedPatchsᐳ"}}:::plan
    First38 --> PgSelectSingle39
    First45{{"First[45∈1] ➊"}}:::plan
    PgSelect43 --> First45
    PgSelectSingle46{{"PgSelectSingle[46∈1] ➊<br />ᐸreserved_inputᐳ"}}:::plan
    First45 --> PgSelectSingle46
    First52{{"First[52∈1] ➊"}}:::plan
    PgSelect50 --> First52
    PgSelectSingle53{{"PgSelectSingle[53∈1] ➊<br />ᐸdefault_valueᐳ"}}:::plan
    First52 --> PgSelectSingle53
    First61{{"First[61∈1] ➊"}}:::plan
    PgSelect59 --> First61
    PgSelectSingle62{{"PgSelectSingle[62∈1] ➊<br />ᐸcompound_keyᐳ"}}:::plan
    First61 --> PgSelectSingle62
    First68{{"First[68∈1] ➊"}}:::plan
    PgSelect66 --> First68
    PgSelectSingle69{{"PgSelectSingle[69∈1] ➊<br />ᐸpersonᐳ"}}:::plan
    First68 --> PgSelectSingle69
    First75{{"First[75∈1] ➊"}}:::plan
    PgSelect73 --> First75
    PgSelectSingle76{{"PgSelectSingle[76∈1] ➊<br />ᐸpostᐳ"}}:::plan
    First75 --> PgSelectSingle76
    First82{{"First[82∈1] ➊"}}:::plan
    PgSelect80 --> First82
    PgSelectSingle83{{"PgSelectSingle[83∈1] ➊<br />ᐸtypesᐳ"}}:::plan
    First82 --> PgSelectSingle83
    PgClassExpression84{{"PgClassExpression[84∈1] ➊<br />ᐸ__types__.”id”ᐳ"}}:::plan
    PgSelectSingle83 --> PgClassExpression84
    First90{{"First[90∈1] ➊"}}:::plan
    PgSelect88 --> First90
    PgSelectSingle91{{"PgSelectSingle[91∈1] ➊<br />ᐸperson_secretᐳ"}}:::plan
    First90 --> PgSelectSingle91
    First97{{"First[97∈1] ➊"}}:::plan
    PgSelect95 --> First97
    PgSelectSingle98{{"PgSelectSingle[98∈1] ➊<br />ᐸleft_armᐳ"}}:::plan
    First97 --> PgSelectSingle98
    First104{{"First[104∈1] ➊"}}:::plan
    PgSelect102 --> First104
    PgSelectSingle105{{"PgSelectSingle[105∈1] ➊<br />ᐸmy_tableᐳ"}}:::plan
    First104 --> PgSelectSingle105
    First111{{"First[111∈1] ➊"}}:::plan
    PgSelect109 --> First111
    PgSelectSingle112{{"PgSelectSingle[112∈1] ➊<br />ᐸview_tableᐳ"}}:::plan
    First111 --> PgSelectSingle112
    First118{{"First[118∈1] ➊"}}:::plan
    PgSelect116 --> First118
    PgSelectSingle119{{"PgSelectSingle[119∈1] ➊<br />ᐸsimilar_table_1ᐳ"}}:::plan
    First118 --> PgSelectSingle119
    First125{{"First[125∈1] ➊"}}:::plan
    PgSelect123 --> First125
    PgSelectSingle126{{"PgSelectSingle[126∈1] ➊<br />ᐸsimilar_table_2ᐳ"}}:::plan
    First125 --> PgSelectSingle126
    First132{{"First[132∈1] ➊"}}:::plan
    PgSelect130 --> First132
    PgSelectSingle133{{"PgSelectSingle[133∈1] ➊<br />ᐸnull_test_recordᐳ"}}:::plan
    First132 --> PgSelectSingle133
    First139{{"First[139∈1] ➊"}}:::plan
    PgSelect137 --> First139
    PgSelectSingle140{{"PgSelectSingle[140∈1] ➊<br />ᐸissue756ᐳ"}}:::plan
    First139 --> PgSelectSingle140
    First146{{"First[146∈1] ➊"}}:::plan
    PgSelect144 --> First146
    PgSelectSingle147{{"PgSelectSingle[147∈1] ➊<br />ᐸlistsᐳ"}}:::plan
    First146 --> PgSelectSingle147
    Lambda8 --> Access148
    Lambda8 --> Access149

    %% define steps

    subgraph "Buckets for queries/v4/types-single-node"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Node7,Lambda8,Constant150 bucket0
    Bucket1("Bucket 1 (polymorphic)<br />Query,Input,Patch,Reserved,ReservedPatchRecord,ReservedInputRecord,DefaultValue,CompoundKey,Person,Post,Type,PersonSecret,LeftArm,MyTable,ViewTable,SimilarTable1,SimilarTable2,NullTestRecord,Issue756,List<br />Deps: 2, 8, 7, 4<br />ᐳQuery<br />ᐳInput<br />ᐳPatch<br />ᐳReserved<br />ᐳReservedPatchRecord<br />ᐳReservedInputRecord<br />ᐳDefaultValue<br />ᐳCompoundKey<br />ᐳPerson<br />ᐳPost<br />ᐳType<br />ᐳPersonSecret<br />ᐳLeftArm<br />ᐳMyTable<br />ᐳViewTable<br />ᐳSimilarTable1<br />ᐳSimilarTable2<br />ᐳNullTestRecord<br />ᐳIssue756<br />ᐳList<br /><br />1: <br />ᐳ: 14, 15, 148, 149, 16<br />2: 13, 22, 29, 36, 43, 50, 59, 66, 73, 80, 88, 95, 102, 109, 116, 123, 130, 137, 144<br />ᐳ: 17, 18, 24, 25, 31, 32, 38, 39, 45, 46, 52, 53, 61, 62, 68, 69, 75, 76, 82, 83, 84, 90, 91, 97, 98, 104, 105, 111, 112, 118, 119, 125, 126, 132, 133, 139, 140, 146, 147"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect13,Access14,Access15,Object16,First17,PgSelectSingle18,PgSelect22,First24,PgSelectSingle25,PgSelect29,First31,PgSelectSingle32,PgSelect36,First38,PgSelectSingle39,PgSelect43,First45,PgSelectSingle46,PgSelect50,First52,PgSelectSingle53,PgSelect59,First61,PgSelectSingle62,PgSelect66,First68,PgSelectSingle69,PgSelect73,First75,PgSelectSingle76,PgSelect80,First82,PgSelectSingle83,PgClassExpression84,PgSelect88,First90,PgSelectSingle91,PgSelect95,First97,PgSelectSingle98,PgSelect102,First104,PgSelectSingle105,PgSelect109,First111,PgSelectSingle112,PgSelect116,First118,PgSelectSingle119,PgSelect123,First125,PgSelectSingle126,PgSelect130,First132,PgSelectSingle133,PgSelect137,First139,PgSelectSingle140,PgSelect144,First146,PgSelectSingle147,Access148,Access149 bucket1
    Bucket0 --> Bucket1
    end
