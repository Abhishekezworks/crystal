%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    Access37["Access[37∈1]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access38["Access[38∈1]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object39["Object[39∈1]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    Connection40["Connection[40∈0]<br />ᐸ36ᐳ"]:::plan
    PgSelect41[["PgSelect[41∈1]<br />ᐸtypesᐳ"]]:::plan
    __Item42>"__Item[42∈2]<br />ᐸ41ᐳ"]:::itemplan
    PgSelectSingle43["PgSelectSingle[43∈2]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression44["PgClassExpression[44∈3]<br />ᐸ__types__.”id”ᐳ"]:::plan
    PgClassExpression45["PgClassExpression[45∈3]<br />ᐸ__types__.”regrole”ᐳ"]:::plan
    PgClassExpression46["PgClassExpression[46∈3]<br />ᐸ__types__....namespace”ᐳ"]:::plan
    PgClassExpression47["PgClassExpression[47∈3]<br />ᐸ__types__....ay_domain”ᐳ"]:::plan
    __Item48>"__Item[48∈4]<br />ᐸ47ᐳ"]:::itemplan
    Map103["Map[103∈3]<br />ᐸ43:{”0”:4,”1”:5,”2”:6,”3”:7,”4”:8,”5”:9,”6”:10,”7”:11}ᐳ"]:::plan
    PgSelectSingle55["PgSelectSingle[55∈3]<br />ᐸfrmcdc_domainConstrainedCompoundType_1ᐳ"]:::plan
    PgClassExpression56["PgClassExpression[56∈5]<br />ᐸ__frmcdc_d...pe_1__.”a”ᐳ"]:::plan
    PgClassExpression57["PgClassExpression[57∈5]<br />ᐸ__frmcdc_d...pe_1__.”b”ᐳ"]:::plan
    PgClassExpression58["PgClassExpression[58∈5]<br />ᐸ__frmcdc_d...pe_1__.”c”ᐳ"]:::plan
    PgClassExpression59["PgClassExpression[59∈5]<br />ᐸ__frmcdc_d...pe_1__.”d”ᐳ"]:::plan
    PgClassExpression60["PgClassExpression[60∈5]<br />ᐸ__frmcdc_d...pe_1__.”e”ᐳ"]:::plan
    PgClassExpression61["PgClassExpression[61∈5]<br />ᐸ__frmcdc_d...pe_1__.”f”ᐳ"]:::plan
    PgClassExpression62["PgClassExpression[62∈5]<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"]:::plan
    PgClassExpression65["PgClassExpression[65∈6]<br />ᐸ__types__.”id”ᐳ"]:::plan
    PgClassExpression66["PgClassExpression[66∈6]<br />ᐸ__types__.”regrole”ᐳ"]:::plan
    PgClassExpression67["PgClassExpression[67∈6]<br />ᐸ__types__....namespace”ᐳ"]:::plan
    PgClassExpression68["PgClassExpression[68∈6]<br />ᐸ__types__....ay_domain”ᐳ"]:::plan
    __Item69>"__Item[69∈7]<br />ᐸ68ᐳ"]:::itemplan
    Map105["Map[105∈6]<br />ᐸ43:{”0”:12,”1”:13,”2”:14,”3”:15,”4”:16,”5”:17,”6”:18,”7”:19}ᐳ"]:::plan
    PgSelectSingle76["PgSelectSingle[76∈6]<br />ᐸfrmcdc_domainConstrainedCompoundType_1ᐳ"]:::plan
    PgClassExpression77["PgClassExpression[77∈8]<br />ᐸ__frmcdc_d...pe_1__.”a”ᐳ"]:::plan
    PgClassExpression78["PgClassExpression[78∈8]<br />ᐸ__frmcdc_d...pe_1__.”b”ᐳ"]:::plan
    PgClassExpression79["PgClassExpression[79∈8]<br />ᐸ__frmcdc_d...pe_1__.”c”ᐳ"]:::plan
    PgClassExpression80["PgClassExpression[80∈8]<br />ᐸ__frmcdc_d...pe_1__.”d”ᐳ"]:::plan
    PgClassExpression81["PgClassExpression[81∈8]<br />ᐸ__frmcdc_d...pe_1__.”e”ᐳ"]:::plan
    PgClassExpression82["PgClassExpression[82∈8]<br />ᐸ__frmcdc_d...pe_1__.”f”ᐳ"]:::plan
    PgClassExpression83["PgClassExpression[83∈8]<br />ᐸ__frmcdc_d....”foo_bar”ᐳ"]:::plan
    PgSelect84[["PgSelect[84∈1]<br />ᐸtypes(aggregate)ᐳ"]]:::plan
    First85["First[85∈1]"]:::plan
    PgSelectSingle86["PgSelectSingle[86∈1]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression87["PgClassExpression[87∈1]<br />ᐸcount(*)ᐳ"]:::plan
    PgPageInfo88["PgPageInfo[88∈1]"]:::plan
    Constant89["Constant[89∈1]"]:::plan
    Constant90["Constant[90∈1]"]:::plan
    First92["First[92∈1]"]:::plan
    PgSelectSingle93["PgSelectSingle[93∈1]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression95["PgClassExpression[95∈1]<br />ᐸ__types__.”id”ᐳ"]:::plan
    List96["List[96∈1]<br />ᐸ95ᐳ"]:::plan
    PgCursor94["PgCursor[94∈1]"]:::plan
    Last98["Last[98∈1]"]:::plan
    PgSelectSingle99["PgSelectSingle[99∈1]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression101["PgClassExpression[101∈1]<br />ᐸ__types__.”id”ᐳ"]:::plan
    List102["List[102∈1]<br />ᐸ101ᐳ"]:::plan
    PgCursor100["PgCursor[100∈1]"]:::plan

    %% plan dependencies
    __Value3 --> Access37
    __Value3 --> Access38
    Access37 & Access38 --> Object39
    Object39 & Connection40 --> PgSelect41
    PgSelect41 ==> __Item42
    __Item42 --> PgSelectSingle43
    PgSelectSingle43 --> PgClassExpression44
    PgSelectSingle43 --> PgClassExpression45
    PgSelectSingle43 --> PgClassExpression46
    PgSelectSingle43 --> PgClassExpression47
    PgClassExpression47 ==> __Item48
    PgSelectSingle43 --> Map103
    Map103 --> PgSelectSingle55
    PgSelectSingle55 --> PgClassExpression56
    PgSelectSingle55 --> PgClassExpression57
    PgSelectSingle55 --> PgClassExpression58
    PgSelectSingle55 --> PgClassExpression59
    PgSelectSingle55 --> PgClassExpression60
    PgSelectSingle55 --> PgClassExpression61
    PgSelectSingle55 --> PgClassExpression62
    PgSelectSingle43 --> PgClassExpression65
    PgSelectSingle43 --> PgClassExpression66
    PgSelectSingle43 --> PgClassExpression67
    PgSelectSingle43 --> PgClassExpression68
    PgClassExpression68 ==> __Item69
    PgSelectSingle43 --> Map105
    Map105 --> PgSelectSingle76
    PgSelectSingle76 --> PgClassExpression77
    PgSelectSingle76 --> PgClassExpression78
    PgSelectSingle76 --> PgClassExpression79
    PgSelectSingle76 --> PgClassExpression80
    PgSelectSingle76 --> PgClassExpression81
    PgSelectSingle76 --> PgClassExpression82
    PgSelectSingle76 --> PgClassExpression83
    Object39 & Connection40 --> PgSelect84
    PgSelect84 --> First85
    First85 --> PgSelectSingle86
    PgSelectSingle86 --> PgClassExpression87
    PgSelect41 --> First92
    First92 --> PgSelectSingle93
    PgSelectSingle93 --> PgClassExpression95
    PgClassExpression95 --> List96
    List96 --> PgCursor94
    PgSelect41 --> Last98
    Last98 --> PgSelectSingle99
    PgSelectSingle99 --> PgClassExpression101
    PgClassExpression101 --> List102
    List102 --> PgCursor100

    subgraph "Buckets for queries/v4/pg11.types"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,Connection40 bucket0
    Bucket1("Bucket 1 (nullableField)<br />Deps: 3, 40<br /><br />ROOT Connectionᐸ36ᐳ[40]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,Access37,Access38,Object39,PgSelect41,PgSelect84,First85,PgSelectSingle86,PgClassExpression87,PgPageInfo88,Constant89,Constant90,First92,PgSelectSingle93,PgCursor94,PgClassExpression95,List96,Last98,PgSelectSingle99,PgCursor100,PgClassExpression101,List102 bucket1
    Bucket2("Bucket 2 (listItem)<br />ROOT __Item{2}ᐸ41ᐳ[42]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item42,PgSelectSingle43 bucket2
    Bucket3("Bucket 3 (nullableField)<br />Deps: 43<br /><br />ROOT PgSelectSingle{2}ᐸtypesᐳ[43]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression44,PgClassExpression45,PgClassExpression46,PgClassExpression47,PgSelectSingle55,Map103 bucket3
    Bucket4("Bucket 4 (listItem)<br />ROOT __Item{4}ᐸ47ᐳ[48]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item48 bucket4
    Bucket5("Bucket 5 (nullableField)<br />Deps: 55<br /><br />ROOT PgSelectSingle{3}ᐸfrmcdc_domainConstrainedCompoundType_1ᐳ[55]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression56,PgClassExpression57,PgClassExpression58,PgClassExpression59,PgClassExpression60,PgClassExpression61,PgClassExpression62 bucket5
    Bucket6("Bucket 6 (nullableField)<br />Deps: 43<br /><br />ROOT PgSelectSingle{2}ᐸtypesᐳ[43]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression65,PgClassExpression66,PgClassExpression67,PgClassExpression68,PgSelectSingle76,Map105 bucket6
    Bucket7("Bucket 7 (listItem)<br />ROOT __Item{7}ᐸ68ᐳ[69]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,__Item69 bucket7
    Bucket8("Bucket 8 (nullableField)<br />Deps: 76<br /><br />ROOT PgSelectSingle{6}ᐸfrmcdc_domainConstrainedCompoundType_1ᐳ[76]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression77,PgClassExpression78,PgClassExpression79,PgClassExpression80,PgClassExpression81,PgClassExpression82,PgClassExpression83 bucket8
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3 & Bucket6
    Bucket3 --> Bucket4 & Bucket5
    Bucket6 --> Bucket7 & Bucket8
    end
