%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    __InputStaticLeaf17{{"__InputStaticLeaf[17∈1]"}}:::plan
    Access22{{"Access[22∈0]<br />ᐸ3.pgSettingsᐳ"}}:::plan
    Access23{{"Access[23∈0]<br />ᐸ3.withPgClientᐳ"}}:::plan
    Object24{{"Object[24∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Connection25{{"Connection[25∈0]<br />ᐸ21ᐳ"}}:::plan
    PgPageInfo26["PgPageInfo[26∈1]"]:::plan
    PgSelect27[["PgSelect[27∈1]<br />ᐸnetworkᐳ"]]:::plan
    First28{{"First[28∈1]"}}:::plan
    PgSelectSingle29{{"PgSelectSingle[29∈1]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression31{{"PgClassExpression[31∈1]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List32{{"List[32∈1]<br />ᐸ31ᐳ"}}:::plan
    PgCursor30{{"PgCursor[30∈1]"}}:::plan
    Last34{{"Last[34∈1]"}}:::plan
    PgSelectSingle35{{"PgSelectSingle[35∈1]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression37{{"PgClassExpression[37∈1]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List38{{"List[38∈1]<br />ᐸ37ᐳ"}}:::plan
    PgCursor36{{"PgCursor[36∈1]"}}:::plan
    Constant39{{"Constant[39∈1]"}}:::plan
    Constant40{{"Constant[40∈1]"}}:::plan
    PgSelect41[["PgSelect[41∈1]<br />ᐸnetwork(aggregate)ᐳ"]]:::plan
    First42{{"First[42∈1]"}}:::plan
    PgSelectSingle43{{"PgSelectSingle[43∈1]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression44{{"PgClassExpression[44∈1]<br />ᐸcount(*)ᐳ"}}:::plan
    __Item46[/"__Item[46∈2]<br />ᐸ27ᐳ"\]:::itemplan
    PgSelectSingle47{{"PgSelectSingle[47∈2]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression49{{"PgClassExpression[49∈3]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List50{{"List[50∈3]<br />ᐸ49ᐳ"}}:::plan
    PgCursor48{{"PgCursor[48∈3]"}}:::plan
    PgClassExpression52{{"PgClassExpression[52∈3]<br />ᐸ__network__.”inet”ᐳ"}}:::plan
    PgClassExpression53{{"PgClassExpression[53∈3]<br />ᐸ__network__.”cidr”ᐳ"}}:::plan
    PgClassExpression54{{"PgClassExpression[54∈3]<br />ᐸ__network__.”macaddr”ᐳ"}}:::plan
    PgClassExpression55{{"PgClassExpression[55∈3]<br />ᐸ__network__.”macaddr8”ᐳ"}}:::plan
    __InputStaticLeaf67{{"__InputStaticLeaf[67∈4]"}}:::plan
    Connection74{{"Connection[74∈0]<br />ᐸ70ᐳ"}}:::plan
    PgPageInfo75["PgPageInfo[75∈4]"]:::plan
    PgSelect76[["PgSelect[76∈4]<br />ᐸnetworkᐳ"]]:::plan
    First77{{"First[77∈4]"}}:::plan
    PgSelectSingle78{{"PgSelectSingle[78∈4]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression80{{"PgClassExpression[80∈4]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List81{{"List[81∈4]<br />ᐸ80ᐳ"}}:::plan
    PgCursor79{{"PgCursor[79∈4]"}}:::plan
    Last83{{"Last[83∈4]"}}:::plan
    PgSelectSingle84{{"PgSelectSingle[84∈4]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression86{{"PgClassExpression[86∈4]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List87{{"List[87∈4]<br />ᐸ86ᐳ"}}:::plan
    PgCursor85{{"PgCursor[85∈4]"}}:::plan
    Constant88{{"Constant[88∈4]"}}:::plan
    Constant89{{"Constant[89∈4]"}}:::plan
    PgSelect90[["PgSelect[90∈4]<br />ᐸnetwork(aggregate)ᐳ"]]:::plan
    First91{{"First[91∈4]"}}:::plan
    PgSelectSingle92{{"PgSelectSingle[92∈4]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression93{{"PgClassExpression[93∈4]<br />ᐸcount(*)ᐳ"}}:::plan
    __Item95[/"__Item[95∈5]<br />ᐸ76ᐳ"\]:::itemplan
    PgSelectSingle96{{"PgSelectSingle[96∈5]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression98{{"PgClassExpression[98∈6]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List99{{"List[99∈6]<br />ᐸ98ᐳ"}}:::plan
    PgCursor97{{"PgCursor[97∈6]"}}:::plan
    PgClassExpression101{{"PgClassExpression[101∈6]<br />ᐸ__network__.”inet”ᐳ"}}:::plan
    PgClassExpression102{{"PgClassExpression[102∈6]<br />ᐸ__network__.”cidr”ᐳ"}}:::plan
    PgClassExpression103{{"PgClassExpression[103∈6]<br />ᐸ__network__.”macaddr”ᐳ"}}:::plan
    PgClassExpression104{{"PgClassExpression[104∈6]<br />ᐸ__network__.”macaddr8”ᐳ"}}:::plan
    __InputStaticLeaf117{{"__InputStaticLeaf[117∈7]"}}:::plan
    Connection123{{"Connection[123∈0]<br />ᐸ119ᐳ"}}:::plan
    PgPageInfo124["PgPageInfo[124∈7]"]:::plan
    PgSelect125[["PgSelect[125∈7]<br />ᐸnetworkᐳ"]]:::plan
    First126{{"First[126∈7]"}}:::plan
    PgSelectSingle127{{"PgSelectSingle[127∈7]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression129{{"PgClassExpression[129∈7]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List130{{"List[130∈7]<br />ᐸ129ᐳ"}}:::plan
    PgCursor128{{"PgCursor[128∈7]"}}:::plan
    Last132{{"Last[132∈7]"}}:::plan
    PgSelectSingle133{{"PgSelectSingle[133∈7]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression135{{"PgClassExpression[135∈7]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List136{{"List[136∈7]<br />ᐸ135ᐳ"}}:::plan
    PgCursor134{{"PgCursor[134∈7]"}}:::plan
    Constant137{{"Constant[137∈7]"}}:::plan
    Constant138{{"Constant[138∈7]"}}:::plan
    PgSelect139[["PgSelect[139∈7]<br />ᐸnetwork(aggregate)ᐳ"]]:::plan
    First140{{"First[140∈7]"}}:::plan
    PgSelectSingle141{{"PgSelectSingle[141∈7]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression142{{"PgClassExpression[142∈7]<br />ᐸcount(*)ᐳ"}}:::plan
    __Item144[/"__Item[144∈8]<br />ᐸ125ᐳ"\]:::itemplan
    PgSelectSingle145{{"PgSelectSingle[145∈8]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression147{{"PgClassExpression[147∈9]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List148{{"List[148∈9]<br />ᐸ147ᐳ"}}:::plan
    PgCursor146{{"PgCursor[146∈9]"}}:::plan
    PgClassExpression150{{"PgClassExpression[150∈9]<br />ᐸ__network__.”inet”ᐳ"}}:::plan
    PgClassExpression151{{"PgClassExpression[151∈9]<br />ᐸ__network__.”cidr”ᐳ"}}:::plan
    PgClassExpression152{{"PgClassExpression[152∈9]<br />ᐸ__network__.”macaddr”ᐳ"}}:::plan
    PgClassExpression153{{"PgClassExpression[153∈9]<br />ᐸ__network__.”macaddr8”ᐳ"}}:::plan
    __InputStaticLeaf167{{"__InputStaticLeaf[167∈10]"}}:::plan
    Connection172{{"Connection[172∈0]<br />ᐸ168ᐳ"}}:::plan
    PgPageInfo173["PgPageInfo[173∈10]"]:::plan
    PgSelect174[["PgSelect[174∈10]<br />ᐸnetworkᐳ"]]:::plan
    First175{{"First[175∈10]"}}:::plan
    PgSelectSingle176{{"PgSelectSingle[176∈10]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression178{{"PgClassExpression[178∈10]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List179{{"List[179∈10]<br />ᐸ178ᐳ"}}:::plan
    PgCursor177{{"PgCursor[177∈10]"}}:::plan
    Last181{{"Last[181∈10]"}}:::plan
    PgSelectSingle182{{"PgSelectSingle[182∈10]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression184{{"PgClassExpression[184∈10]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List185{{"List[185∈10]<br />ᐸ184ᐳ"}}:::plan
    PgCursor183{{"PgCursor[183∈10]"}}:::plan
    Constant186{{"Constant[186∈10]"}}:::plan
    Constant187{{"Constant[187∈10]"}}:::plan
    PgSelect188[["PgSelect[188∈10]<br />ᐸnetwork(aggregate)ᐳ"]]:::plan
    First189{{"First[189∈10]"}}:::plan
    PgSelectSingle190{{"PgSelectSingle[190∈10]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression191{{"PgClassExpression[191∈10]<br />ᐸcount(*)ᐳ"}}:::plan
    __Item193[/"__Item[193∈11]<br />ᐸ174ᐳ"\]:::itemplan
    PgSelectSingle194{{"PgSelectSingle[194∈11]<br />ᐸnetworkᐳ"}}:::plan
    PgClassExpression196{{"PgClassExpression[196∈12]<br />ᐸ__network__.”id”ᐳ"}}:::plan
    List197{{"List[197∈12]<br />ᐸ196ᐳ"}}:::plan
    PgCursor195{{"PgCursor[195∈12]"}}:::plan
    PgClassExpression199{{"PgClassExpression[199∈12]<br />ᐸ__network__.”inet”ᐳ"}}:::plan
    PgClassExpression200{{"PgClassExpression[200∈12]<br />ᐸ__network__.”cidr”ᐳ"}}:::plan
    PgClassExpression201{{"PgClassExpression[201∈12]<br />ᐸ__network__.”macaddr”ᐳ"}}:::plan
    PgClassExpression202{{"PgClassExpression[202∈12]<br />ᐸ__network__.”macaddr8”ᐳ"}}:::plan

    %% plan dependencies
    __Value3 --> Access22
    __Value3 --> Access23
    Access22 & Access23 --> Object24
    Object24 & __InputStaticLeaf17 & Connection25 --> PgSelect27
    PgSelect27 --> First28
    First28 --> PgSelectSingle29
    PgSelectSingle29 --> PgClassExpression31
    PgClassExpression31 --> List32
    List32 --> PgCursor30
    PgSelect27 --> Last34
    Last34 --> PgSelectSingle35
    PgSelectSingle35 --> PgClassExpression37
    PgClassExpression37 --> List38
    List38 --> PgCursor36
    Object24 & __InputStaticLeaf17 & Connection25 --> PgSelect41
    PgSelect41 --> First42
    First42 --> PgSelectSingle43
    PgSelectSingle43 --> PgClassExpression44
    PgSelect27 ==> __Item46
    __Item46 --> PgSelectSingle47
    PgSelectSingle47 --> PgClassExpression49
    PgClassExpression49 --> List50
    List50 --> PgCursor48
    PgSelectSingle47 --> PgClassExpression52
    PgSelectSingle47 --> PgClassExpression53
    PgSelectSingle47 --> PgClassExpression54
    PgSelectSingle47 --> PgClassExpression55
    Object24 & __InputStaticLeaf67 & Connection74 --> PgSelect76
    PgSelect76 --> First77
    First77 --> PgSelectSingle78
    PgSelectSingle78 --> PgClassExpression80
    PgClassExpression80 --> List81
    List81 --> PgCursor79
    PgSelect76 --> Last83
    Last83 --> PgSelectSingle84
    PgSelectSingle84 --> PgClassExpression86
    PgClassExpression86 --> List87
    List87 --> PgCursor85
    Object24 & __InputStaticLeaf67 & Connection74 --> PgSelect90
    PgSelect90 --> First91
    First91 --> PgSelectSingle92
    PgSelectSingle92 --> PgClassExpression93
    PgSelect76 ==> __Item95
    __Item95 --> PgSelectSingle96
    PgSelectSingle96 --> PgClassExpression98
    PgClassExpression98 --> List99
    List99 --> PgCursor97
    PgSelectSingle96 --> PgClassExpression101
    PgSelectSingle96 --> PgClassExpression102
    PgSelectSingle96 --> PgClassExpression103
    PgSelectSingle96 --> PgClassExpression104
    Object24 & __InputStaticLeaf117 & Connection123 --> PgSelect125
    PgSelect125 --> First126
    First126 --> PgSelectSingle127
    PgSelectSingle127 --> PgClassExpression129
    PgClassExpression129 --> List130
    List130 --> PgCursor128
    PgSelect125 --> Last132
    Last132 --> PgSelectSingle133
    PgSelectSingle133 --> PgClassExpression135
    PgClassExpression135 --> List136
    List136 --> PgCursor134
    Object24 & __InputStaticLeaf117 & Connection123 --> PgSelect139
    PgSelect139 --> First140
    First140 --> PgSelectSingle141
    PgSelectSingle141 --> PgClassExpression142
    PgSelect125 ==> __Item144
    __Item144 --> PgSelectSingle145
    PgSelectSingle145 --> PgClassExpression147
    PgClassExpression147 --> List148
    List148 --> PgCursor146
    PgSelectSingle145 --> PgClassExpression150
    PgSelectSingle145 --> PgClassExpression151
    PgSelectSingle145 --> PgClassExpression152
    PgSelectSingle145 --> PgClassExpression153
    Object24 & __InputStaticLeaf167 & Connection172 --> PgSelect174
    PgSelect174 --> First175
    First175 --> PgSelectSingle176
    PgSelectSingle176 --> PgClassExpression178
    PgClassExpression178 --> List179
    List179 --> PgCursor177
    PgSelect174 --> Last181
    Last181 --> PgSelectSingle182
    PgSelectSingle182 --> PgClassExpression184
    PgClassExpression184 --> List185
    List185 --> PgCursor183
    Object24 & __InputStaticLeaf167 & Connection172 --> PgSelect188
    PgSelect188 --> First189
    First189 --> PgSelectSingle190
    PgSelectSingle190 --> PgClassExpression191
    PgSelect174 ==> __Item193
    __Item193 --> PgSelectSingle194
    PgSelectSingle194 --> PgClassExpression196
    PgClassExpression196 --> List197
    List197 --> PgCursor195
    PgSelectSingle194 --> PgClassExpression199
    PgSelectSingle194 --> PgClassExpression200
    PgSelectSingle194 --> PgClassExpression201
    PgSelectSingle194 --> PgClassExpression202

    subgraph "Buckets for queries/v4/pg11.network_types"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,Access22,Access23,Object24,Connection25,Connection74,Connection123,Connection172 bucket0
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 24, 25<br /><br />ROOT Connectionᐸ21ᐳ[25]<br />1: PgPageInfo[26] / __InputStaticLeaf[17],Constant[39],Constant[40]<br />2: PgSelect[27], PgSelect[41] / First[28],PgSelectSingle[29],PgClassExpression[31],List[32],Last[34],PgSelectSingle[35],PgClassExpression[37],List[38],First[42],PgSelectSingle[43],PgClassExpression[44],PgCursor[30],PgCursor[36]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__InputStaticLeaf17,PgPageInfo26,PgSelect27,First28,PgSelectSingle29,PgCursor30,PgClassExpression31,List32,Last34,PgSelectSingle35,PgCursor36,PgClassExpression37,List38,Constant39,Constant40,PgSelect41,First42,PgSelectSingle43,PgClassExpression44 bucket1
    Bucket2("Bucket 2 (listItem)<br />ROOT __Item{2}ᐸ27ᐳ[46]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item46,PgSelectSingle47 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 47<br /><br />ROOT PgSelectSingle{2}ᐸnetworkᐳ[47]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgCursor48,PgClassExpression49,List50,PgClassExpression52,PgClassExpression53,PgClassExpression54,PgClassExpression55 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 24, 74<br /><br />ROOT Connectionᐸ70ᐳ[74]<br />1: PgPageInfo[75] / __InputStaticLeaf[67],Constant[88],Constant[89]<br />2: PgSelect[76], PgSelect[90] / First[77],PgSelectSingle[78],PgClassExpression[80],List[81],Last[83],PgSelectSingle[84],PgClassExpression[86],List[87],First[91],PgSelectSingle[92],PgClassExpression[93],PgCursor[79],PgCursor[85]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__InputStaticLeaf67,PgPageInfo75,PgSelect76,First77,PgSelectSingle78,PgCursor79,PgClassExpression80,List81,Last83,PgSelectSingle84,PgCursor85,PgClassExpression86,List87,Constant88,Constant89,PgSelect90,First91,PgSelectSingle92,PgClassExpression93 bucket4
    Bucket5("Bucket 5 (listItem)<br />ROOT __Item{5}ᐸ76ᐳ[95]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item95,PgSelectSingle96 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 96<br /><br />ROOT PgSelectSingle{5}ᐸnetworkᐳ[96]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgCursor97,PgClassExpression98,List99,PgClassExpression101,PgClassExpression102,PgClassExpression103,PgClassExpression104 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 24, 123<br /><br />ROOT Connectionᐸ119ᐳ[123]<br />1: PgPageInfo[124] / __InputStaticLeaf[117],Constant[137],Constant[138]<br />2: PgSelect[125], PgSelect[139] / First[126],PgSelectSingle[127],PgClassExpression[129],List[130],Last[132],PgSelectSingle[133],PgClassExpression[135],List[136],First[140],PgSelectSingle[141],PgClassExpression[142],PgCursor[128],PgCursor[134]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,__InputStaticLeaf117,PgPageInfo124,PgSelect125,First126,PgSelectSingle127,PgCursor128,PgClassExpression129,List130,Last132,PgSelectSingle133,PgCursor134,PgClassExpression135,List136,Constant137,Constant138,PgSelect139,First140,PgSelectSingle141,PgClassExpression142 bucket7
    Bucket8("Bucket 8 (listItem)<br />ROOT __Item{8}ᐸ125ᐳ[144]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item144,PgSelectSingle145 bucket8
    Bucket9("Bucket 9 (nullableBoundary)<br />Deps: 145<br /><br />ROOT PgSelectSingle{8}ᐸnetworkᐳ[145]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgCursor146,PgClassExpression147,List148,PgClassExpression150,PgClassExpression151,PgClassExpression152,PgClassExpression153 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 24, 172<br /><br />ROOT Connectionᐸ168ᐳ[172]<br />1: PgPageInfo[173] / __InputStaticLeaf[167],Constant[186],Constant[187]<br />2: PgSelect[174], PgSelect[188] / First[175],PgSelectSingle[176],PgClassExpression[178],List[179],Last[181],PgSelectSingle[182],PgClassExpression[184],List[185],First[189],PgSelectSingle[190],PgClassExpression[191],PgCursor[177],PgCursor[183]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,__InputStaticLeaf167,PgPageInfo173,PgSelect174,First175,PgSelectSingle176,PgCursor177,PgClassExpression178,List179,Last181,PgSelectSingle182,PgCursor183,PgClassExpression184,List185,Constant186,Constant187,PgSelect188,First189,PgSelectSingle190,PgClassExpression191 bucket10
    Bucket11("Bucket 11 (listItem)<br />ROOT __Item{11}ᐸ174ᐳ[193]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11,__Item193,PgSelectSingle194 bucket11
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 194<br /><br />ROOT PgSelectSingle{11}ᐸnetworkᐳ[194]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgCursor195,PgClassExpression196,List197,PgClassExpression199,PgClassExpression200,PgClassExpression201,PgClassExpression202 bucket12
    Bucket0 --> Bucket1 & Bucket4 & Bucket7 & Bucket10
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket7 --> Bucket8
    Bucket8 --> Bucket9
    Bucket10 --> Bucket11
    Bucket11 --> Bucket12
    end
