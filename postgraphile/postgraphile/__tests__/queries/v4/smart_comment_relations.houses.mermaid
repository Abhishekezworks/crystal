%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    PgSelect320[["PgSelect[320∈0]<br />ᐸhousesᐳ"]]:::plan
    Object18{{"Object[18∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Constant384{{"Constant[384∈0]<br />ᐸ2ᐳ"}}:::plan
    Constant385{{"Constant[385∈0]<br />ᐸ3ᐳ"}}:::plan
    Object18 & Constant384 & Constant385 --> PgSelect320
    PgSelect340[["PgSelect[340∈0]<br />ᐸhousesᐳ"]]:::plan
    Access336{{"Access[336∈0]<br />ᐸ335.1ᐳ"}}:::plan
    Access338{{"Access[338∈0]<br />ᐸ335.2ᐳ"}}:::plan
    Object18 -->|rejectNull| PgSelect340
    Access336 -->|rejectNull| PgSelect340
    Access338 --> PgSelect340
    Access16{{"Access[16∈0]<br />ᐸ3.pgSettingsᐳ"}}:::plan
    Access17{{"Access[17∈0]<br />ᐸ3.withPgClientᐳ"}}:::plan
    Access16 & Access17 --> Object18
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value3 --> Access16
    __Value3 --> Access17
    First324{{"First[324∈0]"}}:::plan
    PgSelect320 --> First324
    PgSelectSingle325{{"PgSelectSingle[325∈0]<br />ᐸhousesᐳ"}}:::plan
    First324 --> PgSelectSingle325
    Lambda335{{"Lambda[335∈0]<br />ᐸspecifier_House_base64JSONᐳ"}}:::plan
    Constant386{{"Constant[386∈0]<br />ᐸ'WyJob3VzZXMiLDIsM10='ᐳ"}}:::plan
    Constant386 --> Lambda335
    Lambda335 --> Access336
    Lambda335 --> Access338
    First344{{"First[344∈0]"}}:::plan
    PgSelect340 --> First344
    PgSelectSingle345{{"PgSelectSingle[345∈0]<br />ᐸhousesᐳ"}}:::plan
    First344 --> PgSelectSingle345
    __Value0["__Value[0∈0]"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    Connection19{{"Connection[19∈0]<br />ᐸ15ᐳ"}}:::plan
    Constant23{{"Constant[23∈0]<br />ᐸ'houses'ᐳ"}}:::plan
    Constant41{{"Constant[41∈0]<br />ᐸ'streets'ᐳ"}}:::plan
    Constant64{{"Constant[64∈0]<br />ᐸ'buildings'ᐳ"}}:::plan
    Constant128{{"Constant[128∈0]<br />ᐸ'properties'ᐳ"}}:::plan
    PgSelect20[["PgSelect[20∈1]<br />ᐸhousesᐳ"]]:::plan
    Object18 & Connection19 --> PgSelect20
    Connection60{{"Connection[60∈1]<br />ᐸ56ᐳ"}}:::plan
    Connection111{{"Connection[111∈1]<br />ᐸ107ᐳ"}}:::plan
    Connection161{{"Connection[161∈1]<br />ᐸ157ᐳ"}}:::plan
    Connection211{{"Connection[211∈1]<br />ᐸ207ᐳ"}}:::plan
    Connection258{{"Connection[258∈1]<br />ᐸ254ᐳ"}}:::plan
    Connection308{{"Connection[308∈1]<br />ᐸ304ᐳ"}}:::plan
    __Item21[/"__Item[21∈2]<br />ᐸ20ᐳ"\]:::itemplan
    PgSelect20 ==> __Item21
    PgSelectSingle22{{"PgSelectSingle[22∈2]<br />ᐸhousesᐳ"}}:::plan
    __Item21 --> PgSelectSingle22
    List26{{"List[26∈3]<br />ᐸ23,24,25ᐳ"}}:::plan
    PgClassExpression24{{"PgClassExpression[24∈3]<br />ᐸ__houses__.”street_id”ᐳ"}}:::plan
    PgClassExpression25{{"PgClassExpression[25∈3]<br />ᐸ__houses__...operty_id”ᐳ"}}:::plan
    Constant23 & PgClassExpression24 & PgClassExpression25 --> List26
    PgSelectSingle22 --> PgClassExpression24
    PgSelectSingle22 --> PgClassExpression25
    Lambda27{{"Lambda[27∈3]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List26 --> Lambda27
    PgClassExpression28{{"PgClassExpression[28∈3]<br />ᐸ__houses__...ding_name”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression28
    PgClassExpression29{{"PgClassExpression[29∈3]<br />ᐸ__houses__...or_number”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression29
    PgClassExpression30{{"PgClassExpression[30∈3]<br />ᐸ__houses__...reet_name”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression30
    PgClassExpression32{{"PgClassExpression[32∈3]<br />ᐸ__houses__...ilding_id”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression32
    PgSelectSingle40{{"PgSelectSingle[40∈3]<br />ᐸstreetsᐳ"}}:::plan
    PgSelectSingle22 --> PgSelectSingle40
    PgSelectSingle76{{"PgSelectSingle[76∈3]<br />ᐸbuildingsᐳ"}}:::plan
    RemapKeys380{{"RemapKeys[380∈3]<br />ᐸ22:{”0”:26,”1”:27,”2”:28,”3”:29,”4”:30,”5”:31,”6”:32,”7”:33,”8”:34,”9”:35,”10”:36,”11”:37,”12”:38}ᐳ"}}:::plan
    RemapKeys380 --> PgSelectSingle76
    PgSelectSingle177{{"PgSelectSingle[177∈3]<br />ᐸpropertiesᐳ"}}:::plan
    RemapKeys370{{"RemapKeys[370∈3]<br />ᐸ22:{”0”:16,”1”:17,”2”:18,”3”:19,”4”:20,”5”:21}ᐳ"}}:::plan
    RemapKeys370 --> PgSelectSingle177
    PgSelectSingle228{{"PgSelectSingle[228∈3]<br />ᐸstreet_propertyᐳ"}}:::plan
    RemapKeys365{{"RemapKeys[365∈3]<br />ᐸ22:{”0”:3,”1”:4,”2”:5,”3”:6,”4”:7,”5”:8,”6”:9,”7”:10,”8”:11,”9”:12,”10”:13,”11”:14}ᐳ"}}:::plan
    RemapKeys365 --> PgSelectSingle228
    PgSelectSingle22 --> RemapKeys365
    PgSelectSingle22 --> RemapKeys370
    PgSelectSingle22 --> RemapKeys380
    List43{{"List[43∈4]<br />ᐸ41,42ᐳ"}}:::plan
    PgClassExpression42{{"PgClassExpression[42∈4]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant41 & PgClassExpression42 --> List43
    PgSelectSingle40 --> PgClassExpression42
    Lambda44{{"Lambda[44∈4]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List43 --> Lambda44
    PgClassExpression46{{"PgClassExpression[46∈4]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    PgSelectSingle40 --> PgClassExpression46
    Access354{{"Access[354∈4]<br />ᐸ22.1ᐳ"}}:::plan
    PgSelectSingle22 --> Access354
    __Item62[/"__Item[62∈5]<br />ᐸ354ᐳ"\]:::itemplan
    Access354 ==> __Item62
    PgSelectSingle63{{"PgSelectSingle[63∈5]<br />ᐸbuildingsᐳ"}}:::plan
    __Item62 --> PgSelectSingle63
    List66{{"List[66∈6]<br />ᐸ64,65ᐳ"}}:::plan
    PgClassExpression65{{"PgClassExpression[65∈6]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant64 & PgClassExpression65 --> List66
    PgSelectSingle63 --> PgClassExpression65
    Lambda67{{"Lambda[67∈6]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List66 --> Lambda67
    PgClassExpression69{{"PgClassExpression[69∈6]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle63 --> PgClassExpression69
    List79{{"List[79∈7]<br />ᐸ64,78ᐳ"}}:::plan
    PgClassExpression78{{"PgClassExpression[78∈7]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant64 & PgClassExpression78 --> List79
    PgSelectSingle76 --> PgClassExpression78
    Lambda80{{"Lambda[80∈7]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List79 --> Lambda80
    PgClassExpression82{{"PgClassExpression[82∈7]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle76 --> PgClassExpression82
    PgClassExpression83{{"PgClassExpression[83∈7]<br />ᐸ__buildings__.”floors”ᐳ"}}:::plan
    PgSelectSingle76 --> PgClassExpression83
    PgClassExpression84{{"PgClassExpression[84∈7]<br />ᐸ__building...s_primary”ᐳ"}}:::plan
    PgSelectSingle76 --> PgClassExpression84
    PgSelectSingle91{{"PgSelectSingle[91∈7]<br />ᐸstreetsᐳ"}}:::plan
    RemapKeys373{{"RemapKeys[373∈7]<br />ᐸ76:{”0”:1,”1”:2,”2”:3}ᐳ"}}:::plan
    RemapKeys373 --> PgSelectSingle91
    PgSelectSingle127{{"PgSelectSingle[127∈7]<br />ᐸpropertiesᐳ"}}:::plan
    RemapKeys378{{"RemapKeys[378∈7]<br />ᐸ76:{”0”:7,”1”:8,”2”:9,”3”:10,”4”:11,”5”:12}ᐳ"}}:::plan
    RemapKeys378 --> PgSelectSingle127
    PgSelectSingle76 --> RemapKeys373
    PgSelectSingle76 --> RemapKeys378
    List94{{"List[94∈8]<br />ᐸ41,93ᐳ"}}:::plan
    PgClassExpression93{{"PgClassExpression[93∈8]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant41 & PgClassExpression93 --> List94
    PgSelectSingle91 --> PgClassExpression93
    Lambda95{{"Lambda[95∈8]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List94 --> Lambda95
    PgClassExpression97{{"PgClassExpression[97∈8]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    PgSelectSingle91 --> PgClassExpression97
    Access372{{"Access[372∈8]<br />ᐸ373.1ᐳ"}}:::plan
    RemapKeys373 --> Access372
    __Item113[/"__Item[113∈9]<br />ᐸ372ᐳ"\]:::itemplan
    Access372 ==> __Item113
    PgSelectSingle114{{"PgSelectSingle[114∈9]<br />ᐸbuildingsᐳ"}}:::plan
    __Item113 --> PgSelectSingle114
    List117{{"List[117∈10]<br />ᐸ64,116ᐳ"}}:::plan
    PgClassExpression116{{"PgClassExpression[116∈10]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant64 & PgClassExpression116 --> List117
    PgSelectSingle114 --> PgClassExpression116
    Lambda118{{"Lambda[118∈10]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List117 --> Lambda118
    PgClassExpression120{{"PgClassExpression[120∈10]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle114 --> PgClassExpression120
    List130{{"List[130∈11]<br />ᐸ128,129ᐳ"}}:::plan
    PgClassExpression129{{"PgClassExpression[129∈11]<br />ᐸ__properties__.”id”ᐳ"}}:::plan
    Constant128 & PgClassExpression129 --> List130
    PgSelectSingle127 --> PgClassExpression129
    Lambda131{{"Lambda[131∈11]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List130 --> Lambda131
    PgClassExpression133{{"PgClassExpression[133∈11]<br />ᐸ__properti...street_id”ᐳ"}}:::plan
    PgSelectSingle127 --> PgClassExpression133
    PgClassExpression134{{"PgClassExpression[134∈11]<br />ᐸ__properti...or_number”ᐳ"}}:::plan
    PgSelectSingle127 --> PgClassExpression134
    PgSelectSingle141{{"PgSelectSingle[141∈11]<br />ᐸstreetsᐳ"}}:::plan
    RemapKeys376{{"RemapKeys[376∈11]<br />ᐸ127:{”0”:1,”1”:2,”2”:3}ᐳ"}}:::plan
    RemapKeys376 --> PgSelectSingle141
    PgSelectSingle127 --> RemapKeys376
    List144{{"List[144∈12]<br />ᐸ41,143ᐳ"}}:::plan
    PgClassExpression143{{"PgClassExpression[143∈12]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant41 & PgClassExpression143 --> List144
    PgSelectSingle141 --> PgClassExpression143
    Lambda145{{"Lambda[145∈12]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List144 --> Lambda145
    PgClassExpression147{{"PgClassExpression[147∈12]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    PgSelectSingle141 --> PgClassExpression147
    Access375{{"Access[375∈12]<br />ᐸ376.1ᐳ"}}:::plan
    RemapKeys376 --> Access375
    __Item163[/"__Item[163∈13]<br />ᐸ375ᐳ"\]:::itemplan
    Access375 ==> __Item163
    PgSelectSingle164{{"PgSelectSingle[164∈13]<br />ᐸbuildingsᐳ"}}:::plan
    __Item163 --> PgSelectSingle164
    List167{{"List[167∈14]<br />ᐸ64,166ᐳ"}}:::plan
    PgClassExpression166{{"PgClassExpression[166∈14]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant64 & PgClassExpression166 --> List167
    PgSelectSingle164 --> PgClassExpression166
    Lambda168{{"Lambda[168∈14]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List167 --> Lambda168
    PgClassExpression170{{"PgClassExpression[170∈14]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle164 --> PgClassExpression170
    List180{{"List[180∈15]<br />ᐸ128,179ᐳ"}}:::plan
    PgClassExpression179{{"PgClassExpression[179∈15]<br />ᐸ__properties__.”id”ᐳ"}}:::plan
    Constant128 & PgClassExpression179 --> List180
    PgSelectSingle177 --> PgClassExpression179
    Lambda181{{"Lambda[181∈15]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List180 --> Lambda181
    PgClassExpression183{{"PgClassExpression[183∈15]<br />ᐸ__properti...street_id”ᐳ"}}:::plan
    PgSelectSingle177 --> PgClassExpression183
    PgClassExpression184{{"PgClassExpression[184∈15]<br />ᐸ__properti...or_number”ᐳ"}}:::plan
    PgSelectSingle177 --> PgClassExpression184
    PgSelectSingle191{{"PgSelectSingle[191∈15]<br />ᐸstreetsᐳ"}}:::plan
    RemapKeys368{{"RemapKeys[368∈15]<br />ᐸ177:{”0”:1,”1”:2,”2”:3}ᐳ"}}:::plan
    RemapKeys368 --> PgSelectSingle191
    PgSelectSingle177 --> RemapKeys368
    List194{{"List[194∈16]<br />ᐸ41,193ᐳ"}}:::plan
    PgClassExpression193{{"PgClassExpression[193∈16]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant41 & PgClassExpression193 --> List194
    PgSelectSingle191 --> PgClassExpression193
    Lambda195{{"Lambda[195∈16]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List194 --> Lambda195
    PgClassExpression197{{"PgClassExpression[197∈16]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    PgSelectSingle191 --> PgClassExpression197
    Access367{{"Access[367∈16]<br />ᐸ368.1ᐳ"}}:::plan
    RemapKeys368 --> Access367
    __Item213[/"__Item[213∈17]<br />ᐸ367ᐳ"\]:::itemplan
    Access367 ==> __Item213
    PgSelectSingle214{{"PgSelectSingle[214∈17]<br />ᐸbuildingsᐳ"}}:::plan
    __Item213 --> PgSelectSingle214
    List217{{"List[217∈18]<br />ᐸ64,216ᐳ"}}:::plan
    PgClassExpression216{{"PgClassExpression[216∈18]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant64 & PgClassExpression216 --> List217
    PgSelectSingle214 --> PgClassExpression216
    Lambda218{{"Lambda[218∈18]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List217 --> Lambda218
    PgClassExpression220{{"PgClassExpression[220∈18]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle214 --> PgClassExpression220
    PgClassExpression229{{"PgClassExpression[229∈19]<br />ᐸ__street_p..._.”str_id”ᐳ"}}:::plan
    PgSelectSingle228 --> PgClassExpression229
    PgClassExpression230{{"PgClassExpression[230∈19]<br />ᐸ__street_p....”prop_id”ᐳ"}}:::plan
    PgSelectSingle228 --> PgClassExpression230
    PgClassExpression231{{"PgClassExpression[231∈19]<br />ᐸ__street_p...ent_owner”ᐳ"}}:::plan
    PgSelectSingle228 --> PgClassExpression231
    PgSelectSingle238{{"PgSelectSingle[238∈19]<br />ᐸstreetsᐳ"}}:::plan
    PgSelectSingle228 --> PgSelectSingle238
    PgSelectSingle274{{"PgSelectSingle[274∈19]<br />ᐸpropertiesᐳ"}}:::plan
    RemapKeys363{{"RemapKeys[363∈19]<br />ᐸ228:{”0”:4,”1”:5,”2”:6,”3”:7,”4”:8,”5”:9}ᐳ"}}:::plan
    RemapKeys363 --> PgSelectSingle274
    PgSelectSingle228 --> RemapKeys363
    List241{{"List[241∈20]<br />ᐸ41,240ᐳ"}}:::plan
    PgClassExpression240{{"PgClassExpression[240∈20]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant41 & PgClassExpression240 --> List241
    PgSelectSingle238 --> PgClassExpression240
    Lambda242{{"Lambda[242∈20]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List241 --> Lambda242
    PgClassExpression244{{"PgClassExpression[244∈20]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    PgSelectSingle238 --> PgClassExpression244
    Access357{{"Access[357∈20]<br />ᐸ228.1ᐳ"}}:::plan
    PgSelectSingle228 --> Access357
    __Item260[/"__Item[260∈21]<br />ᐸ357ᐳ"\]:::itemplan
    Access357 ==> __Item260
    PgSelectSingle261{{"PgSelectSingle[261∈21]<br />ᐸbuildingsᐳ"}}:::plan
    __Item260 --> PgSelectSingle261
    List264{{"List[264∈22]<br />ᐸ64,263ᐳ"}}:::plan
    PgClassExpression263{{"PgClassExpression[263∈22]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant64 & PgClassExpression263 --> List264
    PgSelectSingle261 --> PgClassExpression263
    Lambda265{{"Lambda[265∈22]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List264 --> Lambda265
    PgClassExpression267{{"PgClassExpression[267∈22]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle261 --> PgClassExpression267
    List277{{"List[277∈23]<br />ᐸ128,276ᐳ"}}:::plan
    PgClassExpression276{{"PgClassExpression[276∈23]<br />ᐸ__properties__.”id”ᐳ"}}:::plan
    Constant128 & PgClassExpression276 --> List277
    PgSelectSingle274 --> PgClassExpression276
    Lambda278{{"Lambda[278∈23]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List277 --> Lambda278
    PgClassExpression280{{"PgClassExpression[280∈23]<br />ᐸ__properti...street_id”ᐳ"}}:::plan
    PgSelectSingle274 --> PgClassExpression280
    PgClassExpression281{{"PgClassExpression[281∈23]<br />ᐸ__properti...or_number”ᐳ"}}:::plan
    PgSelectSingle274 --> PgClassExpression281
    PgSelectSingle288{{"PgSelectSingle[288∈23]<br />ᐸstreetsᐳ"}}:::plan
    RemapKeys361{{"RemapKeys[361∈23]<br />ᐸ274:{”0”:1,”1”:2,”2”:3}ᐳ"}}:::plan
    RemapKeys361 --> PgSelectSingle288
    PgSelectSingle274 --> RemapKeys361
    List291{{"List[291∈24]<br />ᐸ41,290ᐳ"}}:::plan
    PgClassExpression290{{"PgClassExpression[290∈24]<br />ᐸ__streets__.”id”ᐳ"}}:::plan
    Constant41 & PgClassExpression290 --> List291
    PgSelectSingle288 --> PgClassExpression290
    Lambda292{{"Lambda[292∈24]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List291 --> Lambda292
    PgClassExpression294{{"PgClassExpression[294∈24]<br />ᐸ__streets__.”name”ᐳ"}}:::plan
    PgSelectSingle288 --> PgClassExpression294
    Access360{{"Access[360∈24]<br />ᐸ361.1ᐳ"}}:::plan
    RemapKeys361 --> Access360
    __Item310[/"__Item[310∈25]<br />ᐸ360ᐳ"\]:::itemplan
    Access360 ==> __Item310
    PgSelectSingle311{{"PgSelectSingle[311∈25]<br />ᐸbuildingsᐳ"}}:::plan
    __Item310 --> PgSelectSingle311
    List314{{"List[314∈26]<br />ᐸ64,313ᐳ"}}:::plan
    PgClassExpression313{{"PgClassExpression[313∈26]<br />ᐸ__buildings__.”id”ᐳ"}}:::plan
    Constant64 & PgClassExpression313 --> List314
    PgSelectSingle311 --> PgClassExpression313
    Lambda315{{"Lambda[315∈26]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List314 --> Lambda315
    PgClassExpression317{{"PgClassExpression[317∈26]<br />ᐸ__buildings__.”name”ᐳ"}}:::plan
    PgSelectSingle311 --> PgClassExpression317
    List332{{"List[332∈27]<br />ᐸ23,330,331ᐳ"}}:::plan
    PgClassExpression330{{"PgClassExpression[330∈27]<br />ᐸ__houses__.”street_id”ᐳ"}}:::plan
    PgClassExpression331{{"PgClassExpression[331∈27]<br />ᐸ__houses__...operty_id”ᐳ"}}:::plan
    Constant23 & PgClassExpression330 & PgClassExpression331 --> List332
    PgClassExpression326{{"PgClassExpression[326∈27]<br />ᐸ__houses__...ding_name”ᐳ"}}:::plan
    PgSelectSingle325 --> PgClassExpression326
    PgClassExpression327{{"PgClassExpression[327∈27]<br />ᐸ__houses__...or_number”ᐳ"}}:::plan
    PgSelectSingle325 --> PgClassExpression327
    PgClassExpression328{{"PgClassExpression[328∈27]<br />ᐸ__houses__...reet_name”ᐳ"}}:::plan
    PgSelectSingle325 --> PgClassExpression328
    PgSelectSingle325 --> PgClassExpression330
    PgSelectSingle325 --> PgClassExpression331
    Lambda333{{"Lambda[333∈27]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List332 --> Lambda333
    List352{{"List[352∈28]<br />ᐸ23,350,351ᐳ"}}:::plan
    PgClassExpression350{{"PgClassExpression[350∈28]<br />ᐸ__houses__.”street_id”ᐳ"}}:::plan
    PgClassExpression351{{"PgClassExpression[351∈28]<br />ᐸ__houses__...operty_id”ᐳ"}}:::plan
    Constant23 & PgClassExpression350 & PgClassExpression351 --> List352
    PgClassExpression346{{"PgClassExpression[346∈28]<br />ᐸ__houses__...ding_name”ᐳ"}}:::plan
    PgSelectSingle345 --> PgClassExpression346
    PgClassExpression347{{"PgClassExpression[347∈28]<br />ᐸ__houses__...or_number”ᐳ"}}:::plan
    PgSelectSingle345 --> PgClassExpression347
    PgClassExpression348{{"PgClassExpression[348∈28]<br />ᐸ__houses__...reet_name”ᐳ"}}:::plan
    PgSelectSingle345 --> PgClassExpression348
    PgSelectSingle345 --> PgClassExpression350
    PgSelectSingle345 --> PgClassExpression351
    Lambda353{{"Lambda[353∈28]<br />ᐸbase64JSONEncodeᐳ"}}:::plan
    List352 --> Lambda353

    %% define steps

    subgraph "Buckets for queries/v4/smart_comment_relations.houses"
    Bucket0("Bucket 0 (root)<br />1: <br />ᐳ: 16, 17, 19, 23, 41, 64, 128, 384, 385, 386, 18, 335, 336, 338<br />2: PgSelect[320], PgSelect[340]<br />ᐳ: 324, 325, 344, 345"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value3,__Value5,Access16,Access17,Object18,Connection19,Constant23,Constant41,Constant64,Constant128,PgSelect320,First324,PgSelectSingle325,Lambda335,Access336,Access338,PgSelect340,First344,PgSelectSingle345,Constant384,Constant385,Constant386 bucket0
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 18, 19, 23, 41, 64, 128<br /><br />ROOT Connectionᐸ15ᐳ[19]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect20,Connection60,Connection111,Connection161,Connection211,Connection258,Connection308 bucket1
    Bucket2("Bucket 2 (listItem)<br />Deps: 23, 41, 64, 128, 60, 111, 161, 211, 258, 308<br /><br />ROOT __Item{2}ᐸ20ᐳ[21]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item21,PgSelectSingle22 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 22, 23, 41, 64, 128, 60, 111, 161, 211, 258, 308<br /><br />ROOT PgSelectSingle{2}ᐸhousesᐳ[22]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression24,PgClassExpression25,List26,Lambda27,PgClassExpression28,PgClassExpression29,PgClassExpression30,PgClassExpression32,PgSelectSingle40,PgSelectSingle76,PgSelectSingle177,PgSelectSingle228,RemapKeys365,RemapKeys370,RemapKeys380 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 40, 41, 22, 64, 60<br /><br />ROOT PgSelectSingle{3}ᐸstreetsᐳ[40]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgClassExpression42,List43,Lambda44,PgClassExpression46,Access354 bucket4
    Bucket5("Bucket 5 (listItem)<br />Deps: 64<br /><br />ROOT __Item{5}ᐸ354ᐳ[62]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item62,PgSelectSingle63 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 63, 64<br /><br />ROOT PgSelectSingle{5}ᐸbuildingsᐳ[63]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression65,List66,Lambda67,PgClassExpression69 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 76, 64, 41, 128, 111, 161<br /><br />ROOT PgSelectSingle{3}ᐸbuildingsᐳ[76]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,PgClassExpression78,List79,Lambda80,PgClassExpression82,PgClassExpression83,PgClassExpression84,PgSelectSingle91,PgSelectSingle127,RemapKeys373,RemapKeys378 bucket7
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 91, 41, 373, 64, 111<br /><br />ROOT PgSelectSingle{7}ᐸstreetsᐳ[91]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression93,List94,Lambda95,PgClassExpression97,Access372 bucket8
    Bucket9("Bucket 9 (listItem)<br />Deps: 64<br /><br />ROOT __Item{9}ᐸ372ᐳ[113]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item113,PgSelectSingle114 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 114, 64<br /><br />ROOT PgSelectSingle{9}ᐸbuildingsᐳ[114]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression116,List117,Lambda118,PgClassExpression120 bucket10
    Bucket11("Bucket 11 (nullableBoundary)<br />Deps: 127, 128, 41, 64, 161<br /><br />ROOT PgSelectSingle{7}ᐸpropertiesᐳ[127]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgClassExpression129,List130,Lambda131,PgClassExpression133,PgClassExpression134,PgSelectSingle141,RemapKeys376 bucket11
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 141, 41, 376, 64, 161<br /><br />ROOT PgSelectSingle{11}ᐸstreetsᐳ[141]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgClassExpression143,List144,Lambda145,PgClassExpression147,Access375 bucket12
    Bucket13("Bucket 13 (listItem)<br />Deps: 64<br /><br />ROOT __Item{13}ᐸ375ᐳ[163]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13,__Item163,PgSelectSingle164 bucket13
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 164, 64<br /><br />ROOT PgSelectSingle{13}ᐸbuildingsᐳ[164]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgClassExpression166,List167,Lambda168,PgClassExpression170 bucket14
    Bucket15("Bucket 15 (nullableBoundary)<br />Deps: 177, 128, 41, 64, 211<br /><br />ROOT PgSelectSingle{3}ᐸpropertiesᐳ[177]"):::bucket
    classDef bucket15 stroke:#ff00ff
    class Bucket15,PgClassExpression179,List180,Lambda181,PgClassExpression183,PgClassExpression184,PgSelectSingle191,RemapKeys368 bucket15
    Bucket16("Bucket 16 (nullableBoundary)<br />Deps: 191, 41, 368, 64, 211<br /><br />ROOT PgSelectSingle{15}ᐸstreetsᐳ[191]"):::bucket
    classDef bucket16 stroke:#f5deb3
    class Bucket16,PgClassExpression193,List194,Lambda195,PgClassExpression197,Access367 bucket16
    Bucket17("Bucket 17 (listItem)<br />Deps: 64<br /><br />ROOT __Item{17}ᐸ367ᐳ[213]"):::bucket
    classDef bucket17 stroke:#696969
    class Bucket17,__Item213,PgSelectSingle214 bucket17
    Bucket18("Bucket 18 (nullableBoundary)<br />Deps: 214, 64<br /><br />ROOT PgSelectSingle{17}ᐸbuildingsᐳ[214]"):::bucket
    classDef bucket18 stroke:#00bfff
    class Bucket18,PgClassExpression216,List217,Lambda218,PgClassExpression220 bucket18
    Bucket19("Bucket 19 (nullableBoundary)<br />Deps: 228, 41, 64, 128, 258, 308<br /><br />ROOT PgSelectSingle{3}ᐸstreet_propertyᐳ[228]"):::bucket
    classDef bucket19 stroke:#7f007f
    class Bucket19,PgClassExpression229,PgClassExpression230,PgClassExpression231,PgSelectSingle238,PgSelectSingle274,RemapKeys363 bucket19
    Bucket20("Bucket 20 (nullableBoundary)<br />Deps: 238, 41, 228, 64, 258<br /><br />ROOT PgSelectSingle{19}ᐸstreetsᐳ[238]"):::bucket
    classDef bucket20 stroke:#ffa500
    class Bucket20,PgClassExpression240,List241,Lambda242,PgClassExpression244,Access357 bucket20
    Bucket21("Bucket 21 (listItem)<br />Deps: 64<br /><br />ROOT __Item{21}ᐸ357ᐳ[260]"):::bucket
    classDef bucket21 stroke:#0000ff
    class Bucket21,__Item260,PgSelectSingle261 bucket21
    Bucket22("Bucket 22 (nullableBoundary)<br />Deps: 261, 64<br /><br />ROOT PgSelectSingle{21}ᐸbuildingsᐳ[261]"):::bucket
    classDef bucket22 stroke:#7fff00
    class Bucket22,PgClassExpression263,List264,Lambda265,PgClassExpression267 bucket22
    Bucket23("Bucket 23 (nullableBoundary)<br />Deps: 274, 128, 41, 64, 308<br /><br />ROOT PgSelectSingle{19}ᐸpropertiesᐳ[274]"):::bucket
    classDef bucket23 stroke:#ff1493
    class Bucket23,PgClassExpression276,List277,Lambda278,PgClassExpression280,PgClassExpression281,PgSelectSingle288,RemapKeys361 bucket23
    Bucket24("Bucket 24 (nullableBoundary)<br />Deps: 288, 41, 361, 64, 308<br /><br />ROOT PgSelectSingle{23}ᐸstreetsᐳ[288]"):::bucket
    classDef bucket24 stroke:#808000
    class Bucket24,PgClassExpression290,List291,Lambda292,PgClassExpression294,Access360 bucket24
    Bucket25("Bucket 25 (listItem)<br />Deps: 64<br /><br />ROOT __Item{25}ᐸ360ᐳ[310]"):::bucket
    classDef bucket25 stroke:#dda0dd
    class Bucket25,__Item310,PgSelectSingle311 bucket25
    Bucket26("Bucket 26 (nullableBoundary)<br />Deps: 311, 64<br /><br />ROOT PgSelectSingle{25}ᐸbuildingsᐳ[311]"):::bucket
    classDef bucket26 stroke:#ff0000
    class Bucket26,PgClassExpression313,List314,Lambda315,PgClassExpression317 bucket26
    Bucket27("Bucket 27 (nullableBoundary)<br />Deps: 325, 23<br /><br />ROOT PgSelectSingleᐸhousesᐳ[325]"):::bucket
    classDef bucket27 stroke:#ffff00
    class Bucket27,PgClassExpression326,PgClassExpression327,PgClassExpression328,PgClassExpression330,PgClassExpression331,List332,Lambda333 bucket27
    Bucket28("Bucket 28 (nullableBoundary)<br />Deps: 345, 23<br /><br />ROOT PgSelectSingleᐸhousesᐳ[345]"):::bucket
    classDef bucket28 stroke:#00ffff
    class Bucket28,PgClassExpression346,PgClassExpression347,PgClassExpression348,PgClassExpression350,PgClassExpression351,List352,Lambda353 bucket28
    Bucket0 --> Bucket1 & Bucket27 & Bucket28
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket7 & Bucket15 & Bucket19
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket7 --> Bucket8 & Bucket11
    Bucket8 --> Bucket9
    Bucket9 --> Bucket10
    Bucket11 --> Bucket12
    Bucket12 --> Bucket13
    Bucket13 --> Bucket14
    Bucket15 --> Bucket16
    Bucket16 --> Bucket17
    Bucket17 --> Bucket18
    Bucket19 --> Bucket20 & Bucket23
    Bucket20 --> Bucket21
    Bucket21 --> Bucket22
    Bucket23 --> Bucket24
    Bucket24 --> Bucket25
    Bucket25 --> Bucket26
    classDef unary fill:#fafffa,borderWidth:8px
    class PgSelect320,PgSelect340,Object18,Access16,Access17,First324,PgSelectSingle325,Lambda335,Access336,Access338,First344,PgSelectSingle345,__Value0,__Value3,__Value5,Connection19,Constant23,Constant41,Constant64,Constant128,Constant384,Constant385,Constant386,PgSelect20,Connection60,Connection111,Connection161,Connection211,Connection258,Connection308,List332,PgClassExpression326,PgClassExpression327,PgClassExpression328,PgClassExpression330,PgClassExpression331,Lambda333,List352,PgClassExpression346,PgClassExpression347,PgClassExpression348,PgClassExpression350,PgClassExpression351,Lambda353 unary
    end
