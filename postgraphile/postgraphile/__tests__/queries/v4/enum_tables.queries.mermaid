%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object17{{"Object[17∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access15{{"Access[15∈0]<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access16{{"Access[16∈0]<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access15 & Access16 --> Object17
    PgSelect67[["PgSelect[67∈0]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Constant136{{"Constant[136∈0]<br />ᐸ'B'ᐳ"}}:::plan
    Object17 & Constant136 --> PgSelect67
    PgSelect78[["PgSelect[78∈0]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object17 & Constant136 --> PgSelect78
    __Value2["__Value[2∈0]<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access15
    __Value2 --> Access16
    First71{{"First[71∈0]"}}:::plan
    PgSelect67 --> First71
    PgSelectSingle72{{"PgSelectSingle[72∈0]<br />ᐸletter_descriptionsᐳ"}}:::plan
    First71 --> PgSelectSingle72
    First82{{"First[82∈0]"}}:::plan
    PgSelect78 --> First82
    PgSelectSingle83{{"PgSelectSingle[83∈0]<br />ᐸletter_descriptionsᐳ"}}:::plan
    First82 --> PgSelectSingle83
    __Value4["__Value[4∈0]<br />ᐸrootValueᐳ"]:::plan
    Connection18{{"Connection[18∈0]<br />ᐸ14ᐳ"}}:::plan
    Connection38{{"Connection[38∈0]<br />ᐸ34ᐳ"}}:::plan
    Connection58{{"Connection[58∈0]<br />ᐸ54ᐳ"}}:::plan
    Connection104{{"Connection[104∈0]<br />ᐸ100ᐳ"}}:::plan
    Connection128{{"Connection[128∈0]<br />ᐸ124ᐳ"}}:::plan
    Constant138{{"Constant[138∈0]<br />ᐸ'C'ᐳ"}}:::plan
    PgSelect19[["PgSelect[19∈1]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object17 & Connection18 --> PgSelect19
    __Item20[/"__Item[20∈2]<br />ᐸ19ᐳ"\]:::itemplan
    PgSelect19 ==> __Item20
    PgSelectSingle21{{"PgSelectSingle[21∈2]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item20 --> PgSelectSingle21
    PgClassExpression22{{"PgClassExpression[22∈3]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle21 --> PgClassExpression22
    PgClassExpression23{{"PgClassExpression[23∈3]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle21 --> PgClassExpression23
    PgClassExpression24{{"PgClassExpression[24∈3]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle21 --> PgClassExpression24
    PgClassExpression25{{"PgClassExpression[25∈3]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle21 --> PgClassExpression25
    PgSelect39[["PgSelect[39∈4]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object17 & Connection38 --> PgSelect39
    __Item40[/"__Item[40∈5]<br />ᐸ39ᐳ"\]:::itemplan
    PgSelect39 ==> __Item40
    PgSelectSingle41{{"PgSelectSingle[41∈5]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item40 --> PgSelectSingle41
    PgClassExpression42{{"PgClassExpression[42∈6]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle41 --> PgClassExpression42
    PgClassExpression43{{"PgClassExpression[43∈6]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle41 --> PgClassExpression43
    PgClassExpression44{{"PgClassExpression[44∈6]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle41 --> PgClassExpression44
    PgClassExpression45{{"PgClassExpression[45∈6]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle41 --> PgClassExpression45
    PgSelect59[["PgSelect[59∈7]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object17 & Connection58 --> PgSelect59
    __Item60[/"__Item[60∈8]<br />ᐸ59ᐳ"\]:::itemplan
    PgSelect59 ==> __Item60
    PgSelectSingle61{{"PgSelectSingle[61∈8]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item60 --> PgSelectSingle61
    PgClassExpression62{{"PgClassExpression[62∈9]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle61 --> PgClassExpression62
    PgClassExpression63{{"PgClassExpression[63∈9]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle61 --> PgClassExpression63
    PgClassExpression64{{"PgClassExpression[64∈9]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle61 --> PgClassExpression64
    PgClassExpression65{{"PgClassExpression[65∈9]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle61 --> PgClassExpression65
    PgClassExpression73{{"PgClassExpression[73∈10]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression73
    PgClassExpression74{{"PgClassExpression[74∈10]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression74
    PgClassExpression75{{"PgClassExpression[75∈10]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression75
    PgClassExpression76{{"PgClassExpression[76∈10]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression76
    PgClassExpression84{{"PgClassExpression[84∈11]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle83 --> PgClassExpression84
    PgClassExpression85{{"PgClassExpression[85∈11]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle83 --> PgClassExpression85
    PgClassExpression86{{"PgClassExpression[86∈11]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle83 --> PgClassExpression86
    PgClassExpression87{{"PgClassExpression[87∈11]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle83 --> PgClassExpression87
    PgSelect105[["PgSelect[105∈12]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object17 & Constant138 & Connection104 --> PgSelect105
    __Item106[/"__Item[106∈13]<br />ᐸ105ᐳ"\]:::itemplan
    PgSelect105 ==> __Item106
    PgSelectSingle107{{"PgSelectSingle[107∈13]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item106 --> PgSelectSingle107
    PgClassExpression108{{"PgClassExpression[108∈14]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression108
    PgClassExpression109{{"PgClassExpression[109∈14]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression109
    PgClassExpression110{{"PgClassExpression[110∈14]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression110
    PgClassExpression111{{"PgClassExpression[111∈14]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression111
    PgSelect129[["PgSelect[129∈15]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object17 & Constant138 & Connection128 --> PgSelect129
    __Item130[/"__Item[130∈16]<br />ᐸ129ᐳ"\]:::itemplan
    PgSelect129 ==> __Item130
    PgSelectSingle131{{"PgSelectSingle[131∈16]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item130 --> PgSelectSingle131
    PgClassExpression132{{"PgClassExpression[132∈17]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle131 --> PgClassExpression132
    PgClassExpression133{{"PgClassExpression[133∈17]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle131 --> PgClassExpression133
    PgClassExpression134{{"PgClassExpression[134∈17]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle131 --> PgClassExpression134
    PgClassExpression135{{"PgClassExpression[135∈17]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle131 --> PgClassExpression135

    %% define steps

    subgraph "Buckets for queries/v4/enum_tables.queries"
    Bucket0("Bucket 0 (root)<br />1: <br />ᐳ: 15, 16, 18, 38, 58, 104, 128, 136, 138, 17<br />2: PgSelect[67], PgSelect[78]<br />ᐳ: 71, 72, 82, 83"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Access15,Access16,Object17,Connection18,Connection38,Connection58,PgSelect67,First71,PgSelectSingle72,PgSelect78,First82,PgSelectSingle83,Connection104,Connection128,Constant136,Constant138 bucket0
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 17, 18<br /><br />ROOT Connectionᐸ14ᐳ[18]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect19 bucket1
    Bucket2("Bucket 2 (listItem)<br />ROOT __Item{2}ᐸ19ᐳ[20]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item20,PgSelectSingle21 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 21<br /><br />ROOT PgSelectSingle{2}ᐸletter_descriptionsᐳ[21]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression22,PgClassExpression23,PgClassExpression24,PgClassExpression25 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 17, 38<br /><br />ROOT Connectionᐸ34ᐳ[38]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect39 bucket4
    Bucket5("Bucket 5 (listItem)<br />ROOT __Item{5}ᐸ39ᐳ[40]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item40,PgSelectSingle41 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 41<br /><br />ROOT PgSelectSingle{5}ᐸletter_descriptionsᐳ[41]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression42,PgClassExpression43,PgClassExpression44,PgClassExpression45 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 17, 58<br /><br />ROOT Connectionᐸ54ᐳ[58]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect59 bucket7
    Bucket8("Bucket 8 (listItem)<br />ROOT __Item{8}ᐸ59ᐳ[60]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item60,PgSelectSingle61 bucket8
    Bucket9("Bucket 9 (nullableBoundary)<br />Deps: 61<br /><br />ROOT PgSelectSingle{8}ᐸletter_descriptionsᐳ[61]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgClassExpression62,PgClassExpression63,PgClassExpression64,PgClassExpression65 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 72<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[72]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression73,PgClassExpression74,PgClassExpression75,PgClassExpression76 bucket10
    Bucket11("Bucket 11 (nullableBoundary)<br />Deps: 83<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[83]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgClassExpression84,PgClassExpression85,PgClassExpression86,PgClassExpression87 bucket11
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 17, 138, 104<br /><br />ROOT Connectionᐸ100ᐳ[104]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect105 bucket12
    Bucket13("Bucket 13 (listItem)<br />ROOT __Item{13}ᐸ105ᐳ[106]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13,__Item106,PgSelectSingle107 bucket13
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 107<br /><br />ROOT PgSelectSingle{13}ᐸletter_descriptionsᐳ[107]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgClassExpression108,PgClassExpression109,PgClassExpression110,PgClassExpression111 bucket14
    Bucket15("Bucket 15 (nullableBoundary)<br />Deps: 17, 138, 128<br /><br />ROOT Connectionᐸ124ᐳ[128]"):::bucket
    classDef bucket15 stroke:#ff00ff
    class Bucket15,PgSelect129 bucket15
    Bucket16("Bucket 16 (listItem)<br />ROOT __Item{16}ᐸ129ᐳ[130]"):::bucket
    classDef bucket16 stroke:#f5deb3
    class Bucket16,__Item130,PgSelectSingle131 bucket16
    Bucket17("Bucket 17 (nullableBoundary)<br />Deps: 131<br /><br />ROOT PgSelectSingle{16}ᐸletter_descriptionsᐳ[131]"):::bucket
    classDef bucket17 stroke:#696969
    class Bucket17,PgClassExpression132,PgClassExpression133,PgClassExpression134,PgClassExpression135 bucket17
    Bucket0 --> Bucket1 & Bucket4 & Bucket7 & Bucket10 & Bucket11 & Bucket12 & Bucket15
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket7 --> Bucket8
    Bucket8 --> Bucket9
    Bucket12 --> Bucket13
    Bucket13 --> Bucket14
    Bucket15 --> Bucket16
    Bucket16 --> Bucket17
    classDef unary fill:#fafffa,borderWidth:8px
    class Object17,PgSelect67,PgSelect78,Access15,Access16,First71,PgSelectSingle72,First82,PgSelectSingle83,__Value2,__Value4,Connection18,Connection38,Connection58,Connection104,Connection128,Constant136,Constant138,PgSelect19,PgSelect39,PgSelect59,PgClassExpression73,PgClassExpression74,PgClassExpression75,PgClassExpression76,PgClassExpression84,PgClassExpression85,PgClassExpression86,PgClassExpression87,PgSelect105,PgSelect129 unary
    end
