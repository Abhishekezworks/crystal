%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/v4/enum_tables.queries"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 6, 9, 11, 14, 20, 26, 52, 61, 117, 118, 12, 46, 53, 55, 62<br />2: PgSelect[29], PgSelect[38]<br />3: PgSelectRows[34], PgSelectRows[43]<br />ᐳ: 33, 36, 42, 45"):::bucket
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 12, 14<br /><br />ROOT Connectionᐸ8ᐳ[14]<br />1: PgSelect[64]<br />2: PgSelectRows[82]"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 12, 20<br /><br />ROOT Connectionᐸ17ᐳ[20]<br />1: PgSelect[66]<br />2: PgSelectRows[85]"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 12, 26<br /><br />ROOT Connectionᐸ23ᐳ[26]<br />1: PgSelect[68]<br />2: PgSelectRows[88]"):::bucket
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 36<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[36]"):::bucket
    Bucket5("Bucket 5 (nullableBoundary)<br />Deps: 45<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[45]"):::bucket
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 12, 53, 52<br /><br />ROOT Connectionᐸ49ᐳ[52]<br />1: PgSelect[78]<br />2: PgSelectRows[91]"):::bucket
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 12, 62, 61<br /><br />ROOT Connectionᐸ58ᐳ[61]<br />1: PgSelect[80]<br />2: PgSelectRows[94]"):::bucket
    Bucket8("Bucket 8 (listItem)<br /><br />ROOT __Item{8}ᐸ82ᐳ[83]"):::bucket
    Bucket9("Bucket 9 (listItem)<br /><br />ROOT __Item{9}ᐸ85ᐳ[86]"):::bucket
    Bucket10("Bucket 10 (listItem)<br /><br />ROOT __Item{10}ᐸ88ᐳ[89]"):::bucket
    Bucket11("Bucket 11 (listItem)<br /><br />ROOT __Item{11}ᐸ91ᐳ[92]"):::bucket
    Bucket12("Bucket 12 (listItem)<br /><br />ROOT __Item{12}ᐸ94ᐳ[95]"):::bucket
    Bucket13("Bucket 13 (nullableBoundary)<br />Deps: 84<br /><br />ROOT PgSelectSingle{8}ᐸletter_descriptionsᐳ[84]"):::bucket
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 87<br /><br />ROOT PgSelectSingle{9}ᐸletter_descriptionsᐳ[87]"):::bucket
    Bucket15("Bucket 15 (nullableBoundary)<br />Deps: 90<br /><br />ROOT PgSelectSingle{10}ᐸletter_descriptionsᐳ[90]"):::bucket
    Bucket16("Bucket 16 (nullableBoundary)<br />Deps: 93<br /><br />ROOT PgSelectSingle{11}ᐸletter_descriptionsᐳ[93]"):::bucket
    Bucket17("Bucket 17 (nullableBoundary)<br />Deps: 96<br /><br />ROOT PgSelectSingle{12}ᐸletter_descriptionsᐳ[96]"):::bucket
    end
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7
    Bucket1 --> Bucket8
    Bucket2 --> Bucket9
    Bucket3 --> Bucket10
    Bucket6 --> Bucket11
    Bucket7 --> Bucket12
    Bucket8 --> Bucket13
    Bucket9 --> Bucket14
    Bucket10 --> Bucket15
    Bucket11 --> Bucket16
    Bucket12 --> Bucket17

    %% plan dependencies
    Object12{{"Object[12∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access11{{"Access[11∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access11 --> Object12
    PgSelect29[["PgSelect[29∈0] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Constant117{{"Constant[117∈0] ➊<br />ᐸ'B'ᐳ"}}:::plan
    Object12 & Constant117 --> PgSelect29
    PgSelect38[["PgSelect[38∈0] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Constant117 --> PgSelect38
    __InputObject46{{"__InputObject[46∈0] ➊"}}:::plan
    Constant118{{"Constant[118∈0] ➊<br />ᐸ'C'ᐳ"}}:::plan
    Constant118 --> __InputObject46
    __InputObject55{{"__InputObject[55∈0] ➊"}}:::plan
    Constant118 --> __InputObject55
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access11
    First33{{"First[33∈0] ➊"}}:::plan
    PgSelectRows34[["PgSelectRows[34∈0] ➊"]]:::plan
    PgSelectRows34 --> First33
    PgSelect29 --> PgSelectRows34
    PgSelectSingle36{{"PgSelectSingle[36∈0] ➊<br />ᐸletter_descriptionsᐳ"}}:::plan
    First33 --> PgSelectSingle36
    First42{{"First[42∈0] ➊"}}:::plan
    PgSelectRows43[["PgSelectRows[43∈0] ➊"]]:::plan
    PgSelectRows43 --> First42
    PgSelect38 --> PgSelectRows43
    PgSelectSingle45{{"PgSelectSingle[45∈0] ➊<br />ᐸletter_descriptionsᐳ"}}:::plan
    First42 --> PgSelectSingle45
    ApplyInput53{{"ApplyInput[53∈0] ➊"}}:::plan
    __InputObject46 --> ApplyInput53
    ApplyInput62{{"ApplyInput[62∈0] ➊"}}:::plan
    __InputObject55 --> ApplyInput62
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Connection14{{"Connection[14∈0] ➊<br />ᐸ8ᐳ"}}:::plan
    Connection20{{"Connection[20∈0] ➊<br />ᐸ17ᐳ"}}:::plan
    Connection26{{"Connection[26∈0] ➊<br />ᐸ23ᐳ"}}:::plan
    Connection52{{"Connection[52∈0] ➊<br />ᐸ49ᐳ"}}:::plan
    Connection61{{"Connection[61∈0] ➊<br />ᐸ58ᐳ"}}:::plan
    PgSelect64[["PgSelect[64∈1] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Connection14 --> PgSelect64
    PgSelectRows82[["PgSelectRows[82∈1] ➊"]]:::plan
    PgSelect64 --> PgSelectRows82
    __Item83[/"__Item[83∈8]<br />ᐸ82ᐳ"\]:::itemplan
    PgSelectRows82 ==> __Item83
    PgSelectSingle84{{"PgSelectSingle[84∈8]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item83 --> PgSelectSingle84
    PgClassExpression97{{"PgClassExpression[97∈13]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle84 --> PgClassExpression97
    PgClassExpression98{{"PgClassExpression[98∈13]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle84 --> PgClassExpression98
    PgClassExpression99{{"PgClassExpression[99∈13]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle84 --> PgClassExpression99
    PgClassExpression100{{"PgClassExpression[100∈13]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle84 --> PgClassExpression100
    PgSelect66[["PgSelect[66∈2] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Connection20 --> PgSelect66
    PgSelectRows85[["PgSelectRows[85∈2] ➊"]]:::plan
    PgSelect66 --> PgSelectRows85
    __Item86[/"__Item[86∈9]<br />ᐸ85ᐳ"\]:::itemplan
    PgSelectRows85 ==> __Item86
    PgSelectSingle87{{"PgSelectSingle[87∈9]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item86 --> PgSelectSingle87
    PgClassExpression101{{"PgClassExpression[101∈14]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle87 --> PgClassExpression101
    PgClassExpression102{{"PgClassExpression[102∈14]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle87 --> PgClassExpression102
    PgClassExpression103{{"PgClassExpression[103∈14]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle87 --> PgClassExpression103
    PgClassExpression104{{"PgClassExpression[104∈14]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle87 --> PgClassExpression104
    PgSelect68[["PgSelect[68∈3] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & Connection26 --> PgSelect68
    PgSelectRows88[["PgSelectRows[88∈3] ➊"]]:::plan
    PgSelect68 --> PgSelectRows88
    __Item89[/"__Item[89∈10]<br />ᐸ88ᐳ"\]:::itemplan
    PgSelectRows88 ==> __Item89
    PgSelectSingle90{{"PgSelectSingle[90∈10]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item89 --> PgSelectSingle90
    PgClassExpression105{{"PgClassExpression[105∈15]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle90 --> PgClassExpression105
    PgClassExpression106{{"PgClassExpression[106∈15]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle90 --> PgClassExpression106
    PgClassExpression107{{"PgClassExpression[107∈15]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle90 --> PgClassExpression107
    PgClassExpression108{{"PgClassExpression[108∈15]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle90 --> PgClassExpression108
    PgClassExpression70{{"PgClassExpression[70∈4] ➊<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle36 --> PgClassExpression70
    PgClassExpression71{{"PgClassExpression[71∈4] ➊<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle36 --> PgClassExpression71
    PgClassExpression72{{"PgClassExpression[72∈4] ➊<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle36 --> PgClassExpression72
    PgClassExpression73{{"PgClassExpression[73∈4] ➊<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle36 --> PgClassExpression73
    PgClassExpression74{{"PgClassExpression[74∈5] ➊<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle45 --> PgClassExpression74
    PgClassExpression75{{"PgClassExpression[75∈5] ➊<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle45 --> PgClassExpression75
    PgClassExpression76{{"PgClassExpression[76∈5] ➊<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle45 --> PgClassExpression76
    PgClassExpression77{{"PgClassExpression[77∈5] ➊<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle45 --> PgClassExpression77
    PgSelect78[["PgSelect[78∈6] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & ApplyInput53 & Connection52 --> PgSelect78
    PgSelectRows91[["PgSelectRows[91∈6] ➊"]]:::plan
    PgSelect78 --> PgSelectRows91
    __Item92[/"__Item[92∈11]<br />ᐸ91ᐳ"\]:::itemplan
    PgSelectRows91 ==> __Item92
    PgSelectSingle93{{"PgSelectSingle[93∈11]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item92 --> PgSelectSingle93
    PgClassExpression109{{"PgClassExpression[109∈16]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle93 --> PgClassExpression109
    PgClassExpression110{{"PgClassExpression[110∈16]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle93 --> PgClassExpression110
    PgClassExpression111{{"PgClassExpression[111∈16]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle93 --> PgClassExpression111
    PgClassExpression112{{"PgClassExpression[112∈16]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle93 --> PgClassExpression112
    PgSelect80[["PgSelect[80∈7] ➊<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object12 & ApplyInput62 & Connection61 --> PgSelect80
    PgSelectRows94[["PgSelectRows[94∈7] ➊"]]:::plan
    PgSelect80 --> PgSelectRows94
    __Item95[/"__Item[95∈12]<br />ᐸ94ᐳ"\]:::itemplan
    PgSelectRows94 ==> __Item95
    PgSelectSingle96{{"PgSelectSingle[96∈12]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item95 --> PgSelectSingle96
    PgClassExpression113{{"PgClassExpression[113∈17]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle96 --> PgClassExpression113
    PgClassExpression114{{"PgClassExpression[114∈17]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle96 --> PgClassExpression114
    PgClassExpression115{{"PgClassExpression[115∈17]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle96 --> PgClassExpression115
    PgClassExpression116{{"PgClassExpression[116∈17]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle96 --> PgClassExpression116

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Access9,Access11,Object12,Connection14,Connection20,Connection26,PgSelect29,First33,PgSelectRows34,PgSelectSingle36,PgSelect38,First42,PgSelectRows43,PgSelectSingle45,__InputObject46,Connection52,ApplyInput53,__InputObject55,Connection61,ApplyInput62,Constant117,Constant118 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect64,PgSelectRows82 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect66,PgSelectRows85 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgSelect68,PgSelectRows88 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgClassExpression70,PgClassExpression71,PgClassExpression72,PgClassExpression73 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression74,PgClassExpression75,PgClassExpression76,PgClassExpression77 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect78,PgSelectRows91 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect80,PgSelectRows94 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item83,PgSelectSingle84 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item86,PgSelectSingle87 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,__Item89,PgSelectSingle90 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,__Item92,PgSelectSingle93 bucket11
    classDef bucket12 stroke:#4169e1
    class Bucket12,__Item95,PgSelectSingle96 bucket12
    classDef bucket13 stroke:#3cb371
    class Bucket13,PgClassExpression97,PgClassExpression98,PgClassExpression99,PgClassExpression100 bucket13
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgClassExpression101,PgClassExpression102,PgClassExpression103,PgClassExpression104 bucket14
    classDef bucket15 stroke:#ff00ff
    class Bucket15,PgClassExpression105,PgClassExpression106,PgClassExpression107,PgClassExpression108 bucket15
    classDef bucket16 stroke:#f5deb3
    class Bucket16,PgClassExpression109,PgClassExpression110,PgClassExpression111,PgClassExpression112 bucket16
    classDef bucket17 stroke:#696969
    class Bucket17,PgClassExpression113,PgClassExpression114,PgClassExpression115,PgClassExpression116 bucket17

