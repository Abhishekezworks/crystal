%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object18{{"Object[18∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access16{{"Access[16∈0]<br />ᐸ3.pgSettingsᐳ"}}:::plan
    Access17{{"Access[17∈0]<br />ᐸ3.withPgClientᐳ"}}:::plan
    Access16 & Access17 --> Object18
    PgSelect68[["PgSelect[68∈0]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Constant137{{"Constant[137∈0]<br />ᐸ'B'ᐳ"}}:::plan
    Object18 & Constant137 --> PgSelect68
    PgSelect79[["PgSelect[79∈0]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object18 & Constant137 --> PgSelect79
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value3 --> Access16
    __Value3 --> Access17
    First72{{"First[72∈0]"}}:::plan
    PgSelect68 --> First72
    PgSelectSingle73{{"PgSelectSingle[73∈0]<br />ᐸletter_descriptionsᐳ"}}:::plan
    First72 --> PgSelectSingle73
    First83{{"First[83∈0]"}}:::plan
    PgSelect79 --> First83
    PgSelectSingle84{{"PgSelectSingle[84∈0]<br />ᐸletter_descriptionsᐳ"}}:::plan
    First83 --> PgSelectSingle84
    __Value0["__Value[0∈0]"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    Connection19{{"Connection[19∈0]<br />ᐸ15ᐳ"}}:::plan
    Connection39{{"Connection[39∈0]<br />ᐸ35ᐳ"}}:::plan
    Connection59{{"Connection[59∈0]<br />ᐸ55ᐳ"}}:::plan
    Connection105{{"Connection[105∈0]<br />ᐸ101ᐳ"}}:::plan
    Connection129{{"Connection[129∈0]<br />ᐸ125ᐳ"}}:::plan
    Constant139{{"Constant[139∈0]<br />ᐸ'C'ᐳ"}}:::plan
    PgSelect20[["PgSelect[20∈1]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object18 & Connection19 --> PgSelect20
    __Item21[/"__Item[21∈2]<br />ᐸ20ᐳ"\]:::itemplan
    PgSelect20 ==> __Item21
    PgSelectSingle22{{"PgSelectSingle[22∈2]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item21 --> PgSelectSingle22
    PgClassExpression23{{"PgClassExpression[23∈3]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression23
    PgClassExpression24{{"PgClassExpression[24∈3]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression24
    PgClassExpression25{{"PgClassExpression[25∈3]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression25
    PgClassExpression26{{"PgClassExpression[26∈3]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression26
    PgSelect40[["PgSelect[40∈4]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object18 & Connection39 --> PgSelect40
    __Item41[/"__Item[41∈5]<br />ᐸ40ᐳ"\]:::itemplan
    PgSelect40 ==> __Item41
    PgSelectSingle42{{"PgSelectSingle[42∈5]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item41 --> PgSelectSingle42
    PgClassExpression43{{"PgClassExpression[43∈6]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle42 --> PgClassExpression43
    PgClassExpression44{{"PgClassExpression[44∈6]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle42 --> PgClassExpression44
    PgClassExpression45{{"PgClassExpression[45∈6]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle42 --> PgClassExpression45
    PgClassExpression46{{"PgClassExpression[46∈6]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle42 --> PgClassExpression46
    PgSelect60[["PgSelect[60∈7]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object18 & Connection59 --> PgSelect60
    __Item61[/"__Item[61∈8]<br />ᐸ60ᐳ"\]:::itemplan
    PgSelect60 ==> __Item61
    PgSelectSingle62{{"PgSelectSingle[62∈8]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item61 --> PgSelectSingle62
    PgClassExpression63{{"PgClassExpression[63∈9]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression63
    PgClassExpression64{{"PgClassExpression[64∈9]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression64
    PgClassExpression65{{"PgClassExpression[65∈9]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression65
    PgClassExpression66{{"PgClassExpression[66∈9]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle62 --> PgClassExpression66
    PgClassExpression74{{"PgClassExpression[74∈10]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle73 --> PgClassExpression74
    PgClassExpression75{{"PgClassExpression[75∈10]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle73 --> PgClassExpression75
    PgClassExpression76{{"PgClassExpression[76∈10]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle73 --> PgClassExpression76
    PgClassExpression77{{"PgClassExpression[77∈10]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle73 --> PgClassExpression77
    PgClassExpression85{{"PgClassExpression[85∈11]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle84 --> PgClassExpression85
    PgClassExpression86{{"PgClassExpression[86∈11]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle84 --> PgClassExpression86
    PgClassExpression87{{"PgClassExpression[87∈11]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle84 --> PgClassExpression87
    PgClassExpression88{{"PgClassExpression[88∈11]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle84 --> PgClassExpression88
    PgSelect106[["PgSelect[106∈12]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object18 & Constant139 & Connection105 --> PgSelect106
    __Item107[/"__Item[107∈13]<br />ᐸ106ᐳ"\]:::itemplan
    PgSelect106 ==> __Item107
    PgSelectSingle108{{"PgSelectSingle[108∈13]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item107 --> PgSelectSingle108
    PgClassExpression109{{"PgClassExpression[109∈14]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle108 --> PgClassExpression109
    PgClassExpression110{{"PgClassExpression[110∈14]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle108 --> PgClassExpression110
    PgClassExpression111{{"PgClassExpression[111∈14]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle108 --> PgClassExpression111
    PgClassExpression112{{"PgClassExpression[112∈14]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle108 --> PgClassExpression112
    PgSelect130[["PgSelect[130∈15]<br />ᐸletter_descriptionsᐳ"]]:::plan
    Object18 & Constant139 & Connection129 --> PgSelect130
    __Item131[/"__Item[131∈16]<br />ᐸ130ᐳ"\]:::itemplan
    PgSelect130 ==> __Item131
    PgSelectSingle132{{"PgSelectSingle[132∈16]<br />ᐸletter_descriptionsᐳ"}}:::plan
    __Item131 --> PgSelectSingle132
    PgClassExpression133{{"PgClassExpression[133∈17]<br />ᐸ__letter_d...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle132 --> PgClassExpression133
    PgClassExpression134{{"PgClassExpression[134∈17]<br />ᐸ__letter_d..._.”letter”ᐳ"}}:::plan
    PgSelectSingle132 --> PgClassExpression134
    PgClassExpression135{{"PgClassExpression[135∈17]<br />ᐸ__letter_d..._via_view”ᐳ"}}:::plan
    PgSelectSingle132 --> PgClassExpression135
    PgClassExpression136{{"PgClassExpression[136∈17]<br />ᐸ__letter_d...scription”ᐳ"}}:::plan
    PgSelectSingle132 --> PgClassExpression136

    %% define steps

    subgraph "Buckets for queries/v4/enum_tables.queries"
    Bucket0("Bucket 0 (root)<br />1: <br />ᐳ: 16, 17, 19, 39, 59, 105, 129, 137, 139, 18<br />2: PgSelect[68], PgSelect[79]<br />ᐳ: 72, 73, 83, 84"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value3,__Value5,Access16,Access17,Object18,Connection19,Connection39,Connection59,PgSelect68,First72,PgSelectSingle73,PgSelect79,First83,PgSelectSingle84,Connection105,Connection129,Constant137,Constant139 bucket0
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 18, 19<br /><br />ROOT Connectionᐸ15ᐳ[19]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect20 bucket1
    Bucket2("Bucket 2 (listItem)<br />ROOT __Item{2}ᐸ20ᐳ[21]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item21,PgSelectSingle22 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 22<br /><br />ROOT PgSelectSingle{2}ᐸletter_descriptionsᐳ[22]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression23,PgClassExpression24,PgClassExpression25,PgClassExpression26 bucket3
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 18, 39<br /><br />ROOT Connectionᐸ35ᐳ[39]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect40 bucket4
    Bucket5("Bucket 5 (listItem)<br />ROOT __Item{5}ᐸ40ᐳ[41]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item41,PgSelectSingle42 bucket5
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 42<br /><br />ROOT PgSelectSingle{5}ᐸletter_descriptionsᐳ[42]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression43,PgClassExpression44,PgClassExpression45,PgClassExpression46 bucket6
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 18, 59<br /><br />ROOT Connectionᐸ55ᐳ[59]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,PgSelect60 bucket7
    Bucket8("Bucket 8 (listItem)<br />ROOT __Item{8}ᐸ60ᐳ[61]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item61,PgSelectSingle62 bucket8
    Bucket9("Bucket 9 (nullableBoundary)<br />Deps: 62<br /><br />ROOT PgSelectSingle{8}ᐸletter_descriptionsᐳ[62]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgClassExpression63,PgClassExpression64,PgClassExpression65,PgClassExpression66 bucket9
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 73<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[73]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression74,PgClassExpression75,PgClassExpression76,PgClassExpression77 bucket10
    Bucket11("Bucket 11 (nullableBoundary)<br />Deps: 84<br /><br />ROOT PgSelectSingleᐸletter_descriptionsᐳ[84]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgClassExpression85,PgClassExpression86,PgClassExpression87,PgClassExpression88 bucket11
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 18, 139, 105<br /><br />ROOT Connectionᐸ101ᐳ[105]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect106 bucket12
    Bucket13("Bucket 13 (listItem)<br />ROOT __Item{13}ᐸ106ᐳ[107]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13,__Item107,PgSelectSingle108 bucket13
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 108<br /><br />ROOT PgSelectSingle{13}ᐸletter_descriptionsᐳ[108]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgClassExpression109,PgClassExpression110,PgClassExpression111,PgClassExpression112 bucket14
    Bucket15("Bucket 15 (nullableBoundary)<br />Deps: 18, 139, 129<br /><br />ROOT Connectionᐸ125ᐳ[129]"):::bucket
    classDef bucket15 stroke:#ff00ff
    class Bucket15,PgSelect130 bucket15
    Bucket16("Bucket 16 (listItem)<br />ROOT __Item{16}ᐸ130ᐳ[131]"):::bucket
    classDef bucket16 stroke:#f5deb3
    class Bucket16,__Item131,PgSelectSingle132 bucket16
    Bucket17("Bucket 17 (nullableBoundary)<br />Deps: 132<br /><br />ROOT PgSelectSingle{16}ᐸletter_descriptionsᐳ[132]"):::bucket
    classDef bucket17 stroke:#696969
    class Bucket17,PgClassExpression133,PgClassExpression134,PgClassExpression135,PgClassExpression136 bucket17
    Bucket0 --> Bucket1 & Bucket4 & Bucket7 & Bucket10 & Bucket11 & Bucket12 & Bucket15
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket4 --> Bucket5
    Bucket5 --> Bucket6
    Bucket7 --> Bucket8
    Bucket8 --> Bucket9
    Bucket12 --> Bucket13
    Bucket13 --> Bucket14
    Bucket15 --> Bucket16
    Bucket16 --> Bucket17
    classDef unary fill:#fafffa,borderWidth:8px
    class Object18,PgSelect68,PgSelect79,Access16,Access17,First72,PgSelectSingle73,First83,PgSelectSingle84,__Value0,__Value3,__Value5,Connection19,Connection39,Connection59,Connection105,Connection129,Constant137,Constant139,PgSelect20,PgSelect40,PgSelect60,PgClassExpression74,PgClassExpression75,PgClassExpression76,PgClassExpression77,PgClassExpression85,PgClassExpression86,PgClassExpression87,PgClassExpression88,PgSelect106,PgSelect130 unary
    end
