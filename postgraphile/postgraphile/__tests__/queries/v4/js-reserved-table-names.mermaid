%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/v4/js-reserved-table-names"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 8, 10, 156, 157, 158, 159, 160, 161, 162, 163, 164, 11<br />2: 7, 14, 23, 32, 40, 44, 53, 61, 65, 74, 82, 86, 95, 104<br />3: 19, 28, 37, 49, 58, 70, 79, 91, 100, 109, 112, 115, 118, 121<br />ᐳ: 18, 21, 27, 30, 36, 39, 48, 51, 57, 60, 69, 72, 78, 81, 90, 93, 99, 102, 108, 111"):::bucket
    Bucket1("Bucket 1 (listItem)<br /><br />ROOT __Item{1}ᐸ112ᐳ[113]"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 21<br /><br />ROOT PgSelectSingleᐸconstructorᐳ[21]"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 30<br /><br />ROOT PgSelectSingleᐸconstructorᐳ[30]"):::bucket
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 39<br /><br />ROOT PgSelectSingleᐸconstructorᐳ[39]"):::bucket
    Bucket5("Bucket 5 (listItem)<br /><br />ROOT __Item{5}ᐸ115ᐳ[116]"):::bucket
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 51<br /><br />ROOT PgSelectSingleᐸyieldᐳ[51]"):::bucket
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 60<br /><br />ROOT PgSelectSingleᐸyieldᐳ[60]"):::bucket
    Bucket8("Bucket 8 (listItem)<br /><br />ROOT __Item{8}ᐸ118ᐳ[119]"):::bucket
    Bucket9("Bucket 9 (nullableBoundary)<br />Deps: 72<br /><br />ROOT PgSelectSingleᐸ__proto__ᐳ[72]"):::bucket
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 81<br /><br />ROOT PgSelectSingleᐸ__proto__ᐳ[81]"):::bucket
    Bucket11("Bucket 11 (listItem)<br /><br />ROOT __Item{11}ᐸ121ᐳ[122]"):::bucket
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 93<br /><br />ROOT PgSelectSingleᐸnullᐳ[93]"):::bucket
    Bucket13("Bucket 13 (nullableBoundary)<br />Deps: 102<br /><br />ROOT PgSelectSingleᐸnullᐳ[102]"):::bucket
    Bucket14("Bucket 14 (nullableBoundary)<br />Deps: 111<br /><br />ROOT PgSelectSingleᐸnullᐳ[111]"):::bucket
    end
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7 & Bucket8 & Bucket9 & Bucket10 & Bucket11 & Bucket12 & Bucket13 & Bucket14

    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access8{{"Access[8∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access8 & Access10 --> Object11
    PgSelect14[["PgSelect[14∈0] ➊<br />ᐸconstructorᐳ"]]:::plan
    Constant156{{"Constant[156∈0] ➊<br />ᐸ'Copper Wire'ᐳ"}}:::plan
    Object11 & Constant156 --> PgSelect14
    PgSelect23[["PgSelect[23∈0] ➊<br />ᐸconstructorᐳ"]]:::plan
    Constant157{{"Constant[157∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Object11 & Constant157 --> PgSelect23
    PgSelect32[["PgSelect[32∈0] ➊<br />ᐸconstructorᐳ"]]:::plan
    Constant158{{"Constant[158∈0] ➊<br />ᐸ'Iron Mine'ᐳ"}}:::plan
    Object11 & Constant158 --> PgSelect32
    PgSelect44[["PgSelect[44∈0] ➊<br />ᐸyieldᐳ"]]:::plan
    Constant159{{"Constant[159∈0] ➊<br />ᐸ'UK'ᐳ"}}:::plan
    Object11 & Constant159 --> PgSelect44
    PgSelect53[["PgSelect[53∈0] ➊<br />ᐸyieldᐳ"]]:::plan
    Object11 & Constant157 --> PgSelect53
    PgSelect65[["PgSelect[65∈0] ➊<br />ᐸ__proto__ᐳ"]]:::plan
    Constant160{{"Constant[160∈0] ➊<br />ᐸ1ᐳ"}}:::plan
    Object11 & Constant160 --> PgSelect65
    PgSelect74[["PgSelect[74∈0] ➊<br />ᐸ__proto__ᐳ"]]:::plan
    Constant161{{"Constant[161∈0] ➊<br />ᐸ'VCS'ᐳ"}}:::plan
    Object11 & Constant161 --> PgSelect74
    PgSelect86[["PgSelect[86∈0] ➊<br />ᐸnullᐳ"]]:::plan
    Constant162{{"Constant[162∈0] ➊<br />ᐸ'10 am'ᐳ"}}:::plan
    Object11 & Constant162 --> PgSelect86
    PgSelect95[["PgSelect[95∈0] ➊<br />ᐸnullᐳ"]]:::plan
    Constant163{{"Constant[163∈0] ➊<br />ᐸ'flat'ᐳ"}}:::plan
    Object11 & Constant163 --> PgSelect95
    PgSelect104[["PgSelect[104∈0] ➊<br />ᐸnullᐳ"]]:::plan
    Constant164{{"Constant[164∈0] ➊<br />ᐸ3ᐳ"}}:::plan
    Object11 & Constant164 --> PgSelect104
    PgSelect7[["PgSelect[7∈0] ➊<br />ᐸconstructorᐳ"]]:::plan
    Object11 --> PgSelect7
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access8
    __Value2 --> Access10
    First18{{"First[18∈0] ➊"}}:::plan
    PgSelectRows19[["PgSelectRows[19∈0] ➊"]]:::plan
    PgSelectRows19 --> First18
    PgSelect14 --> PgSelectRows19
    PgSelectSingle21{{"PgSelectSingle[21∈0] ➊<br />ᐸconstructorᐳ"}}:::plan
    First18 --> PgSelectSingle21
    First27{{"First[27∈0] ➊"}}:::plan
    PgSelectRows28[["PgSelectRows[28∈0] ➊"]]:::plan
    PgSelectRows28 --> First27
    PgSelect23 --> PgSelectRows28
    PgSelectSingle30{{"PgSelectSingle[30∈0] ➊<br />ᐸconstructorᐳ"}}:::plan
    First27 --> PgSelectSingle30
    First36{{"First[36∈0] ➊"}}:::plan
    PgSelectRows37[["PgSelectRows[37∈0] ➊"]]:::plan
    PgSelectRows37 --> First36
    PgSelect32 --> PgSelectRows37
    PgSelectSingle39{{"PgSelectSingle[39∈0] ➊<br />ᐸconstructorᐳ"}}:::plan
    First36 --> PgSelectSingle39
    PgSelect40[["PgSelect[40∈0] ➊<br />ᐸyieldᐳ"]]:::plan
    Object11 --> PgSelect40
    First48{{"First[48∈0] ➊"}}:::plan
    PgSelectRows49[["PgSelectRows[49∈0] ➊"]]:::plan
    PgSelectRows49 --> First48
    PgSelect44 --> PgSelectRows49
    PgSelectSingle51{{"PgSelectSingle[51∈0] ➊<br />ᐸyieldᐳ"}}:::plan
    First48 --> PgSelectSingle51
    First57{{"First[57∈0] ➊"}}:::plan
    PgSelectRows58[["PgSelectRows[58∈0] ➊"]]:::plan
    PgSelectRows58 --> First57
    PgSelect53 --> PgSelectRows58
    PgSelectSingle60{{"PgSelectSingle[60∈0] ➊<br />ᐸyieldᐳ"}}:::plan
    First57 --> PgSelectSingle60
    PgSelect61[["PgSelect[61∈0] ➊<br />ᐸ__proto__ᐳ"]]:::plan
    Object11 --> PgSelect61
    First69{{"First[69∈0] ➊"}}:::plan
    PgSelectRows70[["PgSelectRows[70∈0] ➊"]]:::plan
    PgSelectRows70 --> First69
    PgSelect65 --> PgSelectRows70
    PgSelectSingle72{{"PgSelectSingle[72∈0] ➊<br />ᐸ__proto__ᐳ"}}:::plan
    First69 --> PgSelectSingle72
    First78{{"First[78∈0] ➊"}}:::plan
    PgSelectRows79[["PgSelectRows[79∈0] ➊"]]:::plan
    PgSelectRows79 --> First78
    PgSelect74 --> PgSelectRows79
    PgSelectSingle81{{"PgSelectSingle[81∈0] ➊<br />ᐸ__proto__ᐳ"}}:::plan
    First78 --> PgSelectSingle81
    PgSelect82[["PgSelect[82∈0] ➊<br />ᐸnullᐳ"]]:::plan
    Object11 --> PgSelect82
    First90{{"First[90∈0] ➊"}}:::plan
    PgSelectRows91[["PgSelectRows[91∈0] ➊"]]:::plan
    PgSelectRows91 --> First90
    PgSelect86 --> PgSelectRows91
    PgSelectSingle93{{"PgSelectSingle[93∈0] ➊<br />ᐸnullᐳ"}}:::plan
    First90 --> PgSelectSingle93
    First99{{"First[99∈0] ➊"}}:::plan
    PgSelectRows100[["PgSelectRows[100∈0] ➊"]]:::plan
    PgSelectRows100 --> First99
    PgSelect95 --> PgSelectRows100
    PgSelectSingle102{{"PgSelectSingle[102∈0] ➊<br />ᐸnullᐳ"}}:::plan
    First99 --> PgSelectSingle102
    First108{{"First[108∈0] ➊"}}:::plan
    PgSelectRows109[["PgSelectRows[109∈0] ➊"]]:::plan
    PgSelectRows109 --> First108
    PgSelect104 --> PgSelectRows109
    PgSelectSingle111{{"PgSelectSingle[111∈0] ➊<br />ᐸnullᐳ"}}:::plan
    First108 --> PgSelectSingle111
    PgSelectRows112[["PgSelectRows[112∈0] ➊"]]:::plan
    PgSelect7 --> PgSelectRows112
    PgSelectRows115[["PgSelectRows[115∈0] ➊"]]:::plan
    PgSelect40 --> PgSelectRows115
    PgSelectRows118[["PgSelectRows[118∈0] ➊"]]:::plan
    PgSelect61 --> PgSelectRows118
    PgSelectRows121[["PgSelectRows[121∈0] ➊"]]:::plan
    PgSelect82 --> PgSelectRows121
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    __Item113[/"__Item[113∈1]<br />ᐸ112ᐳ"\]:::itemplan
    PgSelectRows112 ==> __Item113
    PgSelectSingle114{{"PgSelectSingle[114∈1]<br />ᐸconstructorᐳ"}}:::plan
    __Item113 --> PgSelectSingle114
    PgClassExpression144{{"PgClassExpression[144∈1]<br />ᐸ__constructor__.”name”ᐳ"}}:::plan
    PgSelectSingle114 --> PgClassExpression144
    PgClassExpression145{{"PgClassExpression[145∈1]<br />ᐸ__construc..._.”export”ᐳ"}}:::plan
    PgSelectSingle114 --> PgClassExpression145
    PgClassExpression146{{"PgClassExpression[146∈1]<br />ᐸ__constructor__.”id”ᐳ"}}:::plan
    PgSelectSingle114 --> PgClassExpression146
    PgClassExpression124{{"PgClassExpression[124∈2] ➊<br />ᐸ__constructor__.”name”ᐳ"}}:::plan
    PgSelectSingle21 --> PgClassExpression124
    PgClassExpression125{{"PgClassExpression[125∈2] ➊<br />ᐸ__constructor__.”id”ᐳ"}}:::plan
    PgSelectSingle21 --> PgClassExpression125
    PgClassExpression126{{"PgClassExpression[126∈3] ➊<br />ᐸ__construc..._.”export”ᐳ"}}:::plan
    PgSelectSingle30 --> PgClassExpression126
    PgClassExpression127{{"PgClassExpression[127∈3] ➊<br />ᐸ__constructor__.”name”ᐳ"}}:::plan
    PgSelectSingle30 --> PgClassExpression127
    PgClassExpression128{{"PgClassExpression[128∈4] ➊<br />ᐸ__construc..._.”export”ᐳ"}}:::plan
    PgSelectSingle39 --> PgClassExpression128
    PgClassExpression129{{"PgClassExpression[129∈4] ➊<br />ᐸ__constructor__.”id”ᐳ"}}:::plan
    PgSelectSingle39 --> PgClassExpression129
    __Item116[/"__Item[116∈5]<br />ᐸ115ᐳ"\]:::itemplan
    PgSelectRows115 ==> __Item116
    PgSelectSingle117{{"PgSelectSingle[117∈5]<br />ᐸyieldᐳ"}}:::plan
    __Item116 --> PgSelectSingle117
    PgClassExpression147{{"PgClassExpression[147∈5]<br />ᐸ__yield__.”crop”ᐳ"}}:::plan
    PgSelectSingle117 --> PgClassExpression147
    PgClassExpression148{{"PgClassExpression[148∈5]<br />ᐸ__yield__.”export”ᐳ"}}:::plan
    PgSelectSingle117 --> PgClassExpression148
    PgClassExpression149{{"PgClassExpression[149∈5]<br />ᐸ__yield__.”id”ᐳ"}}:::plan
    PgSelectSingle117 --> PgClassExpression149
    PgClassExpression130{{"PgClassExpression[130∈6] ➊<br />ᐸ__yield__.”crop”ᐳ"}}:::plan
    PgSelectSingle51 --> PgClassExpression130
    PgClassExpression131{{"PgClassExpression[131∈6] ➊<br />ᐸ__yield__.”id”ᐳ"}}:::plan
    PgSelectSingle51 --> PgClassExpression131
    PgClassExpression132{{"PgClassExpression[132∈7] ➊<br />ᐸ__yield__.”crop”ᐳ"}}:::plan
    PgSelectSingle60 --> PgClassExpression132
    PgClassExpression133{{"PgClassExpression[133∈7] ➊<br />ᐸ__yield__.”export”ᐳ"}}:::plan
    PgSelectSingle60 --> PgClassExpression133
    __Item119[/"__Item[119∈8]<br />ᐸ118ᐳ"\]:::itemplan
    PgSelectRows118 ==> __Item119
    PgSelectSingle120{{"PgSelectSingle[120∈8]<br />ᐸ__proto__ᐳ"}}:::plan
    __Item119 --> PgSelectSingle120
    PgClassExpression150{{"PgClassExpression[150∈8]<br />ᐸ__proto__.”id”ᐳ"}}:::plan
    PgSelectSingle120 --> PgClassExpression150
    PgClassExpression151{{"PgClassExpression[151∈8]<br />ᐸ__proto__.”name”ᐳ"}}:::plan
    PgSelectSingle120 --> PgClassExpression151
    PgClassExpression152{{"PgClassExpression[152∈8]<br />ᐸ__proto__.”brand”ᐳ"}}:::plan
    PgSelectSingle120 --> PgClassExpression152
    PgClassExpression134{{"PgClassExpression[134∈9] ➊<br />ᐸ__proto__.”brand”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression134
    PgClassExpression135{{"PgClassExpression[135∈9] ➊<br />ᐸ__proto__.”name”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression135
    PgClassExpression136{{"PgClassExpression[136∈10] ➊<br />ᐸ__proto__.”brand”ᐳ"}}:::plan
    PgSelectSingle81 --> PgClassExpression136
    PgClassExpression137{{"PgClassExpression[137∈10] ➊<br />ᐸ__proto__.”id”ᐳ"}}:::plan
    PgSelectSingle81 --> PgClassExpression137
    __Item122[/"__Item[122∈11]<br />ᐸ121ᐳ"\]:::itemplan
    PgSelectRows121 ==> __Item122
    PgSelectSingle123{{"PgSelectSingle[123∈11]<br />ᐸnullᐳ"}}:::plan
    __Item122 --> PgSelectSingle123
    PgClassExpression153{{"PgClassExpression[153∈11]<br />ᐸ__null__.”break”ᐳ"}}:::plan
    PgSelectSingle123 --> PgClassExpression153
    PgClassExpression154{{"PgClassExpression[154∈11]<br />ᐸ__null__.”...nProperty”ᐳ"}}:::plan
    PgSelectSingle123 --> PgClassExpression154
    PgClassExpression155{{"PgClassExpression[155∈11]<br />ᐸ__null__.”id”ᐳ"}}:::plan
    PgSelectSingle123 --> PgClassExpression155
    PgClassExpression138{{"PgClassExpression[138∈12] ➊<br />ᐸ__null__.”...nProperty”ᐳ"}}:::plan
    PgSelectSingle93 --> PgClassExpression138
    PgClassExpression139{{"PgClassExpression[139∈12] ➊<br />ᐸ__null__.”id”ᐳ"}}:::plan
    PgSelectSingle93 --> PgClassExpression139
    PgClassExpression140{{"PgClassExpression[140∈13] ➊<br />ᐸ__null__.”break”ᐳ"}}:::plan
    PgSelectSingle102 --> PgClassExpression140
    PgClassExpression141{{"PgClassExpression[141∈13] ➊<br />ᐸ__null__.”id”ᐳ"}}:::plan
    PgSelectSingle102 --> PgClassExpression141
    PgClassExpression142{{"PgClassExpression[142∈14] ➊<br />ᐸ__null__.”break”ᐳ"}}:::plan
    PgSelectSingle111 --> PgClassExpression142
    PgClassExpression143{{"PgClassExpression[143∈14] ➊<br />ᐸ__null__.”...nProperty”ᐳ"}}:::plan
    PgSelectSingle111 --> PgClassExpression143

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,PgSelect7,Access8,Access10,Object11,PgSelect14,First18,PgSelectRows19,PgSelectSingle21,PgSelect23,First27,PgSelectRows28,PgSelectSingle30,PgSelect32,First36,PgSelectRows37,PgSelectSingle39,PgSelect40,PgSelect44,First48,PgSelectRows49,PgSelectSingle51,PgSelect53,First57,PgSelectRows58,PgSelectSingle60,PgSelect61,PgSelect65,First69,PgSelectRows70,PgSelectSingle72,PgSelect74,First78,PgSelectRows79,PgSelectSingle81,PgSelect82,PgSelect86,First90,PgSelectRows91,PgSelectSingle93,PgSelect95,First99,PgSelectRows100,PgSelectSingle102,PgSelect104,First108,PgSelectRows109,PgSelectSingle111,PgSelectRows112,PgSelectRows115,PgSelectRows118,PgSelectRows121,Constant156,Constant157,Constant158,Constant159,Constant160,Constant161,Constant162,Constant163,Constant164 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item113,PgSelectSingle114,PgClassExpression144,PgClassExpression145,PgClassExpression146 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgClassExpression124,PgClassExpression125 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression126,PgClassExpression127 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgClassExpression128,PgClassExpression129 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item116,PgSelectSingle117,PgClassExpression147,PgClassExpression148,PgClassExpression149 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression130,PgClassExpression131 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgClassExpression132,PgClassExpression133 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item119,PgSelectSingle120,PgClassExpression150,PgClassExpression151,PgClassExpression152 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgClassExpression134,PgClassExpression135 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression136,PgClassExpression137 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,__Item122,PgSelectSingle123,PgClassExpression153,PgClassExpression154,PgClassExpression155 bucket11
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgClassExpression138,PgClassExpression139 bucket12
    classDef bucket13 stroke:#3cb371
    class Bucket13,PgClassExpression140,PgClassExpression141 bucket13
    classDef bucket14 stroke:#a52a2a
    class Bucket14,PgClassExpression142,PgClassExpression143 bucket14

