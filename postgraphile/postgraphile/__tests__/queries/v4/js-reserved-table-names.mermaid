%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/v4/js-reserved-table-names"
    Bucket0("Bucket 0 (root)<br /><br />1: <br />ᐳ: 8, 9, 120, 121, 122, 123, 124, 125, 126, 127, 128, 10<br />2: 7, 12, 18, 24, 29, 32, 37, 42, 45, 51, 56, 59, 65, 71<br />3: 15, 21, 27, 35, 40, 48, 54, 62, 68, 74, 76, 77, 78, 79<br />ᐳ: 14, 16, 20, 22, 26, 28, 34, 36, 39, 41, 47, 49, 53, 55, 61, 63, 67, 69, 73, 75"):::bucket
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 16<br /><br />ROOT PgSelectSingleᐸconstructorᐳ[16]"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 22<br /><br />ROOT PgSelectSingleᐸconstructorᐳ[22]"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 28<br /><br />ROOT PgSelectSingleᐸconstructorᐳ[28]"):::bucket
    Bucket4("Bucket 4 (nullableBoundary)<br />Deps: 36<br /><br />ROOT PgSelectSingleᐸyieldᐳ[36]"):::bucket
    Bucket5("Bucket 5 (nullableBoundary)<br />Deps: 41<br /><br />ROOT PgSelectSingleᐸyieldᐳ[41]"):::bucket
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 49<br /><br />ROOT PgSelectSingleᐸ__proto__ᐳ[49]"):::bucket
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 55<br /><br />ROOT PgSelectSingleᐸ__proto__ᐳ[55]"):::bucket
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 63<br /><br />ROOT PgSelectSingleᐸnullᐳ[63]"):::bucket
    Bucket9("Bucket 9 (nullableBoundary)<br />Deps: 69<br /><br />ROOT PgSelectSingleᐸnullᐳ[69]"):::bucket
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 75<br /><br />ROOT PgSelectSingleᐸnullᐳ[75]"):::bucket
    Bucket11("Bucket 11 (listItem)<br /><br />ROOT __Item{11}ᐸ76ᐳ[80]"):::bucket
    Bucket12("Bucket 12 (listItem)<br /><br />ROOT __Item{12}ᐸ77ᐳ[88]"):::bucket
    Bucket13("Bucket 13 (listItem)<br /><br />ROOT __Item{13}ᐸ78ᐳ[94]"):::bucket
    Bucket14("Bucket 14 (listItem)<br /><br />ROOT __Item{14}ᐸ79ᐳ[100]"):::bucket
    end
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7 & Bucket8 & Bucket9 & Bucket10 & Bucket11 & Bucket12 & Bucket13 & Bucket14

    %% plan dependencies
    Object10{{"Object[10∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access8{{"Access[8∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access8 & Access9 --> Object10
    PgSelect12[["PgSelect[12∈0] ➊<br />ᐸconstructorᐳ"]]:::plan
    Constant120{{"Constant[120∈0] ➊<br />ᐸ'Copper Wire'ᐳ"}}:::plan
    Object10 & Constant120 --> PgSelect12
    PgSelect18[["PgSelect[18∈0] ➊<br />ᐸconstructorᐳ"]]:::plan
    Constant121{{"Constant[121∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Object10 & Constant121 --> PgSelect18
    PgSelect24[["PgSelect[24∈0] ➊<br />ᐸconstructorᐳ"]]:::plan
    Constant122{{"Constant[122∈0] ➊<br />ᐸ'Iron Mine'ᐳ"}}:::plan
    Object10 & Constant122 --> PgSelect24
    PgSelect32[["PgSelect[32∈0] ➊<br />ᐸyieldᐳ"]]:::plan
    Constant123{{"Constant[123∈0] ➊<br />ᐸ'UK'ᐳ"}}:::plan
    Object10 & Constant123 --> PgSelect32
    PgSelect37[["PgSelect[37∈0] ➊<br />ᐸyieldᐳ"]]:::plan
    Object10 & Constant121 --> PgSelect37
    PgSelect45[["PgSelect[45∈0] ➊<br />ᐸ__proto__ᐳ"]]:::plan
    Constant124{{"Constant[124∈0] ➊<br />ᐸ1ᐳ"}}:::plan
    Object10 & Constant124 --> PgSelect45
    PgSelect51[["PgSelect[51∈0] ➊<br />ᐸ__proto__ᐳ"]]:::plan
    Constant125{{"Constant[125∈0] ➊<br />ᐸ'VCS'ᐳ"}}:::plan
    Object10 & Constant125 --> PgSelect51
    PgSelect59[["PgSelect[59∈0] ➊<br />ᐸnullᐳ"]]:::plan
    Constant126{{"Constant[126∈0] ➊<br />ᐸ'10 am'ᐳ"}}:::plan
    Object10 & Constant126 --> PgSelect59
    PgSelect65[["PgSelect[65∈0] ➊<br />ᐸnullᐳ"]]:::plan
    Constant127{{"Constant[127∈0] ➊<br />ᐸ'flat'ᐳ"}}:::plan
    Object10 & Constant127 --> PgSelect65
    PgSelect71[["PgSelect[71∈0] ➊<br />ᐸnullᐳ"]]:::plan
    Constant128{{"Constant[128∈0] ➊<br />ᐸ3ᐳ"}}:::plan
    Object10 & Constant128 --> PgSelect71
    PgSelect7[["PgSelect[7∈0] ➊<br />ᐸconstructorᐳ"]]:::plan
    Object10 --> PgSelect7
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access8
    __Value2 --> Access9
    First14{{"First[14∈0] ➊"}}:::plan
    PgSelectRows15[["PgSelectRows[15∈0] ➊"]]:::plan
    PgSelectRows15 --> First14
    PgSelect12 --> PgSelectRows15
    PgSelectSingle16{{"PgSelectSingle[16∈0] ➊<br />ᐸconstructorᐳ"}}:::plan
    First14 --> PgSelectSingle16
    First20{{"First[20∈0] ➊"}}:::plan
    PgSelectRows21[["PgSelectRows[21∈0] ➊"]]:::plan
    PgSelectRows21 --> First20
    PgSelect18 --> PgSelectRows21
    PgSelectSingle22{{"PgSelectSingle[22∈0] ➊<br />ᐸconstructorᐳ"}}:::plan
    First20 --> PgSelectSingle22
    First26{{"First[26∈0] ➊"}}:::plan
    PgSelectRows27[["PgSelectRows[27∈0] ➊"]]:::plan
    PgSelectRows27 --> First26
    PgSelect24 --> PgSelectRows27
    PgSelectSingle28{{"PgSelectSingle[28∈0] ➊<br />ᐸconstructorᐳ"}}:::plan
    First26 --> PgSelectSingle28
    PgSelect29[["PgSelect[29∈0] ➊<br />ᐸyieldᐳ"]]:::plan
    Object10 --> PgSelect29
    First34{{"First[34∈0] ➊"}}:::plan
    PgSelectRows35[["PgSelectRows[35∈0] ➊"]]:::plan
    PgSelectRows35 --> First34
    PgSelect32 --> PgSelectRows35
    PgSelectSingle36{{"PgSelectSingle[36∈0] ➊<br />ᐸyieldᐳ"}}:::plan
    First34 --> PgSelectSingle36
    First39{{"First[39∈0] ➊"}}:::plan
    PgSelectRows40[["PgSelectRows[40∈0] ➊"]]:::plan
    PgSelectRows40 --> First39
    PgSelect37 --> PgSelectRows40
    PgSelectSingle41{{"PgSelectSingle[41∈0] ➊<br />ᐸyieldᐳ"}}:::plan
    First39 --> PgSelectSingle41
    PgSelect42[["PgSelect[42∈0] ➊<br />ᐸ__proto__ᐳ"]]:::plan
    Object10 --> PgSelect42
    First47{{"First[47∈0] ➊"}}:::plan
    PgSelectRows48[["PgSelectRows[48∈0] ➊"]]:::plan
    PgSelectRows48 --> First47
    PgSelect45 --> PgSelectRows48
    PgSelectSingle49{{"PgSelectSingle[49∈0] ➊<br />ᐸ__proto__ᐳ"}}:::plan
    First47 --> PgSelectSingle49
    First53{{"First[53∈0] ➊"}}:::plan
    PgSelectRows54[["PgSelectRows[54∈0] ➊"]]:::plan
    PgSelectRows54 --> First53
    PgSelect51 --> PgSelectRows54
    PgSelectSingle55{{"PgSelectSingle[55∈0] ➊<br />ᐸ__proto__ᐳ"}}:::plan
    First53 --> PgSelectSingle55
    PgSelect56[["PgSelect[56∈0] ➊<br />ᐸnullᐳ"]]:::plan
    Object10 --> PgSelect56
    First61{{"First[61∈0] ➊"}}:::plan
    PgSelectRows62[["PgSelectRows[62∈0] ➊"]]:::plan
    PgSelectRows62 --> First61
    PgSelect59 --> PgSelectRows62
    PgSelectSingle63{{"PgSelectSingle[63∈0] ➊<br />ᐸnullᐳ"}}:::plan
    First61 --> PgSelectSingle63
    First67{{"First[67∈0] ➊"}}:::plan
    PgSelectRows68[["PgSelectRows[68∈0] ➊"]]:::plan
    PgSelectRows68 --> First67
    PgSelect65 --> PgSelectRows68
    PgSelectSingle69{{"PgSelectSingle[69∈0] ➊<br />ᐸnullᐳ"}}:::plan
    First67 --> PgSelectSingle69
    First73{{"First[73∈0] ➊"}}:::plan
    PgSelectRows74[["PgSelectRows[74∈0] ➊"]]:::plan
    PgSelectRows74 --> First73
    PgSelect71 --> PgSelectRows74
    PgSelectSingle75{{"PgSelectSingle[75∈0] ➊<br />ᐸnullᐳ"}}:::plan
    First73 --> PgSelectSingle75
    PgSelectRows76[["PgSelectRows[76∈0] ➊"]]:::plan
    PgSelect7 --> PgSelectRows76
    PgSelectRows77[["PgSelectRows[77∈0] ➊"]]:::plan
    PgSelect29 --> PgSelectRows77
    PgSelectRows78[["PgSelectRows[78∈0] ➊"]]:::plan
    PgSelect42 --> PgSelectRows78
    PgSelectRows79[["PgSelectRows[79∈0] ➊"]]:::plan
    PgSelect56 --> PgSelectRows79
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    PgClassExpression82{{"PgClassExpression[82∈1] ➊<br />ᐸ__constructor__.”name”ᐳ"}}:::plan
    PgSelectSingle16 --> PgClassExpression82
    PgClassExpression83{{"PgClassExpression[83∈1] ➊<br />ᐸ__constructor__.”id”ᐳ"}}:::plan
    PgSelectSingle16 --> PgClassExpression83
    PgClassExpression84{{"PgClassExpression[84∈2] ➊<br />ᐸ__construc..._.”export”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression84
    PgClassExpression85{{"PgClassExpression[85∈2] ➊<br />ᐸ__constructor__.”name”ᐳ"}}:::plan
    PgSelectSingle22 --> PgClassExpression85
    PgClassExpression86{{"PgClassExpression[86∈3] ➊<br />ᐸ__construc..._.”export”ᐳ"}}:::plan
    PgSelectSingle28 --> PgClassExpression86
    PgClassExpression87{{"PgClassExpression[87∈3] ➊<br />ᐸ__constructor__.”id”ᐳ"}}:::plan
    PgSelectSingle28 --> PgClassExpression87
    PgClassExpression90{{"PgClassExpression[90∈4] ➊<br />ᐸ__yield__.”crop”ᐳ"}}:::plan
    PgSelectSingle36 --> PgClassExpression90
    PgClassExpression91{{"PgClassExpression[91∈4] ➊<br />ᐸ__yield__.”id”ᐳ"}}:::plan
    PgSelectSingle36 --> PgClassExpression91
    PgClassExpression92{{"PgClassExpression[92∈5] ➊<br />ᐸ__yield__.”crop”ᐳ"}}:::plan
    PgSelectSingle41 --> PgClassExpression92
    PgClassExpression93{{"PgClassExpression[93∈5] ➊<br />ᐸ__yield__.”export”ᐳ"}}:::plan
    PgSelectSingle41 --> PgClassExpression93
    PgClassExpression96{{"PgClassExpression[96∈6] ➊<br />ᐸ__proto__.”brand”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression96
    PgClassExpression97{{"PgClassExpression[97∈6] ➊<br />ᐸ__proto__.”name”ᐳ"}}:::plan
    PgSelectSingle49 --> PgClassExpression97
    PgClassExpression98{{"PgClassExpression[98∈7] ➊<br />ᐸ__proto__.”brand”ᐳ"}}:::plan
    PgSelectSingle55 --> PgClassExpression98
    PgClassExpression99{{"PgClassExpression[99∈7] ➊<br />ᐸ__proto__.”id”ᐳ"}}:::plan
    PgSelectSingle55 --> PgClassExpression99
    PgClassExpression102{{"PgClassExpression[102∈8] ➊<br />ᐸ__null__.”...nProperty”ᐳ"}}:::plan
    PgSelectSingle63 --> PgClassExpression102
    PgClassExpression103{{"PgClassExpression[103∈8] ➊<br />ᐸ__null__.”id”ᐳ"}}:::plan
    PgSelectSingle63 --> PgClassExpression103
    PgClassExpression104{{"PgClassExpression[104∈9] ➊<br />ᐸ__null__.”break”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression104
    PgClassExpression105{{"PgClassExpression[105∈9] ➊<br />ᐸ__null__.”id”ᐳ"}}:::plan
    PgSelectSingle69 --> PgClassExpression105
    PgClassExpression106{{"PgClassExpression[106∈10] ➊<br />ᐸ__null__.”break”ᐳ"}}:::plan
    PgSelectSingle75 --> PgClassExpression106
    PgClassExpression107{{"PgClassExpression[107∈10] ➊<br />ᐸ__null__.”...nProperty”ᐳ"}}:::plan
    PgSelectSingle75 --> PgClassExpression107
    __Item80[/"__Item[80∈11]<br />ᐸ76ᐳ"\]:::itemplan
    PgSelectRows76 ==> __Item80
    PgSelectSingle81{{"PgSelectSingle[81∈11]<br />ᐸconstructorᐳ"}}:::plan
    __Item80 --> PgSelectSingle81
    PgClassExpression108{{"PgClassExpression[108∈11]<br />ᐸ__constructor__.”name”ᐳ"}}:::plan
    PgSelectSingle81 --> PgClassExpression108
    PgClassExpression109{{"PgClassExpression[109∈11]<br />ᐸ__construc..._.”export”ᐳ"}}:::plan
    PgSelectSingle81 --> PgClassExpression109
    PgClassExpression110{{"PgClassExpression[110∈11]<br />ᐸ__constructor__.”id”ᐳ"}}:::plan
    PgSelectSingle81 --> PgClassExpression110
    __Item88[/"__Item[88∈12]<br />ᐸ77ᐳ"\]:::itemplan
    PgSelectRows77 ==> __Item88
    PgSelectSingle89{{"PgSelectSingle[89∈12]<br />ᐸyieldᐳ"}}:::plan
    __Item88 --> PgSelectSingle89
    PgClassExpression111{{"PgClassExpression[111∈12]<br />ᐸ__yield__.”crop”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression111
    PgClassExpression112{{"PgClassExpression[112∈12]<br />ᐸ__yield__.”export”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression112
    PgClassExpression113{{"PgClassExpression[113∈12]<br />ᐸ__yield__.”id”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression113
    __Item94[/"__Item[94∈13]<br />ᐸ78ᐳ"\]:::itemplan
    PgSelectRows78 ==> __Item94
    PgSelectSingle95{{"PgSelectSingle[95∈13]<br />ᐸ__proto__ᐳ"}}:::plan
    __Item94 --> PgSelectSingle95
    PgClassExpression114{{"PgClassExpression[114∈13]<br />ᐸ__proto__.”id”ᐳ"}}:::plan
    PgSelectSingle95 --> PgClassExpression114
    PgClassExpression115{{"PgClassExpression[115∈13]<br />ᐸ__proto__.”name”ᐳ"}}:::plan
    PgSelectSingle95 --> PgClassExpression115
    PgClassExpression116{{"PgClassExpression[116∈13]<br />ᐸ__proto__.”brand”ᐳ"}}:::plan
    PgSelectSingle95 --> PgClassExpression116
    __Item100[/"__Item[100∈14]<br />ᐸ79ᐳ"\]:::itemplan
    PgSelectRows79 ==> __Item100
    PgSelectSingle101{{"PgSelectSingle[101∈14]<br />ᐸnullᐳ"}}:::plan
    __Item100 --> PgSelectSingle101
    PgClassExpression117{{"PgClassExpression[117∈14]<br />ᐸ__null__.”break”ᐳ"}}:::plan
    PgSelectSingle101 --> PgClassExpression117
    PgClassExpression118{{"PgClassExpression[118∈14]<br />ᐸ__null__.”...nProperty”ᐳ"}}:::plan
    PgSelectSingle101 --> PgClassExpression118
    PgClassExpression119{{"PgClassExpression[119∈14]<br />ᐸ__null__.”id”ᐳ"}}:::plan
    PgSelectSingle101 --> PgClassExpression119

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,PgSelect7,Access8,Access9,Object10,PgSelect12,First14,PgSelectRows15,PgSelectSingle16,PgSelect18,First20,PgSelectRows21,PgSelectSingle22,PgSelect24,First26,PgSelectRows27,PgSelectSingle28,PgSelect29,PgSelect32,First34,PgSelectRows35,PgSelectSingle36,PgSelect37,First39,PgSelectRows40,PgSelectSingle41,PgSelect42,PgSelect45,First47,PgSelectRows48,PgSelectSingle49,PgSelect51,First53,PgSelectRows54,PgSelectSingle55,PgSelect56,PgSelect59,First61,PgSelectRows62,PgSelectSingle63,PgSelect65,First67,PgSelectRows68,PgSelectSingle69,PgSelect71,First73,PgSelectRows74,PgSelectSingle75,PgSelectRows76,PgSelectRows77,PgSelectRows78,PgSelectRows79,Constant120,Constant121,Constant122,Constant123,Constant124,Constant125,Constant126,Constant127,Constant128 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgClassExpression82,PgClassExpression83 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgClassExpression84,PgClassExpression85 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression86,PgClassExpression87 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgClassExpression90,PgClassExpression91 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression92,PgClassExpression93 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression96,PgClassExpression97 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgClassExpression98,PgClassExpression99 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression102,PgClassExpression103 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgClassExpression104,PgClassExpression105 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression106,PgClassExpression107 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,__Item80,PgSelectSingle81,PgClassExpression108,PgClassExpression109,PgClassExpression110 bucket11
    classDef bucket12 stroke:#4169e1
    class Bucket12,__Item88,PgSelectSingle89,PgClassExpression111,PgClassExpression112,PgClassExpression113 bucket12
    classDef bucket13 stroke:#3cb371
    class Bucket13,__Item94,PgSelectSingle95,PgClassExpression114,PgClassExpression115,PgClassExpression116 bucket13
    classDef bucket14 stroke:#a52a2a
    class Bucket14,__Item100,PgSelectSingle101,PgClassExpression117,PgClassExpression118,PgClassExpression119 bucket14

