%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for queries/polymorphic/person-app-vulns"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (nullableBoundary)<br />Deps: 12, 13, 389, 25, 41, 173, 181, 250, 258, 323, 331<br /><br />ROOT Connectionᐸ9ᐳ[13]<br />1: PgSelect[15]<br />2: PgSelectRows[16]"):::bucket
    Bucket2("Bucket 2 (listItem)<br />Deps: 12, 25, 41, 173, 181, 250, 258, 323, 331<br /><br />ROOT __Item{2}ᐸ16ᐳ[17]"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 18, 12, 25, 41, 173, 181, 250, 258, 323, 331<br /><br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[18]<br />1: <br />ᐳ: 19, 20<br />2: 26, 31, 32<br />ᐳ: 378, 379, 388, 27, 30"):::bucket
    Bucket4("Bucket 4 (listItem)<br />Deps: 31, 41, 12<br /><br />ROOT __Item{4}ᐸ379ᐳ[35]"):::bucket
    Bucket5("Bucket 5 (listItem)<br />Deps: 41, 12, 173, 181, 250, 258, 323, 331<br /><br />ROOT __Item{5}ᐸ388ᐳ[37]"):::bucket
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 35, 73, 41, 12<br /><br />ROOT __Item{4}ᐸ379ᐳ[35]"):::bucket
    Bucket7("Bucket 7 (polymorphic)<br />__typename: Access[44]<br />Deps: 44, 12, 45, 173, 181, 250, 258, 323, 331"):::bucket
    Bucket8("Bucket 8 (polymorphicPartition)<br />|AwsApplication<br />Deps: 12, 45, 173, 250, 323<br />ᐳAwsApplication<br /><br />1: PgSelect[47], Connection[103]<br />2: PgSelectRows[56]<br />ᐳ: 55, 58, 75, 76, 77, 78, 79<br />3: 80, 93, 220, 226<br />ᐳ: 380, 381, 382, 383, 89, 169, 171, 174, 175, 221, 225"):::bucket
    Bucket9("Bucket 9 (polymorphicPartition)<br />|GcpApplication<br />Deps: 12, 45, 181, 258, 331<br />ᐳGcpApplication<br /><br />1: PgSelect[61], Connection[132]<br />2: PgSelectRows[70]<br />ᐳ: 69, 72, 104, 105, 106, 107, 108<br />3: 109, 122, 229, 235<br />ᐳ: 384, 385, 386, 387, 118, 177, 179, 182, 183, 230, 234"):::bucket
    Bucket10("Bucket 10 (polymorphic)<br />__typename: Access[138]<br />Deps: 138, 12, 139"):::bucket
    Bucket11("Bucket 11 (polymorphicPartition)<br />|AwsApplication<br />Deps: 12, 139<br />ᐳAwsApplication<br /><br />1: PgSelect[141]<br />2: PgSelectRows[150]<br />ᐳ: 149, 152, 216"):::bucket
    Bucket12("Bucket 12 (polymorphicPartition)<br />|GcpApplication<br />Deps: 12, 139<br />ᐳGcpApplication<br /><br />1: PgSelect[155]<br />2: PgSelectRows[164]<br />ᐳ: 163, 166, 217"):::bucket
    Bucket13("Bucket 13 (combined)<br />Deps: 12"):::bucket
    Bucket14("Bucket 14 (polymorphic)<br />__typename: Access[186]<br />Deps: 186, 185, 12"):::bucket
    Bucket15("Bucket 15 (listItem)<br />Deps: 250, 12<br /><br />ROOT __Item{15}ᐸ380ᐳ[218]"):::bucket
    Bucket16("Bucket 16 (listItem)<br />Deps: 258, 12<br /><br />ROOT __Item{16}ᐸ384ᐳ[227]"):::bucket
    Bucket17("Bucket 17 (polymorphicPartition)<br />|Organization<br />Deps: 185, 12<br />(2) ...ᐳOrganization<br /><br />1: <br />ᐳ: Access[188]<br />2: PgSelect[190]<br />3: PgSelectRows[199]<br />ᐳ: 198, 201, 236, 237"):::bucket
    Bucket18("Bucket 18 (polymorphicPartition)<br />|Person<br />Deps: 185, 12<br />(2) ...ᐳPerson<br /><br />1: <br />ᐳ: Access[202]<br />2: PgSelect[204]<br />3: PgSelectRows[213]<br />ᐳ: 212, 215, 238, 239"):::bucket
    Bucket19("Bucket 19 (combined)<br />Deps: 12"):::bucket
    Bucket20("Bucket 20 (polymorphic)<br />__typename: Access[263]<br />Deps: 263, 12, 265"):::bucket
    Bucket21("Bucket 21 (listItem)<br />Deps: 226, 323, 12<br /><br />ROOT __Item{21}ᐸ382ᐳ[293]"):::bucket
    Bucket22("Bucket 22 (listItem)<br />Deps: 235, 331, 12<br /><br />ROOT __Item{22}ᐸ386ᐳ[295]"):::bucket
    Bucket23("Bucket 23 (polymorphicPartition)<br />|FirstPartyVulnerability<br />Deps: 12, 265<br />(2) ...ᐳFirstPartyVulnerability<br /><br />1: PgSelect[267]<br />2: PgSelectRows[276]<br />ᐳ: 275, 278, 297, 298, 299, 300"):::bucket
    Bucket24("Bucket 24 (polymorphicPartition)<br />|ThirdPartyVulnerability<br />Deps: 12, 265<br />(2) ...ᐳThirdPartyVulnerability<br /><br />1: PgSelect[281]<br />2: PgSelectRows[290]<br />ᐳ: 289, 292, 301, 302, 303, 304"):::bucket
    Bucket25("Bucket 25 (nullableBoundary)<br />Deps: 293, 313, 323, 12<br /><br />ROOT __Item{21}ᐸ382ᐳ[293]"):::bucket
    Bucket26("Bucket 26 (nullableBoundary)<br />Deps: 295, 316, 331, 12<br /><br />ROOT __Item{22}ᐸ386ᐳ[295]"):::bucket
    Bucket27("Bucket 27 (combined)<br />Deps: 12"):::bucket
    Bucket28("Bucket 28 (polymorphic)<br />__typename: Access[336]<br />Deps: 336, 12, 338"):::bucket
    Bucket29("Bucket 29 (polymorphicPartition)<br />|FirstPartyVulnerability<br />Deps: 12, 338<br />(2) ...ᐳFirstPartyVulnerability<br /><br />1: PgSelect[340]<br />2: PgSelectRows[349]<br />ᐳ: 348, 351, 366, 367, 368"):::bucket
    Bucket30("Bucket 30 (polymorphicPartition)<br />|ThirdPartyVulnerability<br />Deps: 12, 338<br />(2) ...ᐳThirdPartyVulnerability<br /><br />1: PgSelect[354]<br />2: PgSelectRows[363]<br />ᐳ: 362, 365, 369, 370, 371"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5
    Bucket4 --> Bucket6
    Bucket5 --> Bucket7
    Bucket6 --> Bucket10
    Bucket7 --> Bucket8 & Bucket9
    Bucket8 --> Bucket13 & Bucket15 & Bucket21
    Bucket9 --> Bucket13 & Bucket16 & Bucket22
    Bucket10 --> Bucket11 & Bucket12
    Bucket13 --> Bucket14
    Bucket14 --> Bucket17 & Bucket18
    Bucket15 --> Bucket19
    Bucket16 --> Bucket19
    Bucket19 --> Bucket20
    Bucket20 --> Bucket23 & Bucket24
    Bucket21 --> Bucket25
    Bucket22 --> Bucket26
    Bucket25 --> Bucket27
    Bucket26 --> Bucket27
    Bucket27 --> Bucket28
    Bucket28 --> Bucket29 & Bucket30

    %% plan dependencies
    Object12{{"Object[12∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access11{{"Access[11∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access10 & Access11 --> Object12
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access10
    __Value2 --> Access11
    Connection13{{"Connection[13∈0] ➊<br />ᐸ9ᐳ"}}:::plan
    Constant389{{"Constant[389∈0] ➊<br />ᐸ4ᐳ"}}:::plan
    Constant389 --> Connection13
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Connection25{{"Connection[25∈0] ➊<br />ᐸ21ᐳ"}}:::plan
    Constant41{{"Constant[41∈0] ➊<br />ᐸ[HIDDEN]ᐳ"}}:::plan
    Constant173{{"Constant[173∈0] ➊<br />ᐸ[HIDDEN]ᐳ"}}:::plan
    Constant181{{"Constant[181∈0] ➊<br />ᐸ[HIDDEN]ᐳ"}}:::plan
    Constant250{{"Constant[250∈0] ➊<br />ᐸ[HIDDEN]ᐳ"}}:::plan
    Constant258{{"Constant[258∈0] ➊<br />ᐸ[HIDDEN]ᐳ"}}:::plan
    Constant323{{"Constant[323∈0] ➊<br />ᐸ[HIDDEN]ᐳ"}}:::plan
    Constant331{{"Constant[331∈0] ➊<br />ᐸ[HIDDEN]ᐳ"}}:::plan
    PgSelect15[["PgSelect[15∈1] ➊<br />ᐸpeopleᐳ"]]:::plan
    Object12 & Connection13 & Constant389 --> PgSelect15
    PgSelectRows16[["PgSelectRows[16∈1] ➊"]]:::plan
    PgSelect15 --> PgSelectRows16
    __Item17[/"__Item[17∈2]<br />ᐸ16ᐳ"\]:::itemplan
    PgSelectRows16 ==> __Item17
    PgSelectSingle18{{"PgSelectSingle[18∈2]<br />ᐸpeopleᐳ"}}:::plan
    __Item17 --> PgSelectSingle18
    PgUnionAll26[["PgUnionAll[26∈3]<br />ᐸAwsApplication,GcpApplicationᐳ"]]:::plan
    PgClassExpression19{{"PgClassExpression[19∈3]<br />ᐸ__people__.”person_id”ᐳ"}}:::plan
    Object12 & PgClassExpression19 & Connection25 --> PgUnionAll26
    PgUnionAll31[["PgUnionAll[31∈3]<br />ᐸAwsApplication,GcpApplicationᐳ"]]:::plan
    Object12 & PgClassExpression19 & Connection25 --> PgUnionAll31
    PgUnionAll32[["PgUnionAll[32∈3]<br />ᐸAwsApplication,GcpApplicationᐳ"]]:::plan
    Object12 & PgClassExpression19 & Connection25 --> PgUnionAll32
    PgSelectSingle18 --> PgClassExpression19
    PgClassExpression20{{"PgClassExpression[20∈3]<br />ᐸ__people__.”username”ᐳ"}}:::plan
    PgSelectSingle18 --> PgClassExpression20
    First27{{"First[27∈3]"}}:::plan
    Access378{{"Access[378∈3]<br />ᐸ26.itemsᐳ"}}:::plan
    Access378 --> First27
    PgClassExpression30{{"PgClassExpression[30∈3]<br />ᐸcount(*)ᐳ"}}:::plan
    First27 --> PgClassExpression30
    PgUnionAll26 --> Access378
    Access379{{"Access[379∈3]<br />ᐸ31.itemsᐳ"}}:::plan
    PgUnionAll31 --> Access379
    Access388{{"Access[388∈3]<br />ᐸ32.itemsᐳ"}}:::plan
    PgUnionAll32 --> Access388
    __Item35[/"__Item[35∈4]<br />ᐸ379ᐳ"\]:::itemplan
    Access379 ==> __Item35
    Access73{{"Access[73∈4]<br />ᐸ31.cursorDetailsᐳ"}}:::plan
    PgUnionAll31 --> Access73
    List136{{"List[136∈6]<br />ᐸ133,134,41ᐳ"}}:::plan
    Access133{{"Access[133∈6]<br />ᐸ35.0ᐳ"}}:::plan
    Access134{{"Access[134∈6]<br />ᐸ35.1ᐳ"}}:::plan
    Access133 & Access134 & Constant41 --> List136
    PgCursor74{{"PgCursor[74∈6]"}}:::plan
    __Item35 & Access73 --> PgCursor74
    __Item35 --> Access133
    __Item35 --> Access134
    Lambda137{{"Lambda[137∈6]<br />ᐸtoSpecifierᐳ"}}:::plan
    List136 --> Lambda137
    Access138{{"Access[138∈6]<br />ᐸ137.__typenameᐳ"}}:::plan
    Lambda137 --> Access138
    Access139{{"Access[139∈6]<br />ᐸ137.idᐳ"}}:::plan
    Lambda137 --> Access139
    PgSelect141[["PgSelect[141∈11]<br />ᐸaws_applicationsᐳ<br />ᐳAwsApplication"]]:::plan
    Object12 & Access139 --> PgSelect141
    First149{{"First[149∈11]^"}}:::plan
    PgSelectRows150[["PgSelectRows[150∈11]^"]]:::plan
    PgSelectRows150 --> First149
    PgSelect141 --> PgSelectRows150
    PgSelectSingle152{{"PgSelectSingle[152∈11]^<br />ᐸaws_applicationsᐳ"}}:::plan
    First149 --> PgSelectSingle152
    PgClassExpression216{{"PgClassExpression[216∈11]^<br />ᐸ__aws_appl...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle152 --> PgClassExpression216
    PgSelect155[["PgSelect[155∈12]<br />ᐸgcp_applicationsᐳ<br />ᐳGcpApplication"]]:::plan
    Object12 & Access139 --> PgSelect155
    First163{{"First[163∈12]^"}}:::plan
    PgSelectRows164[["PgSelectRows[164∈12]^"]]:::plan
    PgSelectRows164 --> First163
    PgSelect155 --> PgSelectRows164
    PgSelectSingle166{{"PgSelectSingle[166∈12]^<br />ᐸgcp_applicationsᐳ"}}:::plan
    First163 --> PgSelectSingle166
    PgClassExpression217{{"PgClassExpression[217∈12]^<br />ᐸ__gcp_appl...ons__.”id”ᐳ"}}:::plan
    PgSelectSingle166 --> PgClassExpression217
    List42{{"List[42∈5]<br />ᐸ39,40,41ᐳ"}}:::plan
    Access39{{"Access[39∈5]<br />ᐸ37.0ᐳ"}}:::plan
    Access40{{"Access[40∈5]<br />ᐸ37.1ᐳ"}}:::plan
    Access39 & Access40 & Constant41 --> List42
    __Item37[/"__Item[37∈5]<br />ᐸ388ᐳ"\]:::itemplan
    Access388 ==> __Item37
    __Item37 --> Access39
    __Item37 --> Access40
    Lambda43{{"Lambda[43∈5]<br />ᐸtoSpecifierᐳ"}}:::plan
    List42 --> Lambda43
    Access44{{"Access[44∈5]<br />ᐸ43.__typenameᐳ"}}:::plan
    Lambda43 --> Access44
    Access45{{"Access[45∈5]<br />ᐸ43.idᐳ"}}:::plan
    Lambda43 --> Access45
    PgUnionAll80[["PgUnionAll[80∈8]^<br />ᐸPerson,Organizationᐳ"]]:::plan
    PgClassExpression78{{"PgClassExpression[78∈8]^<br />ᐸ__aws_appl...person_id”ᐳ"}}:::plan
    PgClassExpression79{{"PgClassExpression[79∈8]^<br />ᐸ__aws_appl...zation_id”ᐳ"}}:::plan
    Object12 & PgClassExpression78 & PgClassExpression79 --> PgUnionAll80
    List174{{"List[174∈8]^<br />ᐸ169,171,173ᐳ"}}:::plan
    Access169{{"Access[169∈8]^<br />ᐸ89.0ᐳ"}}:::plan
    Access171{{"Access[171∈8]^<br />ᐸ89.1ᐳ"}}:::plan
    Access169 & Access171 & Constant173 --> List174
    PgUnionAll220[["PgUnionAll[220∈8]^<br />ᐸFirstPartyVulnerability,ThirdPartyVulnerabilityᐳ"]]:::plan
    PgClassExpression76{{"PgClassExpression[76∈8]^<br />ᐸ__aws_appl...ons__.”id”ᐳ"}}:::plan
    Connection103{{"Connection[103∈8] ➊<br />ᐸ98ᐳ<br />ᐳAwsApplication"}}:::plan
    Object12 & PgClassExpression76 & Connection103 --> PgUnionAll220
    PgUnionAll226[["PgUnionAll[226∈8]^<br />ᐸFirstPartyVulnerability,ThirdPartyVulnerabilityᐳ"]]:::plan
    Object12 & PgClassExpression76 & Connection103 --> PgUnionAll226
    PgSelect47[["PgSelect[47∈8]<br />ᐸaws_applicationsᐳ<br />ᐳAwsApplication"]]:::plan
    Object12 & Access45 --> PgSelect47
    PgUnionAll93[["PgUnionAll[93∈8]^<br />ᐸFirstPartyVulnerability,ThirdPartyVulnerabilityᐳ"]]:::plan
    Object12 & PgClassExpression76 --> PgUnionAll93
    First55{{"First[55∈8]^"}}:::plan
    PgSelectRows56[["PgSelectRows[56∈8]^"]]:::plan
    PgSelectRows56 --> First55
    PgSelect47 --> PgSelectRows56
    PgSelectSingle58{{"PgSelectSingle[58∈8]^<br />ᐸaws_applicationsᐳ"}}:::plan
    First55 --> PgSelectSingle58
    PgClassExpression75{{"PgClassExpression[75∈8]^<br />ᐸ__aws_appl..._.”aws_id”ᐳ"}}:::plan
    PgSelectSingle58 --> PgClassExpression75
    PgSelectSingle58 --> PgClassExpression76
    PgClassExpression77{{"PgClassExpression[77∈8]^<br />ᐸ__aws_appl...s__.”name”ᐳ"}}:::plan
    PgSelectSingle58 --> PgClassExpression77
    PgSelectSingle58 --> PgClassExpression78
    PgSelectSingle58 --> PgClassExpression79
    First89{{"First[89∈8]^"}}:::plan
    Access383{{"Access[383∈8]^<br />ᐸ80.itemsᐳ"}}:::plan
    Access383 --> First89
    First89 --> Access169
    First89 --> Access171
    Lambda175{{"Lambda[175∈8]^<br />ᐸtoSpecifierᐳ"}}:::plan
    List174 --> Lambda175
    First221{{"First[221∈8]^"}}:::plan
    Access381{{"Access[381∈8]^<br />ᐸ220.itemsᐳ"}}:::plan
    Access381 --> First221
    PgClassExpression225{{"PgClassExpression[225∈8]^<br />ᐸcount(*)ᐳ"}}:::plan
    First221 --> PgClassExpression225
    Access380{{"Access[380∈8]^<br />ᐸ93.itemsᐳ"}}:::plan
    PgUnionAll93 --> Access380
    PgUnionAll220 --> Access381
    Access382{{"Access[382∈8]^<br />ᐸ226.itemsᐳ"}}:::plan
    PgUnionAll226 --> Access382
    PgUnionAll80 --> Access383
    Access186{{"Access[186∈13]^<br />ᐸ185.__typenameᐳ"}}:::plan
    __Value185:::plan@{shape: docs, label: "__Combined[185∈13]<br />ᐳAwsApplication<br />ᐳGcpApplication"}
    __Value185 --> Access186
    PgSelect190[["PgSelect[190∈17]^<br />ᐸorganizationsᐳ"]]:::plan
    Access188{{"Access[188∈17]<br />ᐸ185.organization_idᐳ<br />(2) ...ᐳOrganization"}}:::plan
    Object12 & Access188 --> PgSelect190
    __Value185 --> Access188
    First198{{"First[198∈17]^"}}:::plan
    PgSelectRows199[["PgSelectRows[199∈17]^"]]:::plan
    PgSelectRows199 --> First198
    PgSelect190 --> PgSelectRows199
    PgSelectSingle201{{"PgSelectSingle[201∈17]^<br />ᐸorganizationsᐳ"}}:::plan
    First198 --> PgSelectSingle201
    PgClassExpression236{{"PgClassExpression[236∈17]^<br />ᐸ__organiza...zation_id”ᐳ"}}:::plan
    PgSelectSingle201 --> PgClassExpression236
    PgClassExpression237{{"PgClassExpression[237∈17]^<br />ᐸ__organiza...s__.”name”ᐳ"}}:::plan
    PgSelectSingle201 --> PgClassExpression237
    PgSelect204[["PgSelect[204∈18]^<br />ᐸpeopleᐳ"]]:::plan
    Access202{{"Access[202∈18]<br />ᐸ185.person_idᐳ<br />(2) ...ᐳPerson"}}:::plan
    Object12 & Access202 --> PgSelect204
    __Value185 --> Access202
    First212{{"First[212∈18]^"}}:::plan
    PgSelectRows213[["PgSelectRows[213∈18]^"]]:::plan
    PgSelectRows213 --> First212
    PgSelect204 --> PgSelectRows213
    PgSelectSingle215{{"PgSelectSingle[215∈18]^<br />ᐸpeopleᐳ"}}:::plan
    First212 --> PgSelectSingle215
    PgClassExpression238{{"PgClassExpression[238∈18]^<br />ᐸ__people__.”person_id”ᐳ"}}:::plan
    PgSelectSingle215 --> PgClassExpression238
    PgClassExpression239{{"PgClassExpression[239∈18]^<br />ᐸ__people__.”username”ᐳ"}}:::plan
    PgSelectSingle215 --> PgClassExpression239
    List251{{"List[251∈15]^<br />ᐸ246,248,250ᐳ"}}:::plan
    Access246{{"Access[246∈15]^<br />ᐸ218.0ᐳ"}}:::plan
    Access248{{"Access[248∈15]^<br />ᐸ218.1ᐳ"}}:::plan
    Access246 & Access248 & Constant250 --> List251
    __Item218[/"__Item[218∈15]<br />ᐸ380ᐳ<br />ᐳAwsApplication"\]:::itemplan
    Access380 ==> __Item218
    __Item218 --> Access246
    __Item218 --> Access248
    Lambda252{{"Lambda[252∈15]^<br />ᐸtoSpecifierᐳ"}}:::plan
    List251 --> Lambda252
    Access263{{"Access[263∈19]^<br />ᐸ262.__typenameᐳ"}}:::plan
    __Value262:::plan@{shape: docs, label: "__Combined[262∈19]<br />ᐳAwsApplication<br />ᐳGcpApplication"}
    __Value262 --> Access263
    Access265{{"Access[265∈19]^<br />ᐸ262.idᐳ"}}:::plan
    __Value262 --> Access265
    PgSelect267[["PgSelect[267∈23]<br />ᐸfirst_party_vulnerabilitiesᐳ<br />(2) ...ᐳFirstPartyVulnerability"]]:::plan
    Object12 & Access265 --> PgSelect267
    First275{{"First[275∈23]^"}}:::plan
    PgSelectRows276[["PgSelectRows[276∈23]^"]]:::plan
    PgSelectRows276 --> First275
    PgSelect267 --> PgSelectRows276
    PgSelectSingle278{{"PgSelectSingle[278∈23]^<br />ᐸfirst_party_vulnerabilitiesᐳ"}}:::plan
    First275 --> PgSelectSingle278
    PgClassExpression297{{"PgClassExpression[297∈23]^<br />ᐸ__first_pa...team_name”ᐳ"}}:::plan
    PgSelectSingle278 --> PgClassExpression297
    PgClassExpression298{{"PgClassExpression[298∈23]^<br />ᐸ__first_pa...ies__.”id”ᐳ"}}:::plan
    PgSelectSingle278 --> PgClassExpression298
    PgClassExpression299{{"PgClassExpression[299∈23]^<br />ᐸ__first_pa...vss_score”ᐳ"}}:::plan
    PgSelectSingle278 --> PgClassExpression299
    PgClassExpression300{{"PgClassExpression[300∈23]^<br />ᐸ__first_pa...s__.”name”ᐳ"}}:::plan
    PgSelectSingle278 --> PgClassExpression300
    PgSelect281[["PgSelect[281∈24]<br />ᐸthird_party_vulnerabilitiesᐳ<br />(2) ...ᐳThirdPartyVulnerability"]]:::plan
    Object12 & Access265 --> PgSelect281
    First289{{"First[289∈24]^"}}:::plan
    PgSelectRows290[["PgSelectRows[290∈24]^"]]:::plan
    PgSelectRows290 --> First289
    PgSelect281 --> PgSelectRows290
    PgSelectSingle292{{"PgSelectSingle[292∈24]^<br />ᐸthird_party_vulnerabilitiesᐳ"}}:::plan
    First289 --> PgSelectSingle292
    PgClassExpression301{{"PgClassExpression[301∈24]^<br />ᐸ__third_pa...ndor_name”ᐳ"}}:::plan
    PgSelectSingle292 --> PgClassExpression301
    PgClassExpression302{{"PgClassExpression[302∈24]^<br />ᐸ__third_pa...ies__.”id”ᐳ"}}:::plan
    PgSelectSingle292 --> PgClassExpression302
    PgClassExpression303{{"PgClassExpression[303∈24]^<br />ᐸ__third_pa...vss_score”ᐳ"}}:::plan
    PgSelectSingle292 --> PgClassExpression303
    PgClassExpression304{{"PgClassExpression[304∈24]^<br />ᐸ__third_pa...s__.”name”ᐳ"}}:::plan
    PgSelectSingle292 --> PgClassExpression304
    __Item293[/"__Item[293∈21]<br />ᐸ382ᐳ<br />ᐳAwsApplication"\]:::itemplan
    Access382 ==> __Item293
    Access313{{"Access[313∈21]<br />ᐸ226.cursorDetailsᐳ<br />ᐳAwsApplication"}}:::plan
    PgUnionAll226 --> Access313
    List324{{"List[324∈25]^<br />ᐸ319,321,323ᐳ"}}:::plan
    Access319{{"Access[319∈25]<br />ᐸ293.0ᐳ<br />ᐳAwsApplication"}}:::plan
    Access321{{"Access[321∈25]<br />ᐸ293.1ᐳ<br />ᐳAwsApplication"}}:::plan
    Access319 & Access321 & Constant323 --> List324
    PgCursor315{{"PgCursor[315∈25]<br />ᐳAwsApplication"}}:::plan
    __Item293 & Access313 --> PgCursor315
    __Item293 --> Access319
    __Item293 --> Access321
    Lambda325{{"Lambda[325∈25]^<br />ᐸtoSpecifierᐳ"}}:::plan
    List324 --> Lambda325
    Access336{{"Access[336∈27]^<br />ᐸ335.__typenameᐳ"}}:::plan
    __Value335:::plan@{shape: docs, label: "__Combined[335∈27]<br />ᐳAwsApplication<br />ᐳGcpApplication"}
    __Value335 --> Access336
    Access338{{"Access[338∈27]^<br />ᐸ335.idᐳ"}}:::plan
    __Value335 --> Access338
    PgSelect340[["PgSelect[340∈29]<br />ᐸfirst_party_vulnerabilitiesᐳ<br />(2) ...ᐳFirstPartyVulnerability"]]:::plan
    Object12 & Access338 --> PgSelect340
    First348{{"First[348∈29]^"}}:::plan
    PgSelectRows349[["PgSelectRows[349∈29]^"]]:::plan
    PgSelectRows349 --> First348
    PgSelect340 --> PgSelectRows349
    PgSelectSingle351{{"PgSelectSingle[351∈29]^<br />ᐸfirst_party_vulnerabilitiesᐳ"}}:::plan
    First348 --> PgSelectSingle351
    PgClassExpression366{{"PgClassExpression[366∈29]^<br />ᐸ__first_pa...vss_score”ᐳ"}}:::plan
    PgSelectSingle351 --> PgClassExpression366
    PgClassExpression367{{"PgClassExpression[367∈29]^<br />ᐸ__first_pa...ies__.”id”ᐳ"}}:::plan
    PgSelectSingle351 --> PgClassExpression367
    PgClassExpression368{{"PgClassExpression[368∈29]^<br />ᐸ__first_pa...s__.”name”ᐳ"}}:::plan
    PgSelectSingle351 --> PgClassExpression368
    PgSelect354[["PgSelect[354∈30]<br />ᐸthird_party_vulnerabilitiesᐳ<br />(2) ...ᐳThirdPartyVulnerability"]]:::plan
    Object12 & Access338 --> PgSelect354
    First362{{"First[362∈30]^"}}:::plan
    PgSelectRows363[["PgSelectRows[363∈30]^"]]:::plan
    PgSelectRows363 --> First362
    PgSelect354 --> PgSelectRows363
    PgSelectSingle365{{"PgSelectSingle[365∈30]^<br />ᐸthird_party_vulnerabilitiesᐳ"}}:::plan
    First362 --> PgSelectSingle365
    PgClassExpression369{{"PgClassExpression[369∈30]^<br />ᐸ__third_pa...vss_score”ᐳ"}}:::plan
    PgSelectSingle365 --> PgClassExpression369
    PgClassExpression370{{"PgClassExpression[370∈30]^<br />ᐸ__third_pa...ies__.”id”ᐳ"}}:::plan
    PgSelectSingle365 --> PgClassExpression370
    PgClassExpression371{{"PgClassExpression[371∈30]^<br />ᐸ__third_pa...s__.”name”ᐳ"}}:::plan
    PgSelectSingle365 --> PgClassExpression371
    PgUnionAll109[["PgUnionAll[109∈9]^<br />ᐸPerson,Organizationᐳ"]]:::plan
    PgClassExpression107{{"PgClassExpression[107∈9]^<br />ᐸ__gcp_appl...person_id”ᐳ"}}:::plan
    PgClassExpression108{{"PgClassExpression[108∈9]^<br />ᐸ__gcp_appl...zation_id”ᐳ"}}:::plan
    Object12 & PgClassExpression107 & PgClassExpression108 --> PgUnionAll109
    List182{{"List[182∈9]^<br />ᐸ177,179,181ᐳ"}}:::plan
    Access177{{"Access[177∈9]^<br />ᐸ118.0ᐳ"}}:::plan
    Access179{{"Access[179∈9]^<br />ᐸ118.1ᐳ"}}:::plan
    Access177 & Access179 & Constant181 --> List182
    PgUnionAll229[["PgUnionAll[229∈9]^<br />ᐸFirstPartyVulnerability,ThirdPartyVulnerabilityᐳ"]]:::plan
    PgClassExpression105{{"PgClassExpression[105∈9]^<br />ᐸ__gcp_appl...ons__.”id”ᐳ"}}:::plan
    Connection132{{"Connection[132∈9] ➊<br />ᐸ127ᐳ<br />ᐳGcpApplication"}}:::plan
    Object12 & PgClassExpression105 & Connection132 --> PgUnionAll229
    PgUnionAll235[["PgUnionAll[235∈9]^<br />ᐸFirstPartyVulnerability,ThirdPartyVulnerabilityᐳ"]]:::plan
    Object12 & PgClassExpression105 & Connection132 --> PgUnionAll235
    PgSelect61[["PgSelect[61∈9]<br />ᐸgcp_applicationsᐳ<br />ᐳGcpApplication"]]:::plan
    Object12 & Access45 --> PgSelect61
    PgUnionAll122[["PgUnionAll[122∈9]^<br />ᐸFirstPartyVulnerability,ThirdPartyVulnerabilityᐳ"]]:::plan
    Object12 & PgClassExpression105 --> PgUnionAll122
    First69{{"First[69∈9]^"}}:::plan
    PgSelectRows70[["PgSelectRows[70∈9]^"]]:::plan
    PgSelectRows70 --> First69
    PgSelect61 --> PgSelectRows70
    PgSelectSingle72{{"PgSelectSingle[72∈9]^<br />ᐸgcp_applicationsᐳ"}}:::plan
    First69 --> PgSelectSingle72
    PgClassExpression104{{"PgClassExpression[104∈9]^<br />ᐸ__gcp_appl..._.”gcp_id”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression104
    PgSelectSingle72 --> PgClassExpression105
    PgClassExpression106{{"PgClassExpression[106∈9]^<br />ᐸ__gcp_appl...s__.”name”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression106
    PgSelectSingle72 --> PgClassExpression107
    PgSelectSingle72 --> PgClassExpression108
    First118{{"First[118∈9]^"}}:::plan
    Access387{{"Access[387∈9]^<br />ᐸ109.itemsᐳ"}}:::plan
    Access387 --> First118
    First118 --> Access177
    First118 --> Access179
    Lambda183{{"Lambda[183∈9]^<br />ᐸtoSpecifierᐳ"}}:::plan
    List182 --> Lambda183
    First230{{"First[230∈9]^"}}:::plan
    Access385{{"Access[385∈9]^<br />ᐸ229.itemsᐳ"}}:::plan
    Access385 --> First230
    PgClassExpression234{{"PgClassExpression[234∈9]^<br />ᐸcount(*)ᐳ"}}:::plan
    First230 --> PgClassExpression234
    Access384{{"Access[384∈9]^<br />ᐸ122.itemsᐳ"}}:::plan
    PgUnionAll122 --> Access384
    PgUnionAll229 --> Access385
    Access386{{"Access[386∈9]^<br />ᐸ235.itemsᐳ"}}:::plan
    PgUnionAll235 --> Access386
    PgUnionAll109 --> Access387
    List259{{"List[259∈16]^<br />ᐸ254,256,258ᐳ"}}:::plan
    Access254{{"Access[254∈16]^<br />ᐸ227.0ᐳ"}}:::plan
    Access256{{"Access[256∈16]^<br />ᐸ227.1ᐳ"}}:::plan
    Access254 & Access256 & Constant258 --> List259
    __Item227[/"__Item[227∈16]<br />ᐸ384ᐳ<br />ᐳGcpApplication"\]:::itemplan
    Access384 ==> __Item227
    __Item227 --> Access254
    __Item227 --> Access256
    Lambda260{{"Lambda[260∈16]^<br />ᐸtoSpecifierᐳ"}}:::plan
    List259 --> Lambda260
    __Item295[/"__Item[295∈22]<br />ᐸ386ᐳ<br />ᐳGcpApplication"\]:::itemplan
    Access386 ==> __Item295
    Access316{{"Access[316∈22]<br />ᐸ235.cursorDetailsᐳ<br />ᐳGcpApplication"}}:::plan
    PgUnionAll235 --> Access316
    List332{{"List[332∈26]^<br />ᐸ327,329,331ᐳ"}}:::plan
    Access327{{"Access[327∈26]<br />ᐸ295.0ᐳ<br />ᐳGcpApplication"}}:::plan
    Access329{{"Access[329∈26]<br />ᐸ295.1ᐳ<br />ᐳGcpApplication"}}:::plan
    Access327 & Access329 & Constant331 --> List332
    PgCursor318{{"PgCursor[318∈26]<br />ᐳGcpApplication"}}:::plan
    __Item295 & Access316 --> PgCursor318
    __Item295 --> Access327
    __Item295 --> Access329
    Lambda333{{"Lambda[333∈26]^<br />ᐸtoSpecifierᐳ"}}:::plan
    List332 --> Lambda333

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Access10,Access11,Object12,Connection13,Connection25,Constant41,Constant173,Constant181,Constant250,Constant258,Constant323,Constant331,Constant389 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect15,PgSelectRows16 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item17,PgSelectSingle18 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression19,PgClassExpression20,PgUnionAll26,First27,PgClassExpression30,PgUnionAll31,PgUnionAll32,Access378,Access379,Access388 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item35,Access73 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item37,Access39,Access40,List42,Lambda43,Access44,Access45 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgCursor74,Access133,Access134,List136,Lambda137,Access138,Access139 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgSelect47,First55,PgSelectRows56,PgSelectSingle58,PgClassExpression75,PgClassExpression76,PgClassExpression77,PgClassExpression78,PgClassExpression79,PgUnionAll80,First89,PgUnionAll93,Connection103,Access169,Access171,List174,Lambda175,PgUnionAll220,First221,PgClassExpression225,PgUnionAll226,Access380,Access381,Access382,Access383 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgSelect61,First69,PgSelectRows70,PgSelectSingle72,PgClassExpression104,PgClassExpression105,PgClassExpression106,PgClassExpression107,PgClassExpression108,PgUnionAll109,First118,PgUnionAll122,Connection132,Access177,Access179,List182,Lambda183,PgUnionAll229,First230,PgClassExpression234,PgUnionAll235,Access384,Access385,Access386,Access387 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgSelect141,First149,PgSelectRows150,PgSelectSingle152,PgClassExpression216 bucket11
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgSelect155,First163,PgSelectRows164,PgSelectSingle166,PgClassExpression217 bucket12
    classDef bucket13 stroke:#3cb371
    class Bucket13,__Value185,Access186 bucket13
    classDef bucket14 stroke:#a52a2a
    class Bucket14 bucket14
    classDef bucket15 stroke:#ff00ff
    class Bucket15,__Item218,Access246,Access248,List251,Lambda252 bucket15
    classDef bucket16 stroke:#f5deb3
    class Bucket16,__Item227,Access254,Access256,List259,Lambda260 bucket16
    classDef bucket17 stroke:#696969
    class Bucket17,Access188,PgSelect190,First198,PgSelectRows199,PgSelectSingle201,PgClassExpression236,PgClassExpression237 bucket17
    classDef bucket18 stroke:#00bfff
    class Bucket18,Access202,PgSelect204,First212,PgSelectRows213,PgSelectSingle215,PgClassExpression238,PgClassExpression239 bucket18
    classDef bucket19 stroke:#7f007f
    class Bucket19,__Value262,Access263,Access265 bucket19
    classDef bucket20 stroke:#ffa500
    class Bucket20 bucket20
    classDef bucket21 stroke:#0000ff
    class Bucket21,__Item293,Access313 bucket21
    classDef bucket22 stroke:#7fff00
    class Bucket22,__Item295,Access316 bucket22
    classDef bucket23 stroke:#ff1493
    class Bucket23,PgSelect267,First275,PgSelectRows276,PgSelectSingle278,PgClassExpression297,PgClassExpression298,PgClassExpression299,PgClassExpression300 bucket23
    classDef bucket24 stroke:#808000
    class Bucket24,PgSelect281,First289,PgSelectRows290,PgSelectSingle292,PgClassExpression301,PgClassExpression302,PgClassExpression303,PgClassExpression304 bucket24
    classDef bucket25 stroke:#dda0dd
    class Bucket25,PgCursor315,Access319,Access321,List324,Lambda325 bucket25
    classDef bucket26 stroke:#ff0000
    class Bucket26,PgCursor318,Access327,Access329,List332,Lambda333 bucket26
    classDef bucket27 stroke:#ffff00
    class Bucket27,__Value335,Access336,Access338 bucket27
    classDef bucket28 stroke:#00ffff
    class Bucket28 bucket28
    classDef bucket29 stroke:#4169e1
    class Bucket29,PgSelect340,First348,PgSelectRows349,PgSelectSingle351,PgClassExpression366,PgClassExpression367,PgClassExpression368 bucket29
    classDef bucket30 stroke:#3cb371
    class Bucket30,PgSelect354,First362,PgSelectRows363,PgSelectSingle365,PgClassExpression369,PgClassExpression370,PgClassExpression371 bucket30

    Lambda175 -.-x __Value185
    Lambda183 -.-x __Value185
    Lambda252 -.-x __Value262
    Lambda260 -.-x __Value262
    Lambda325 -.-x __Value335
    Lambda333 -.-x __Value335
