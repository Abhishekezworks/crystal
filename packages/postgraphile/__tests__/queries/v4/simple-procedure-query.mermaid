graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    Access30["Access[30∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access31["Access[31∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object32["Object[32∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    PgSelect29[["PgSelect[29∈0]<br />ᐸcompound_type_set_queryᐳ"]]:::plan
    PgSelect55[["PgSelect[55∈0]<br />ᐸtable_set_queryᐳ"]]:::plan
    PgSelect81[["PgSelect[81∈0]<br />ᐸtable_set_queryᐳ"]]:::plan
    __InputStaticLeaf85["__InputStaticLeaf[85∈0]"]:::plan
    __InputStaticLeaf87["__InputStaticLeaf[87∈0]"]:::plan
    Constant93["Constant[93∈0]"]:::plan
    PgSelect94[["PgSelect[94∈0]<br />ᐸint_set_queryᐳ"]]:::plan
    PgSelect103[["PgSelect[103∈0]<br />ᐸstatic_big_integerᐳ"]]:::plan
    PgSelect112[["PgSelect[112∈0]<br />ᐸquery_interval_setᐳ"]]:::plan
    PgSelect132[["PgSelect[132∈0]<br />ᐸpostᐳ"]]:::plan
    __Item136>"__Item[136∈1]<br />ᐸ29ᐳ"]:::itemplan
    PgSelectSingle137["PgSelectSingle[137∈1]<br />ᐸcompound_type_set_queryᐳ"]:::plan
    PgClassExpression138["PgClassExpression[138∈1]<br />ᐸ__compound...uery__.”a”ᐳ"]:::plan
    PgClassExpression139["PgClassExpression[139∈1]<br />ᐸ__compound...uery__.”b”ᐳ"]:::plan
    PgClassExpression140["PgClassExpression[140∈1]<br />ᐸ__compound...uery__.”c”ᐳ"]:::plan
    PgClassExpression141["PgClassExpression[141∈1]<br />ᐸ__compound...uery__.”d”ᐳ"]:::plan
    PgClassExpression142["PgClassExpression[142∈1]<br />ᐸ__compound...uery__.”e”ᐳ"]:::plan
    PgClassExpression143["PgClassExpression[143∈1]<br />ᐸ__compound...uery__.”f”ᐳ"]:::plan
    PgClassExpression144["PgClassExpression[144∈1]<br />ᐸ__compound...uery__.”g”ᐳ"]:::plan
    Access145["Access[145∈1]<br />ᐸ144.hoursᐳ"]:::plan
    Access146["Access[146∈1]<br />ᐸ144.minutesᐳ"]:::plan
    Access147["Access[147∈1]<br />ᐸ144.secondsᐳ"]:::plan
    __Item148>"__Item[148∈2]<br />ᐸ55ᐳ"]:::itemplan
    PgSelectSingle149["PgSelectSingle[149∈2]<br />ᐸtable_set_queryᐳ"]:::plan
    PgClassExpression150["PgClassExpression[150∈2]<br />ᐸ__table_se...full_name”ᐳ"]:::plan
    __Item151>"__Item[151∈3]<br />ᐸ81ᐳ"]:::itemplan
    PgSelectSingle152["PgSelectSingle[152∈3]<br />ᐸtable_set_queryᐳ"]:::plan
    PgClassExpression153["PgClassExpression[153∈3]<br />ᐸ__table_se...full_name”ᐳ"]:::plan
    __Item154>"__Item[154∈4]<br />ᐸ94ᐳ"]:::itemplan
    PgSelectSingle155["PgSelectSingle[155∈4]<br />ᐸint_set_queryᐳ"]:::plan
    PgClassExpression156["PgClassExpression[156∈4]<br />ᐸ__int_set_query__.vᐳ"]:::plan
    __Item157>"__Item[157∈5]<br />ᐸ103ᐳ"]:::itemplan
    PgSelectSingle158["PgSelectSingle[158∈5]<br />ᐸstatic_big_integerᐳ"]:::plan
    PgClassExpression159["PgClassExpression[159∈5]<br />ᐸ__static_b...nteger__.vᐳ"]:::plan
    __Item160>"__Item[160∈6]<br />ᐸ112ᐳ"]:::itemplan
    PgSelectSingle161["PgSelectSingle[161∈6]<br />ᐸquery_interval_setᐳ"]:::plan
    PgClassExpression162["PgClassExpression[162∈6]<br />ᐸ__query_in...al_set__.vᐳ"]:::plan
    Access163["Access[163∈6]<br />ᐸ162.secondsᐳ"]:::plan
    Access164["Access[164∈6]<br />ᐸ162.minutesᐳ"]:::plan
    Access165["Access[165∈6]<br />ᐸ162.hoursᐳ"]:::plan
    Access166["Access[166∈6]<br />ᐸ162.daysᐳ"]:::plan
    Access167["Access[167∈6]<br />ᐸ162.monthsᐳ"]:::plan
    Access168["Access[168∈6]<br />ᐸ162.yearsᐳ"]:::plan
    __Item169>"__Item[169∈7]<br />ᐸ132ᐳ"]:::itemplan
    PgSelectSingle170["PgSelectSingle[170∈7]<br />ᐸpostᐳ"]:::plan
    PgClassExpression171["PgClassExpression[171∈7]<br />ᐸ__post__.”id”ᐳ"]:::plan
    Access187["Access[187∈7]<br />ᐸ169.0ᐳ"]:::plan
    __Item182>"__Item[182∈8]<br />ᐸ187ᐳ"]:::itemplan
    PgSelectSingle183["PgSelectSingle[183∈8]<br />ᐸpost_computed_interval_setᐳ"]:::plan
    PgClassExpression184["PgClassExpression[184∈8]<br />ᐸ__post_com...al_set__.vᐳ"]:::plan
    Access185["Access[185∈8]<br />ᐸ184.secondsᐳ"]:::plan
    Access186["Access[186∈8]<br />ᐸ184.minutesᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access30
    __Value3 --> Access31
    Access30 & Access31 --> Object32
    Object32 --> PgSelect29
    Object32 --> PgSelect55
    Object32 --> PgSelect81
    Object32 & __InputStaticLeaf85 & Constant93 & __InputStaticLeaf87 --> PgSelect94
    Object32 --> PgSelect103
    Object32 --> PgSelect112
    Object32 --> PgSelect132
    PgSelect29 ==> __Item136
    __Item136 --> PgSelectSingle137
    PgSelectSingle137 --> PgClassExpression138
    PgSelectSingle137 --> PgClassExpression139
    PgSelectSingle137 --> PgClassExpression140
    PgSelectSingle137 --> PgClassExpression141
    PgSelectSingle137 --> PgClassExpression142
    PgSelectSingle137 --> PgClassExpression143
    PgSelectSingle137 --> PgClassExpression144
    PgClassExpression144 --> Access145
    PgClassExpression144 --> Access146
    PgClassExpression144 --> Access147
    PgSelect55 ==> __Item148
    __Item148 --> PgSelectSingle149
    PgSelectSingle149 --> PgClassExpression150
    PgSelect81 ==> __Item151
    __Item151 --> PgSelectSingle152
    PgSelectSingle152 --> PgClassExpression153
    PgSelect94 ==> __Item154
    __Item154 --> PgSelectSingle155
    PgSelectSingle155 --> PgClassExpression156
    PgSelect103 ==> __Item157
    __Item157 --> PgSelectSingle158
    PgSelectSingle158 --> PgClassExpression159
    PgSelect112 ==> __Item160
    __Item160 --> PgSelectSingle161
    PgSelectSingle161 --> PgClassExpression162
    PgClassExpression162 --> Access163
    PgClassExpression162 --> Access164
    PgClassExpression162 --> Access165
    PgClassExpression162 --> Access166
    PgClassExpression162 --> Access167
    PgClassExpression162 --> Access168
    PgSelect132 ==> __Item169
    __Item169 --> PgSelectSingle170
    PgSelectSingle170 --> PgClassExpression171
    __Item169 --> Access187
    Access187 ==> __Item182
    __Item182 --> PgSelectSingle183
    PgSelectSingle183 --> PgClassExpression184
    PgClassExpression184 --> Access185
    PgClassExpression184 --> Access186

    %% plan-to-path relationships

    subgraph "Buckets for queries/v4/simple-procedure-query"
    Bucket0("Bucket 0<br />(root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,PgSelect29,Access30,Access31,Object32,PgSelect55,PgSelect81,__InputStaticLeaf85,__InputStaticLeaf87,Constant93,PgSelect94,PgSelect103,PgSelect112,PgSelect132 bucket0
    Bucket1("Bucket 1<br />(listItem)<br />Deps: 29<br /><br />ROOT __Item{1}ᐸ29ᐳ[136]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item136,PgSelectSingle137,PgClassExpression138,PgClassExpression139,PgClassExpression140,PgClassExpression141,PgClassExpression142,PgClassExpression143,PgClassExpression144,Access145,Access146,Access147 bucket1
    Bucket2("Bucket 2<br />(listItem)<br />Deps: 55<br /><br />ROOT __Item{2}ᐸ55ᐳ[148]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item148,PgSelectSingle149,PgClassExpression150 bucket2
    Bucket3("Bucket 3<br />(listItem)<br />Deps: 81<br /><br />ROOT __Item{3}ᐸ81ᐳ[151]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,__Item151,PgSelectSingle152,PgClassExpression153 bucket3
    Bucket4("Bucket 4<br />(listItem)<br />Deps: 94<br /><br />ROOT __Item{4}ᐸ94ᐳ[154]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item154,PgSelectSingle155,PgClassExpression156 bucket4
    Bucket5("Bucket 5<br />(listItem)<br />Deps: 103<br /><br />ROOT __Item{5}ᐸ103ᐳ[157]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item157,PgSelectSingle158,PgClassExpression159 bucket5
    Bucket6("Bucket 6<br />(listItem)<br />Deps: 112<br /><br />ROOT __Item{6}ᐸ112ᐳ[160]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,__Item160,PgSelectSingle161,PgClassExpression162,Access163,Access164,Access165,Access166,Access167,Access168 bucket6
    Bucket7("Bucket 7<br />(listItem)<br />Deps: 132<br /><br />ROOT __Item{7}ᐸ132ᐳ[169]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,__Item169,PgSelectSingle170,PgClassExpression171,Access187 bucket7
    Bucket8("Bucket 8<br />(listItem)<br />Deps: 187<br /><br />ROOT __Item{8}ᐸ187ᐳ[182]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item182,PgSelectSingle183,PgClassExpression184,Access185,Access186 bucket8
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7
    Bucket7 --> Bucket8
    end
