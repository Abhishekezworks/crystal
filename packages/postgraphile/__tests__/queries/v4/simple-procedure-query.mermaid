graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    Access30["Access[30∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access31["Access[31∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object32["Object[32∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    PgSelect29[["PgSelect[29∈0]<br />ᐸcompound_type_set_queryᐳ"]]:::plan
    __Item33>"__Item[33∈1]<br />ᐸ29ᐳ"]:::itemplan
    PgSelectSingle34["PgSelectSingle[34∈1]<br />ᐸcompound_type_set_queryᐳ"]:::plan
    PgClassExpression35["PgClassExpression[35∈1]<br />ᐸ__compound...uery__.”a”ᐳ"]:::plan
    PgClassExpression36["PgClassExpression[36∈1]<br />ᐸ__compound...uery__.”b”ᐳ"]:::plan
    PgClassExpression37["PgClassExpression[37∈1]<br />ᐸ__compound...uery__.”c”ᐳ"]:::plan
    PgClassExpression38["PgClassExpression[38∈1]<br />ᐸ__compound...uery__.”d”ᐳ"]:::plan
    PgClassExpression39["PgClassExpression[39∈1]<br />ᐸ__compound...uery__.”e”ᐳ"]:::plan
    PgClassExpression40["PgClassExpression[40∈1]<br />ᐸ__compound...uery__.”f”ᐳ"]:::plan
    PgClassExpression41["PgClassExpression[41∈1]<br />ᐸ__compound...uery__.”g”ᐳ"]:::plan
    Access42["Access[42∈1]<br />ᐸ41.hoursᐳ"]:::plan
    Access43["Access[43∈1]<br />ᐸ41.minutesᐳ"]:::plan
    Access44["Access[44∈1]<br />ᐸ41.secondsᐳ"]:::plan
    PgSelect67[["PgSelect[67∈0]<br />ᐸtable_set_queryᐳ"]]:::plan
    __Item71>"__Item[71∈2]<br />ᐸ67ᐳ"]:::itemplan
    PgSelectSingle72["PgSelectSingle[72∈2]<br />ᐸtable_set_queryᐳ"]:::plan
    PgClassExpression73["PgClassExpression[73∈2]<br />ᐸ__table_se...full_name”ᐳ"]:::plan
    PgSelect96[["PgSelect[96∈0]<br />ᐸtable_set_queryᐳ"]]:::plan
    __Item100>"__Item[100∈3]<br />ᐸ96ᐳ"]:::itemplan
    PgSelectSingle101["PgSelectSingle[101∈3]<br />ᐸtable_set_queryᐳ"]:::plan
    PgClassExpression102["PgClassExpression[102∈3]<br />ᐸ__table_se...full_name”ᐳ"]:::plan
    __InputStaticLeaf103["__InputStaticLeaf[103∈0]"]:::plan
    __InputStaticLeaf105["__InputStaticLeaf[105∈0]"]:::plan
    Constant111["Constant[111∈0]"]:::plan
    PgSelect112[["PgSelect[112∈0]<br />ᐸint_set_queryᐳ"]]:::plan
    __Item116>"__Item[116∈4]<br />ᐸ112ᐳ"]:::itemplan
    PgSelectSingle117["PgSelectSingle[117∈4]<br />ᐸint_set_queryᐳ"]:::plan
    PgClassExpression118["PgClassExpression[118∈4]<br />ᐸ__int_set_query__.vᐳ"]:::plan
    PgSelect124[["PgSelect[124∈0]<br />ᐸstatic_big_integerᐳ"]]:::plan
    __Item128>"__Item[128∈5]<br />ᐸ124ᐳ"]:::itemplan
    PgSelectSingle129["PgSelectSingle[129∈5]<br />ᐸstatic_big_integerᐳ"]:::plan
    PgClassExpression130["PgClassExpression[130∈5]<br />ᐸ__static_b...nteger__.vᐳ"]:::plan
    PgSelect136[["PgSelect[136∈0]<br />ᐸquery_interval_setᐳ"]]:::plan
    __Item140>"__Item[140∈6]<br />ᐸ136ᐳ"]:::itemplan
    PgSelectSingle141["PgSelectSingle[141∈6]<br />ᐸquery_interval_setᐳ"]:::plan
    PgClassExpression142["PgClassExpression[142∈6]<br />ᐸ__query_in...al_set__.vᐳ"]:::plan
    Access143["Access[143∈6]<br />ᐸ142.secondsᐳ"]:::plan
    Access144["Access[144∈6]<br />ᐸ142.minutesᐳ"]:::plan
    Access145["Access[145∈6]<br />ᐸ142.hoursᐳ"]:::plan
    Access146["Access[146∈6]<br />ᐸ142.daysᐳ"]:::plan
    Access147["Access[147∈6]<br />ᐸ142.monthsᐳ"]:::plan
    Access148["Access[148∈6]<br />ᐸ142.yearsᐳ"]:::plan
    PgSelect165[["PgSelect[165∈0]<br />ᐸpostᐳ"]]:::plan
    __Item169>"__Item[169∈7]<br />ᐸ165ᐳ"]:::itemplan
    PgSelectSingle170["PgSelectSingle[170∈7]<br />ᐸpostᐳ"]:::plan
    PgClassExpression171["PgClassExpression[171∈7]<br />ᐸ__post__.”id”ᐳ"]:::plan
    Access187["Access[187∈7]<br />ᐸ169.0ᐳ"]:::plan
    __Item182>"__Item[182∈8]<br />ᐸ187ᐳ"]:::itemplan
    PgSelectSingle183["PgSelectSingle[183∈8]<br />ᐸpost_computed_interval_setᐳ"]:::plan
    PgClassExpression184["PgClassExpression[184∈8]<br />ᐸ__post_com...al_set__.vᐳ"]:::plan
    Access185["Access[185∈8]<br />ᐸ184.secondsᐳ"]:::plan
    Access186["Access[186∈8]<br />ᐸ184.minutesᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access30
    __Value3 --> Access31
    Access30 & Access31 --> Object32
    Object32 --> PgSelect29
    PgSelect29 ==> __Item33
    __Item33 --> PgSelectSingle34
    PgSelectSingle34 --> PgClassExpression35
    PgSelectSingle34 --> PgClassExpression36
    PgSelectSingle34 --> PgClassExpression37
    PgSelectSingle34 --> PgClassExpression38
    PgSelectSingle34 --> PgClassExpression39
    PgSelectSingle34 --> PgClassExpression40
    PgSelectSingle34 --> PgClassExpression41
    PgClassExpression41 --> Access42
    PgClassExpression41 --> Access43
    PgClassExpression41 --> Access44
    Object32 --> PgSelect67
    PgSelect67 ==> __Item71
    __Item71 --> PgSelectSingle72
    PgSelectSingle72 --> PgClassExpression73
    Object32 --> PgSelect96
    PgSelect96 ==> __Item100
    __Item100 --> PgSelectSingle101
    PgSelectSingle101 --> PgClassExpression102
    Object32 & __InputStaticLeaf103 & Constant111 & __InputStaticLeaf105 --> PgSelect112
    PgSelect112 ==> __Item116
    __Item116 --> PgSelectSingle117
    PgSelectSingle117 --> PgClassExpression118
    Object32 --> PgSelect124
    PgSelect124 ==> __Item128
    __Item128 --> PgSelectSingle129
    PgSelectSingle129 --> PgClassExpression130
    Object32 --> PgSelect136
    PgSelect136 ==> __Item140
    __Item140 --> PgSelectSingle141
    PgSelectSingle141 --> PgClassExpression142
    PgClassExpression142 --> Access143
    PgClassExpression142 --> Access144
    PgClassExpression142 --> Access145
    PgClassExpression142 --> Access146
    PgClassExpression142 --> Access147
    PgClassExpression142 --> Access148
    Object32 --> PgSelect165
    PgSelect165 ==> __Item169
    __Item169 --> PgSelectSingle170
    PgSelectSingle170 --> PgClassExpression171
    __Item169 --> Access187
    Access187 ==> __Item182
    __Item182 --> PgSelectSingle183
    PgSelectSingle183 --> PgClassExpression184
    PgClassExpression184 --> Access185
    PgClassExpression184 --> Access186

    %% plan-to-path relationships

    subgraph "Buckets for queries/v4/simple-procedure-query"
    Bucket0("Bucket 0<br />(root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,PgSelect29,Access30,Access31,Object32,PgSelect67,PgSelect96,__InputStaticLeaf103,__InputStaticLeaf105,Constant111,PgSelect112,PgSelect124,PgSelect136,PgSelect165 bucket0
    Bucket1("Bucket 1<br />(listItem)<br />Deps: 29<br /><br />ROOT __Item{1}ᐸ29ᐳ[33]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item33,PgSelectSingle34,PgClassExpression35,PgClassExpression36,PgClassExpression37,PgClassExpression38,PgClassExpression39,PgClassExpression40,PgClassExpression41,Access42,Access43,Access44 bucket1
    Bucket2("Bucket 2<br />(listItem)<br />Deps: 67<br /><br />ROOT __Item{2}ᐸ67ᐳ[71]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item71,PgSelectSingle72,PgClassExpression73 bucket2
    Bucket3("Bucket 3<br />(listItem)<br />Deps: 96<br /><br />ROOT __Item{3}ᐸ96ᐳ[100]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,__Item100,PgSelectSingle101,PgClassExpression102 bucket3
    Bucket4("Bucket 4<br />(listItem)<br />Deps: 112<br /><br />ROOT __Item{4}ᐸ112ᐳ[116]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item116,PgSelectSingle117,PgClassExpression118 bucket4
    Bucket5("Bucket 5<br />(listItem)<br />Deps: 124<br /><br />ROOT __Item{5}ᐸ124ᐳ[128]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item128,PgSelectSingle129,PgClassExpression130 bucket5
    Bucket6("Bucket 6<br />(listItem)<br />Deps: 136<br /><br />ROOT __Item{6}ᐸ136ᐳ[140]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,__Item140,PgSelectSingle141,PgClassExpression142,Access143,Access144,Access145,Access146,Access147,Access148 bucket6
    Bucket7("Bucket 7<br />(listItem)<br />Deps: 165<br /><br />ROOT __Item{7}ᐸ165ᐳ[169]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,__Item169,PgSelectSingle170,PgClassExpression171,Access187 bucket7
    Bucket8("Bucket 8<br />(listItem)<br />Deps: 187<br /><br />ROOT __Item{8}ᐸ187ᐳ[182]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item182,PgSelectSingle183,PgClassExpression184,Access185,Access186 bucket8
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7
    Bucket7 --> Bucket8
    end
