graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    __InputStaticLeaf7["__InputStaticLeaf[7∈0]"]:::plan
    __InputStaticLeaf11["__InputStaticLeaf[11∈0]"]:::plan
    Access31["Access[31∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access32["Access[32∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object33["Object[33∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    Lambda35["Lambda[35∈0]<br />ᐸparseCursorᐳ"]:::plan
    Connection34["Connection[34∈0]<br />ᐸ30ᐳ"]:::plan
    PgPageInfo36["PgPageInfo[36∈0]"]:::plan
    PgValidateParsedCursor41["PgValidateParsedCursor[41∈0]"]:::plan
    Access42["Access[42∈0]<br />ᐸ35.1ᐳ"]:::plan
    ToPg43["ToPg[43∈0]"]:::plan
    PgSelect37[["PgSelect[37∈0]<br />ᐸpersonᐳ"]]:::plan
    First38["First[38∈0]"]:::plan
    PgSelectSingle39["PgSelectSingle[39∈0]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression44["PgClassExpression[44∈0]<br />ᐸ__person__.”id”ᐳ"]:::plan
    List45["List[45∈0]<br />ᐸ44ᐳ"]:::plan
    PgCursor40["PgCursor[40∈0]"]:::plan
    Last47["Last[47∈0]"]:::plan
    PgSelectSingle48["PgSelectSingle[48∈0]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression53["PgClassExpression[53∈0]<br />ᐸ__person__.”id”ᐳ"]:::plan
    List54["List[54∈0]<br />ᐸ53ᐳ"]:::plan
    PgCursor49["PgCursor[49∈0]"]:::plan
    Lambda56["Lambda[56∈0]<br />ᐸlistHasMoreᐳ"]:::plan
    Constant60["Constant[60∈0]"]:::plan
    PgSelect61[["PgSelect[61∈0]<br />ᐸpersonᐳ"]]:::plan
    First62["First[62∈0]"]:::plan
    PgSelectSingle63["PgSelectSingle[63∈0]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression64["PgClassExpression[64∈0]<br />ᐸcount(*)ᐳ"]:::plan
    __Item69>"__Item[69∈1]<br />ᐸ37ᐳ"]:::itemplan
    PgSelectSingle70["PgSelectSingle[70∈1]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression72["PgClassExpression[72∈1]<br />ᐸ__person__.”id”ᐳ"]:::plan
    List73["List[73∈1]<br />ᐸ72ᐳ"]:::plan
    PgCursor71["PgCursor[71∈1]"]:::plan
    PgClassExpression75["PgClassExpression[75∈1]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression76["PgClassExpression[76∈1]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgClassExpression77["PgClassExpression[77∈1]<br />ᐸ__person__.”config”ᐳ"]:::plan
    PgClassExpression78["PgClassExpression[78∈1]<br />ᐸ__person__...n_from_ip”ᐳ"]:::plan
    __InputStaticLeaf79["__InputStaticLeaf[79∈0]"]:::plan
    __InputStaticLeaf83["__InputStaticLeaf[83∈0]"]:::plan
    Lambda107["Lambda[107∈0]<br />ᐸparseCursorᐳ"]:::plan
    Connection106["Connection[106∈0]<br />ᐸ102ᐳ"]:::plan
    PgPageInfo108["PgPageInfo[108∈0]"]:::plan
    PgValidateParsedCursor113["PgValidateParsedCursor[113∈0]"]:::plan
    Access114["Access[114∈0]<br />ᐸ107.1ᐳ"]:::plan
    ToPg115["ToPg[115∈0]"]:::plan
    PgSelect109[["PgSelect[109∈0]<br />ᐸpersonᐳ"]]:::plan
    First110["First[110∈0]"]:::plan
    PgSelectSingle111["PgSelectSingle[111∈0]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression116["PgClassExpression[116∈0]<br />ᐸ__person__.”id”ᐳ"]:::plan
    List117["List[117∈0]<br />ᐸ116ᐳ"]:::plan
    PgCursor112["PgCursor[112∈0]"]:::plan
    Last119["Last[119∈0]"]:::plan
    PgSelectSingle120["PgSelectSingle[120∈0]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression125["PgClassExpression[125∈0]<br />ᐸ__person__.”id”ᐳ"]:::plan
    List126["List[126∈0]<br />ᐸ125ᐳ"]:::plan
    PgCursor121["PgCursor[121∈0]"]:::plan
    Lambda128["Lambda[128∈0]<br />ᐸlistHasMoreᐳ"]:::plan
    Constant132["Constant[132∈0]"]:::plan
    PgSelect133[["PgSelect[133∈0]<br />ᐸpersonᐳ"]]:::plan
    First134["First[134∈0]"]:::plan
    PgSelectSingle135["PgSelectSingle[135∈0]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression136["PgClassExpression[136∈0]<br />ᐸcount(*)ᐳ"]:::plan
    __Item141>"__Item[141∈2]<br />ᐸ109ᐳ"]:::itemplan
    PgSelectSingle142["PgSelectSingle[142∈2]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression144["PgClassExpression[144∈2]<br />ᐸ__person__.”id”ᐳ"]:::plan
    List145["List[145∈2]<br />ᐸ144ᐳ"]:::plan
    PgCursor143["PgCursor[143∈2]"]:::plan
    PgClassExpression147["PgClassExpression[147∈2]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression148["PgClassExpression[148∈2]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgClassExpression149["PgClassExpression[149∈2]<br />ᐸ__person__.”config”ᐳ"]:::plan
    PgClassExpression150["PgClassExpression[150∈2]<br />ᐸ__person__...n_from_ip”ᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access31
    __Value3 --> Access32
    Access31 & Access32 --> Object33
    __InputStaticLeaf11 --> Lambda35
    __InputStaticLeaf7 & Lambda35 --> Connection34
    Lambda35 --> PgValidateParsedCursor41
    Lambda35 --> Access42
    Access42 --> ToPg43
    Object33 & Connection34 & Lambda35 & PgValidateParsedCursor41 & ToPg43 --> PgSelect37
    PgSelect37 --> First38
    First38 --> PgSelectSingle39
    PgSelectSingle39 --> PgClassExpression44
    PgClassExpression44 --> List45
    List45 --> PgCursor40
    PgSelect37 --> Last47
    Last47 --> PgSelectSingle48
    PgSelectSingle48 --> PgClassExpression53
    PgClassExpression53 --> List54
    List54 --> PgCursor49
    PgSelect37 --> Lambda56
    Object33 & Connection34 --> PgSelect61
    PgSelect61 --> First62
    First62 --> PgSelectSingle63
    PgSelectSingle63 --> PgClassExpression64
    PgSelect37 ==> __Item69
    __Item69 --> PgSelectSingle70
    PgSelectSingle70 --> PgClassExpression72
    PgClassExpression72 --> List73
    List73 --> PgCursor71
    PgSelectSingle70 --> PgClassExpression75
    PgSelectSingle70 --> PgClassExpression76
    PgSelectSingle70 --> PgClassExpression77
    PgSelectSingle70 --> PgClassExpression78
    __InputStaticLeaf83 --> Lambda107
    __InputStaticLeaf79 & Lambda107 --> Connection106
    Lambda107 --> PgValidateParsedCursor113
    Lambda107 --> Access114
    Access114 --> ToPg115
    Object33 & Connection106 & Lambda107 & PgValidateParsedCursor113 & ToPg115 --> PgSelect109
    PgSelect109 --> First110
    First110 --> PgSelectSingle111
    PgSelectSingle111 --> PgClassExpression116
    PgClassExpression116 --> List117
    List117 --> PgCursor112
    PgSelect109 --> Last119
    Last119 --> PgSelectSingle120
    PgSelectSingle120 --> PgClassExpression125
    PgClassExpression125 --> List126
    List126 --> PgCursor121
    PgSelect109 --> Lambda128
    Object33 & Connection106 --> PgSelect133
    PgSelect133 --> First134
    First134 --> PgSelectSingle135
    PgSelectSingle135 --> PgClassExpression136
    PgSelect109 ==> __Item141
    __Item141 --> PgSelectSingle142
    PgSelectSingle142 --> PgClassExpression144
    PgClassExpression144 --> List145
    List145 --> PgCursor143
    PgSelectSingle142 --> PgClassExpression147
    PgSelectSingle142 --> PgClassExpression148
    PgSelectSingle142 --> PgClassExpression149
    PgSelectSingle142 --> PgClassExpression150

    %% plan-to-path relationships

    subgraph "Buckets for queries/v4/connections-blankcursor"
    Bucket0("Bucket 0<br />(root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,__InputStaticLeaf7,__InputStaticLeaf11,Access31,Access32,Object33,Connection34,Lambda35,PgPageInfo36,PgSelect37,First38,PgSelectSingle39,PgCursor40,PgValidateParsedCursor41,Access42,ToPg43,PgClassExpression44,List45,Last47,PgSelectSingle48,PgCursor49,PgClassExpression53,List54,Lambda56,Constant60,PgSelect61,First62,PgSelectSingle63,PgClassExpression64,__InputStaticLeaf79,__InputStaticLeaf83,Connection106,Lambda107,PgPageInfo108,PgSelect109,First110,PgSelectSingle111,PgCursor112,PgValidateParsedCursor113,Access114,ToPg115,PgClassExpression116,List117,Last119,PgSelectSingle120,PgCursor121,PgClassExpression125,List126,Lambda128,Constant132,PgSelect133,First134,PgSelectSingle135,PgClassExpression136 bucket0
    Bucket1("Bucket 1<br />(listItem)<br />Deps: 37<br /><br />ROOT __Item{1}ᐸ37ᐳ[69]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item69,PgSelectSingle70,PgCursor71,PgClassExpression72,List73,PgClassExpression75,PgClassExpression76,PgClassExpression77,PgClassExpression78 bucket1
    Bucket2("Bucket 2<br />(listItem)<br />Deps: 109<br /><br />ROOT __Item{2}ᐸ109ᐳ[141]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item141,PgSelectSingle142,PgCursor143,PgClassExpression144,List145,PgClassExpression147,PgClassExpression148,PgClassExpression149,PgClassExpression150 bucket2
    Bucket0 --> Bucket1 & Bucket2
    end
