graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    Access37["Access[37∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access38["Access[38∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object39["Object[39∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    Connection40["Connection[40∈0]<br />ᐸ36ᐳ"]:::plan
    PgSelect41[["PgSelect[41∈0]<br />ᐸtypesᐳ"]]:::plan
    PgSelect43[["PgSelect[43∈0]<br />ᐸtypesᐳ"]]:::plan
    First44["First[44∈0]"]:::plan
    PgSelectSingle45["PgSelectSingle[45∈0]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression46["PgClassExpression[46∈0]<br />ᐸcount(*)ᐳ"]:::plan
    PgPageInfo47["PgPageInfo[47∈0]"]:::plan
    __Item48>"__Item[48∈1]<br />ᐸ41ᐳ"]:::itemplan
    PgSelectSingle49["PgSelectSingle[49∈1]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression50["PgClassExpression[50∈1]<br />ᐸ__types__.”id”ᐳ"]:::plan
    PgClassExpression51["PgClassExpression[51∈1]<br />ᐸ__types__.”regrole”ᐳ"]:::plan
    PgClassExpression52["PgClassExpression[52∈1]<br />ᐸ__types__....namespace”ᐳ"]:::plan
    PgClassExpression53["PgClassExpression[53∈1]<br />ᐸ__types__....ay_domain”ᐳ"]:::plan
    Map102["Map[102∈1]<br />ᐸ49:{”0”:1,”1”:2,”2”:3,”3”:4,”4”:5,”5”:6,”6”:7,”7”:8}ᐳ"]:::plan
    List103["List[103∈1]<br />ᐸ102ᐳ"]:::plan
    First59["First[59∈1]"]:::plan
    PgSelectSingle60["PgSelectSingle[60∈1]<br />ᐸTemporarySource1ᐳ"]:::plan
    __Item61>"__Item[61∈2]<br />ᐸ53ᐳ"]:::itemplan
    PgClassExpression62["PgClassExpression[62∈1]<br />ᐸ__temporar...rce1__.”a”ᐳ"]:::plan
    PgClassExpression63["PgClassExpression[63∈1]<br />ᐸ__temporar...rce1__.”b”ᐳ"]:::plan
    PgClassExpression64["PgClassExpression[64∈1]<br />ᐸ__temporar...rce1__.”c”ᐳ"]:::plan
    PgClassExpression65["PgClassExpression[65∈1]<br />ᐸ__temporar...rce1__.”d”ᐳ"]:::plan
    PgClassExpression66["PgClassExpression[66∈1]<br />ᐸ__temporar...rce1__.”e”ᐳ"]:::plan
    PgClassExpression67["PgClassExpression[67∈1]<br />ᐸ__temporar...rce1__.”f”ᐳ"]:::plan
    PgClassExpression68["PgClassExpression[68∈1]<br />ᐸ__temporar....”foo_bar”ᐳ"]:::plan
    Constant88["Constant[88∈0]"]:::plan
    Constant89["Constant[89∈0]"]:::plan
    First91["First[91∈0]"]:::plan
    PgSelectSingle92["PgSelectSingle[92∈0]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression94["PgClassExpression[94∈0]<br />ᐸ__types__.”id”ᐳ"]:::plan
    List95["List[95∈0]<br />ᐸ94ᐳ"]:::plan
    PgCursor93["PgCursor[93∈0]"]:::plan
    Last97["Last[97∈0]"]:::plan
    PgSelectSingle98["PgSelectSingle[98∈0]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression100["PgClassExpression[100∈0]<br />ᐸ__types__.”id”ᐳ"]:::plan
    List101["List[101∈0]<br />ᐸ100ᐳ"]:::plan
    PgCursor99["PgCursor[99∈0]"]:::plan

    %% plan dependencies
    __Value3 --> Access37
    __Value3 --> Access38
    Access37 & Access38 --> Object39
    Object39 & Connection40 --> PgSelect41
    Object39 & Connection40 --> PgSelect43
    PgSelect43 --> First44
    First44 --> PgSelectSingle45
    PgSelectSingle45 --> PgClassExpression46
    PgSelect41 ==> __Item48
    __Item48 --> PgSelectSingle49
    PgSelectSingle49 --> PgClassExpression50
    PgSelectSingle49 --> PgClassExpression51
    PgSelectSingle49 --> PgClassExpression52
    PgSelectSingle49 --> PgClassExpression53
    PgSelectSingle49 --> Map102
    Map102 --> List103
    List103 --> First59
    First59 --> PgSelectSingle60
    PgClassExpression53 ==> __Item61
    PgSelectSingle60 --> PgClassExpression62
    PgSelectSingle60 --> PgClassExpression63
    PgSelectSingle60 --> PgClassExpression64
    PgSelectSingle60 --> PgClassExpression65
    PgSelectSingle60 --> PgClassExpression66
    PgSelectSingle60 --> PgClassExpression67
    PgSelectSingle60 --> PgClassExpression68
    PgSelect41 --> First91
    First91 --> PgSelectSingle92
    PgSelectSingle92 --> PgClassExpression94
    PgClassExpression94 --> List95
    List95 --> PgCursor93
    PgSelect41 --> Last97
    Last97 --> PgSelectSingle98
    PgSelectSingle98 --> PgClassExpression100
    PgClassExpression100 --> List101
    List101 --> PgCursor99

    %% plan-to-path relationships

    subgraph "Buckets for queries/v4/pg11.types"
    Bucket0("Bucket 0<br />(root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,Access37,Access38,Object39,Connection40,PgSelect41,PgSelect43,First44,PgSelectSingle45,PgClassExpression46,PgPageInfo47,Constant88,Constant89,First91,PgSelectSingle92,PgCursor93,PgClassExpression94,List95,Last97,PgSelectSingle98,PgCursor99,PgClassExpression100,List101 bucket0
    Bucket1("Bucket 1<br />(listItem)<br />Deps: 41<br /><br />ROOT __Item{1}ᐸ41ᐳ[48]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item48,PgSelectSingle49,PgClassExpression50,PgClassExpression51,PgClassExpression52,PgClassExpression53,First59,PgSelectSingle60,PgClassExpression62,PgClassExpression63,PgClassExpression64,PgClassExpression65,PgClassExpression66,PgClassExpression67,PgClassExpression68,Map102,List103 bucket1
    Bucket2("Bucket 2<br />(listItem)<br />Deps: 53<br /><br />ROOT __Item{2}ᐸ53ᐳ[61]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item61 bucket2
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    end
