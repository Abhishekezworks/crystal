graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    Access37["Access[37∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access38["Access[38∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object39["Object[39∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    Connection40["Connection[40∈0]<br />ᐸ36ᐳ"]:::plan
    PgSelect41[["PgSelect[41∈0]<br />ᐸtypesᐳ"]]:::plan
    __Item42>"__Item[42∈1]<br />ᐸ41ᐳ"]:::itemplan
    PgSelectSingle43["PgSelectSingle[43∈1]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression44["PgClassExpression[44∈1]<br />ᐸ__types__.”id”ᐳ"]:::plan
    PgClassExpression45["PgClassExpression[45∈1]<br />ᐸ__types__.”regrole”ᐳ"]:::plan
    PgClassExpression46["PgClassExpression[46∈1]<br />ᐸ__types__....namespace”ᐳ"]:::plan
    PgClassExpression47["PgClassExpression[47∈1]<br />ᐸ__types__....ay_domain”ᐳ"]:::plan
    __Item48>"__Item[48∈2]<br />ᐸ47ᐳ"]:::itemplan
    Map102["Map[102∈1]<br />ᐸ43:{”0”:4,”1”:5,”2”:6,”3”:7,”4”:8,”5”:9,”6”:10,”7”:11}ᐳ"]:::plan
    List103["List[103∈1]<br />ᐸ102ᐳ"]:::plan
    First54["First[54∈1]"]:::plan
    PgSelectSingle55["PgSelectSingle[55∈1]<br />ᐸTemporarySource1ᐳ"]:::plan
    PgClassExpression56["PgClassExpression[56∈1]<br />ᐸ__temporar...rce1__.”a”ᐳ"]:::plan
    PgClassExpression57["PgClassExpression[57∈1]<br />ᐸ__temporar...rce1__.”b”ᐳ"]:::plan
    PgClassExpression58["PgClassExpression[58∈1]<br />ᐸ__temporar...rce1__.”c”ᐳ"]:::plan
    PgClassExpression59["PgClassExpression[59∈1]<br />ᐸ__temporar...rce1__.”d”ᐳ"]:::plan
    PgClassExpression60["PgClassExpression[60∈1]<br />ᐸ__temporar...rce1__.”e”ᐳ"]:::plan
    PgClassExpression61["PgClassExpression[61∈1]<br />ᐸ__temporar...rce1__.”f”ᐳ"]:::plan
    PgClassExpression62["PgClassExpression[62∈1]<br />ᐸ__temporar....”foo_bar”ᐳ"]:::plan
    PgSelect83[["PgSelect[83∈0]<br />ᐸtypesᐳ"]]:::plan
    First84["First[84∈0]"]:::plan
    PgSelectSingle85["PgSelectSingle[85∈0]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression86["PgClassExpression[86∈0]<br />ᐸcount(*)ᐳ"]:::plan
    PgPageInfo87["PgPageInfo[87∈0]"]:::plan
    Constant88["Constant[88∈0]"]:::plan
    Constant89["Constant[89∈0]"]:::plan
    First91["First[91∈0]"]:::plan
    PgSelectSingle92["PgSelectSingle[92∈0]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression94["PgClassExpression[94∈0]<br />ᐸ__types__.”id”ᐳ"]:::plan
    List95["List[95∈0]<br />ᐸ94ᐳ"]:::plan
    PgCursor93["PgCursor[93∈0]"]:::plan
    Last97["Last[97∈0]"]:::plan
    PgSelectSingle98["PgSelectSingle[98∈0]<br />ᐸtypesᐳ"]:::plan
    PgClassExpression100["PgClassExpression[100∈0]<br />ᐸ__types__.”id”ᐳ"]:::plan
    List101["List[101∈0]<br />ᐸ100ᐳ"]:::plan
    PgCursor99["PgCursor[99∈0]"]:::plan

    %% plan dependencies
    __Value3 --> Access37
    __Value3 --> Access38
    Access37 & Access38 --> Object39
    Object39 & Connection40 --> PgSelect41
    PgSelect41 ==> __Item42
    __Item42 --> PgSelectSingle43
    PgSelectSingle43 --> PgClassExpression44
    PgSelectSingle43 --> PgClassExpression45
    PgSelectSingle43 --> PgClassExpression46
    PgSelectSingle43 --> PgClassExpression47
    PgClassExpression47 ==> __Item48
    PgSelectSingle43 --> Map102
    Map102 --> List103
    List103 --> First54
    First54 --> PgSelectSingle55
    PgSelectSingle55 --> PgClassExpression56
    PgSelectSingle55 --> PgClassExpression57
    PgSelectSingle55 --> PgClassExpression58
    PgSelectSingle55 --> PgClassExpression59
    PgSelectSingle55 --> PgClassExpression60
    PgSelectSingle55 --> PgClassExpression61
    PgSelectSingle55 --> PgClassExpression62
    Object39 & Connection40 --> PgSelect83
    PgSelect83 --> First84
    First84 --> PgSelectSingle85
    PgSelectSingle85 --> PgClassExpression86
    PgSelect41 --> First91
    First91 --> PgSelectSingle92
    PgSelectSingle92 --> PgClassExpression94
    PgClassExpression94 --> List95
    List95 --> PgCursor93
    PgSelect41 --> Last97
    Last97 --> PgSelectSingle98
    PgSelectSingle98 --> PgClassExpression100
    PgClassExpression100 --> List101
    List101 --> PgCursor99

    %% plan-to-path relationships

    subgraph "Buckets for queries/v4/pg11.types"
    Bucket0("Bucket 0<br />(root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,Access37,Access38,Object39,Connection40,PgSelect41,PgSelect83,First84,PgSelectSingle85,PgClassExpression86,PgPageInfo87,Constant88,Constant89,First91,PgSelectSingle92,PgCursor93,PgClassExpression94,List95,Last97,PgSelectSingle98,PgCursor99,PgClassExpression100,List101 bucket0
    Bucket1("Bucket 1<br />(listItem)<br />Deps: 41<br /><br />ROOT __Item{1}ᐸ41ᐳ[42]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item42,PgSelectSingle43,PgClassExpression44,PgClassExpression45,PgClassExpression46,PgClassExpression47,First54,PgSelectSingle55,PgClassExpression56,PgClassExpression57,PgClassExpression58,PgClassExpression59,PgClassExpression60,PgClassExpression61,PgClassExpression62,Map102,List103 bucket1
    Bucket2("Bucket 2<br />(listItem)<br />Deps: 47<br /><br />ROOT __Item{2}ᐸ47ᐳ[48]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item48 bucket2
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    end
