graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    Access27["Access[27∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access28["Access[28∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object29["Object[29∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    PgSelect26[["PgSelect[26∈0]<br />ᐸpersonᐳ"]]:::plan
    PgSelect49[["PgSelect[49∈0]<br />ᐸpersonᐳ"]]:::plan
    PgSelect73[["PgSelect[73∈0]<br />ᐸpersonᐳ"]]:::plan
    PgSelect97[["PgSelect[97∈0]<br />ᐸpersonᐳ"]]:::plan
    __InputStaticLeaf107["__InputStaticLeaf[107∈0]"]:::plan
    PgSelect117[["PgSelect[117∈0]<br />ᐸpostᐳ"]]:::plan
    __InputStaticLeaf127["__InputStaticLeaf[127∈0]"]:::plan
    PgSelect137[["PgSelect[137∈0]<br />ᐸpostᐳ"]]:::plan
    PgSelect160[["PgSelect[160∈0]<br />ᐸpersonᐳ"]]:::plan
    PgSelect183[["PgSelect[183∈0]<br />ᐸpersonᐳ"]]:::plan
    PgSelect230[["PgSelect[230∈0]<br />ᐸpersonᐳ"]]:::plan
    PgSelect252[["PgSelect[252∈0]<br />ᐸpostᐳ"]]:::plan
    __Item256>"__Item[256∈1]<br />ᐸ26ᐳ"]:::itemplan
    PgSelectSingle257["PgSelectSingle[257∈1]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression258["PgClassExpression[258∈1]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression259["PgClassExpression[259∈1]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression260["PgClassExpression[260∈1]<br />ᐸ__person__.”email”ᐳ"]:::plan
    __Item261>"__Item[261∈2]<br />ᐸ49ᐳ"]:::itemplan
    PgSelectSingle262["PgSelectSingle[262∈2]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression263["PgClassExpression[263∈2]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression264["PgClassExpression[264∈2]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression265["PgClassExpression[265∈2]<br />ᐸ__person__.”email”ᐳ"]:::plan
    __Item266>"__Item[266∈3]<br />ᐸ73ᐳ"]:::itemplan
    PgSelectSingle267["PgSelectSingle[267∈3]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression268["PgClassExpression[268∈3]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression269["PgClassExpression[269∈3]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression270["PgClassExpression[270∈3]<br />ᐸ__person__.”email”ᐳ"]:::plan
    __Item271>"__Item[271∈4]<br />ᐸ97ᐳ"]:::itemplan
    PgSelectSingle272["PgSelectSingle[272∈4]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression273["PgClassExpression[273∈4]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression274["PgClassExpression[274∈4]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression275["PgClassExpression[275∈4]<br />ᐸ__person__.”email”ᐳ"]:::plan
    __Item276>"__Item[276∈5]<br />ᐸ117ᐳ"]:::itemplan
    PgSelectSingle277["PgSelectSingle[277∈5]<br />ᐸpostᐳ"]:::plan
    PgClassExpression278["PgClassExpression[278∈5]<br />ᐸ__post__.”headline”ᐳ"]:::plan
    PgClassExpression279["PgClassExpression[279∈5]<br />ᐸ__post__.”author_id”ᐳ"]:::plan
    __Item280>"__Item[280∈6]<br />ᐸ137ᐳ"]:::itemplan
    PgSelectSingle281["PgSelectSingle[281∈6]<br />ᐸpostᐳ"]:::plan
    PgClassExpression282["PgClassExpression[282∈6]<br />ᐸ__post__.”headline”ᐳ"]:::plan
    PgClassExpression283["PgClassExpression[283∈6]<br />ᐸ__post__.”author_id”ᐳ"]:::plan
    __Item284>"__Item[284∈7]<br />ᐸ160ᐳ"]:::itemplan
    PgSelectSingle285["PgSelectSingle[285∈7]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression286["PgClassExpression[286∈7]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression287["PgClassExpression[287∈7]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression288["PgClassExpression[288∈7]<br />ᐸ__person__.”email”ᐳ"]:::plan
    __Item289>"__Item[289∈8]<br />ᐸ183ᐳ"]:::itemplan
    PgSelectSingle290["PgSelectSingle[290∈8]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression291["PgClassExpression[291∈8]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression292["PgClassExpression[292∈8]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression293["PgClassExpression[293∈8]<br />ᐸ__person__.”email”ᐳ"]:::plan
    __Item298>"__Item[298∈9]<br />ᐸ230ᐳ"]:::itemplan
    PgSelectSingle299["PgSelectSingle[299∈9]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression300["PgClassExpression[300∈9]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression301["PgClassExpression[301∈9]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression302["PgClassExpression[302∈9]<br />ᐸ__person__.”email”ᐳ"]:::plan
    __Item303>"__Item[303∈10]<br />ᐸ252ᐳ"]:::itemplan
    PgSelectSingle304["PgSelectSingle[304∈10]<br />ᐸpostᐳ"]:::plan
    PgClassExpression305["PgClassExpression[305∈10]<br />ᐸ__post__.”headline”ᐳ"]:::plan
    PgClassExpression306["PgClassExpression[306∈10]<br />ᐸ__post__.”author_id”ᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access27
    __Value3 --> Access28
    Access27 & Access28 --> Object29
    Object29 --> PgSelect26
    Object29 --> PgSelect49
    Object29 --> PgSelect73
    Object29 --> PgSelect97
    Object29 & __InputStaticLeaf107 --> PgSelect117
    Object29 & __InputStaticLeaf127 --> PgSelect137
    Object29 --> PgSelect160
    Object29 --> PgSelect183
    Object29 --> PgSelect230
    Object29 --> PgSelect252
    PgSelect26 ==> __Item256
    __Item256 --> PgSelectSingle257
    PgSelectSingle257 --> PgClassExpression258
    PgSelectSingle257 --> PgClassExpression259
    PgSelectSingle257 --> PgClassExpression260
    PgSelect49 ==> __Item261
    __Item261 --> PgSelectSingle262
    PgSelectSingle262 --> PgClassExpression263
    PgSelectSingle262 --> PgClassExpression264
    PgSelectSingle262 --> PgClassExpression265
    PgSelect73 ==> __Item266
    __Item266 --> PgSelectSingle267
    PgSelectSingle267 --> PgClassExpression268
    PgSelectSingle267 --> PgClassExpression269
    PgSelectSingle267 --> PgClassExpression270
    PgSelect97 ==> __Item271
    __Item271 --> PgSelectSingle272
    PgSelectSingle272 --> PgClassExpression273
    PgSelectSingle272 --> PgClassExpression274
    PgSelectSingle272 --> PgClassExpression275
    PgSelect117 ==> __Item276
    __Item276 --> PgSelectSingle277
    PgSelectSingle277 --> PgClassExpression278
    PgSelectSingle277 --> PgClassExpression279
    PgSelect137 ==> __Item280
    __Item280 --> PgSelectSingle281
    PgSelectSingle281 --> PgClassExpression282
    PgSelectSingle281 --> PgClassExpression283
    PgSelect160 ==> __Item284
    __Item284 --> PgSelectSingle285
    PgSelectSingle285 --> PgClassExpression286
    PgSelectSingle285 --> PgClassExpression287
    PgSelectSingle285 --> PgClassExpression288
    PgSelect183 ==> __Item289
    __Item289 --> PgSelectSingle290
    PgSelectSingle290 --> PgClassExpression291
    PgSelectSingle290 --> PgClassExpression292
    PgSelectSingle290 --> PgClassExpression293
    PgSelect230 ==> __Item298
    __Item298 --> PgSelectSingle299
    PgSelectSingle299 --> PgClassExpression300
    PgSelectSingle299 --> PgClassExpression301
    PgSelectSingle299 --> PgClassExpression302
    PgSelect252 ==> __Item303
    __Item303 --> PgSelectSingle304
    PgSelectSingle304 --> PgClassExpression305
    PgSelectSingle304 --> PgClassExpression306

    %% plan-to-path relationships

    subgraph "Buckets for queries/v4/simple-collections"
    Bucket0("Bucket 0<br />(root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,PgSelect26,Access27,Access28,Object29,PgSelect49,PgSelect73,PgSelect97,__InputStaticLeaf107,PgSelect117,__InputStaticLeaf127,PgSelect137,PgSelect160,PgSelect183,PgSelect230,PgSelect252 bucket0
    Bucket1("Bucket 1<br />(listItem)<br />Deps: 26<br /><br />ROOT __Item{1}ᐸ26ᐳ[256]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item256,PgSelectSingle257,PgClassExpression258,PgClassExpression259,PgClassExpression260 bucket1
    Bucket2("Bucket 2<br />(listItem)<br />Deps: 49<br /><br />ROOT __Item{2}ᐸ49ᐳ[261]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item261,PgSelectSingle262,PgClassExpression263,PgClassExpression264,PgClassExpression265 bucket2
    Bucket3("Bucket 3<br />(listItem)<br />Deps: 73<br /><br />ROOT __Item{3}ᐸ73ᐳ[266]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,__Item266,PgSelectSingle267,PgClassExpression268,PgClassExpression269,PgClassExpression270 bucket3
    Bucket4("Bucket 4<br />(listItem)<br />Deps: 97<br /><br />ROOT __Item{4}ᐸ97ᐳ[271]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item271,PgSelectSingle272,PgClassExpression273,PgClassExpression274,PgClassExpression275 bucket4
    Bucket5("Bucket 5<br />(listItem)<br />Deps: 117<br /><br />ROOT __Item{5}ᐸ117ᐳ[276]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item276,PgSelectSingle277,PgClassExpression278,PgClassExpression279 bucket5
    Bucket6("Bucket 6<br />(listItem)<br />Deps: 137<br /><br />ROOT __Item{6}ᐸ137ᐳ[280]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,__Item280,PgSelectSingle281,PgClassExpression282,PgClassExpression283 bucket6
    Bucket7("Bucket 7<br />(listItem)<br />Deps: 160<br /><br />ROOT __Item{7}ᐸ160ᐳ[284]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,__Item284,PgSelectSingle285,PgClassExpression286,PgClassExpression287,PgClassExpression288 bucket7
    Bucket8("Bucket 8<br />(listItem)<br />Deps: 183<br /><br />ROOT __Item{8}ᐸ183ᐳ[289]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item289,PgSelectSingle290,PgClassExpression291,PgClassExpression292,PgClassExpression293 bucket8
    Bucket9("Bucket 9<br />(listItem)<br />Deps: 230<br /><br />ROOT __Item{9}ᐸ230ᐳ[298]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item298,PgSelectSingle299,PgClassExpression300,PgClassExpression301,PgClassExpression302 bucket9
    Bucket10("Bucket 10<br />(listItem)<br />Deps: 252<br /><br />ROOT __Item{10}ᐸ252ᐳ[303]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,__Item303,PgSelectSingle304,PgClassExpression305,PgClassExpression306 bucket10
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7 & Bucket8 & Bucket9 & Bucket10
    end
