graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    __InputStaticLeaf14["__InputStaticLeaf[14∈0]"]:::plan
    Access22["Access[22∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access23["Access[23∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object24["Object[24∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    Connection25["Connection[25∈0]<br />ᐸ21ᐳ"]:::plan
    __InputStaticLeaf34["__InputStaticLeaf[34∈0]"]:::plan
    Connection44["Connection[44∈0]<br />ᐸ40ᐳ"]:::plan
    __InputStaticLeaf54["__InputStaticLeaf[54∈0]"]:::plan
    Connection63["Connection[63∈0]<br />ᐸ59ᐳ"]:::plan
    __InputStaticLeaf74["__InputStaticLeaf[74∈0]"]:::plan
    Connection82["Connection[82∈0]<br />ᐸ78ᐳ"]:::plan
    PgPageInfo83["PgPageInfo[83∈0]"]:::plan
    PgSelect84[["PgSelect[84∈0]<br />ᐸnetworkᐳ"]]:::plan
    First85["First[85∈0]"]:::plan
    PgSelectSingle86["PgSelectSingle[86∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression87["PgClassExpression[87∈0]<br />ᐸcount(*)ᐳ"]:::plan
    PgSelect88[["PgSelect[88∈0]<br />ᐸnetworkᐳ"]]:::plan
    First90["First[90∈0]"]:::plan
    PgSelectSingle91["PgSelectSingle[91∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression93["PgClassExpression[93∈0]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List94["List[94∈0]<br />ᐸ93ᐳ"]:::plan
    PgCursor92["PgCursor[92∈0]"]:::plan
    Last96["Last[96∈0]"]:::plan
    PgSelectSingle97["PgSelectSingle[97∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression99["PgClassExpression[99∈0]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List100["List[100∈0]<br />ᐸ99ᐳ"]:::plan
    PgCursor98["PgCursor[98∈0]"]:::plan
    Constant101["Constant[101∈0]"]:::plan
    Constant102["Constant[102∈0]"]:::plan
    __Item103>"__Item[103∈1]<br />ᐸ88ᐳ"]:::itemplan
    PgSelectSingle104["PgSelectSingle[104∈1]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression106["PgClassExpression[106∈1]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List107["List[107∈1]<br />ᐸ106ᐳ"]:::plan
    PgCursor105["PgCursor[105∈1]"]:::plan
    PgClassExpression109["PgClassExpression[109∈1]<br />ᐸ__network__.”inet”ᐳ"]:::plan
    PgClassExpression110["PgClassExpression[110∈1]<br />ᐸ__network__.”cidr”ᐳ"]:::plan
    PgClassExpression111["PgClassExpression[111∈1]<br />ᐸ__network__.”macaddr”ᐳ"]:::plan
    PgClassExpression112["PgClassExpression[112∈1]<br />ᐸ__network__.”macaddr8”ᐳ"]:::plan
    PgPageInfo113["PgPageInfo[113∈0]"]:::plan
    PgSelect114[["PgSelect[114∈0]<br />ᐸnetworkᐳ"]]:::plan
    First115["First[115∈0]"]:::plan
    PgSelectSingle116["PgSelectSingle[116∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression117["PgClassExpression[117∈0]<br />ᐸcount(*)ᐳ"]:::plan
    PgSelect118[["PgSelect[118∈0]<br />ᐸnetworkᐳ"]]:::plan
    First120["First[120∈0]"]:::plan
    PgSelectSingle121["PgSelectSingle[121∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression123["PgClassExpression[123∈0]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List124["List[124∈0]<br />ᐸ123ᐳ"]:::plan
    PgCursor122["PgCursor[122∈0]"]:::plan
    Last126["Last[126∈0]"]:::plan
    PgSelectSingle127["PgSelectSingle[127∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression129["PgClassExpression[129∈0]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List130["List[130∈0]<br />ᐸ129ᐳ"]:::plan
    PgCursor128["PgCursor[128∈0]"]:::plan
    Constant131["Constant[131∈0]"]:::plan
    Constant132["Constant[132∈0]"]:::plan
    __Item133>"__Item[133∈2]<br />ᐸ118ᐳ"]:::itemplan
    PgSelectSingle134["PgSelectSingle[134∈2]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression136["PgClassExpression[136∈2]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List137["List[137∈2]<br />ᐸ136ᐳ"]:::plan
    PgCursor135["PgCursor[135∈2]"]:::plan
    PgClassExpression139["PgClassExpression[139∈2]<br />ᐸ__network__.”inet”ᐳ"]:::plan
    PgClassExpression140["PgClassExpression[140∈2]<br />ᐸ__network__.”cidr”ᐳ"]:::plan
    PgClassExpression141["PgClassExpression[141∈2]<br />ᐸ__network__.”macaddr”ᐳ"]:::plan
    PgClassExpression142["PgClassExpression[142∈2]<br />ᐸ__network__.”macaddr8”ᐳ"]:::plan
    PgPageInfo143["PgPageInfo[143∈0]"]:::plan
    PgSelect144[["PgSelect[144∈0]<br />ᐸnetworkᐳ"]]:::plan
    First145["First[145∈0]"]:::plan
    PgSelectSingle146["PgSelectSingle[146∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression147["PgClassExpression[147∈0]<br />ᐸcount(*)ᐳ"]:::plan
    PgSelect148[["PgSelect[148∈0]<br />ᐸnetworkᐳ"]]:::plan
    First150["First[150∈0]"]:::plan
    PgSelectSingle151["PgSelectSingle[151∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression153["PgClassExpression[153∈0]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List154["List[154∈0]<br />ᐸ153ᐳ"]:::plan
    PgCursor152["PgCursor[152∈0]"]:::plan
    Last156["Last[156∈0]"]:::plan
    PgSelectSingle157["PgSelectSingle[157∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression159["PgClassExpression[159∈0]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List160["List[160∈0]<br />ᐸ159ᐳ"]:::plan
    PgCursor158["PgCursor[158∈0]"]:::plan
    Constant161["Constant[161∈0]"]:::plan
    Constant162["Constant[162∈0]"]:::plan
    __Item163>"__Item[163∈3]<br />ᐸ148ᐳ"]:::itemplan
    PgSelectSingle164["PgSelectSingle[164∈3]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression166["PgClassExpression[166∈3]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List167["List[167∈3]<br />ᐸ166ᐳ"]:::plan
    PgCursor165["PgCursor[165∈3]"]:::plan
    PgClassExpression169["PgClassExpression[169∈3]<br />ᐸ__network__.”inet”ᐳ"]:::plan
    PgClassExpression170["PgClassExpression[170∈3]<br />ᐸ__network__.”cidr”ᐳ"]:::plan
    PgClassExpression171["PgClassExpression[171∈3]<br />ᐸ__network__.”macaddr”ᐳ"]:::plan
    PgClassExpression172["PgClassExpression[172∈3]<br />ᐸ__network__.”macaddr8”ᐳ"]:::plan
    PgPageInfo173["PgPageInfo[173∈0]"]:::plan
    PgSelect174[["PgSelect[174∈0]<br />ᐸnetworkᐳ"]]:::plan
    First175["First[175∈0]"]:::plan
    PgSelectSingle176["PgSelectSingle[176∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression177["PgClassExpression[177∈0]<br />ᐸcount(*)ᐳ"]:::plan
    PgSelect178[["PgSelect[178∈0]<br />ᐸnetworkᐳ"]]:::plan
    First180["First[180∈0]"]:::plan
    PgSelectSingle181["PgSelectSingle[181∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression183["PgClassExpression[183∈0]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List184["List[184∈0]<br />ᐸ183ᐳ"]:::plan
    PgCursor182["PgCursor[182∈0]"]:::plan
    Last186["Last[186∈0]"]:::plan
    PgSelectSingle187["PgSelectSingle[187∈0]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression189["PgClassExpression[189∈0]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List190["List[190∈0]<br />ᐸ189ᐳ"]:::plan
    PgCursor188["PgCursor[188∈0]"]:::plan
    Constant191["Constant[191∈0]"]:::plan
    Constant192["Constant[192∈0]"]:::plan
    __Item193>"__Item[193∈4]<br />ᐸ178ᐳ"]:::itemplan
    PgSelectSingle194["PgSelectSingle[194∈4]<br />ᐸnetworkᐳ"]:::plan
    PgClassExpression196["PgClassExpression[196∈4]<br />ᐸ__network__.”id”ᐳ"]:::plan
    List197["List[197∈4]<br />ᐸ196ᐳ"]:::plan
    PgCursor195["PgCursor[195∈4]"]:::plan
    PgClassExpression199["PgClassExpression[199∈4]<br />ᐸ__network__.”inet”ᐳ"]:::plan
    PgClassExpression200["PgClassExpression[200∈4]<br />ᐸ__network__.”cidr”ᐳ"]:::plan
    PgClassExpression201["PgClassExpression[201∈4]<br />ᐸ__network__.”macaddr”ᐳ"]:::plan
    PgClassExpression202["PgClassExpression[202∈4]<br />ᐸ__network__.”macaddr8”ᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access22
    __Value3 --> Access23
    Access22 & Access23 --> Object24
    Object24 & __InputStaticLeaf14 & Connection25 --> PgSelect84
    PgSelect84 --> First85
    First85 --> PgSelectSingle86
    PgSelectSingle86 --> PgClassExpression87
    Object24 & __InputStaticLeaf14 & Connection25 --> PgSelect88
    PgSelect88 --> First90
    First90 --> PgSelectSingle91
    PgSelectSingle91 --> PgClassExpression93
    PgClassExpression93 --> List94
    List94 --> PgCursor92
    PgSelect88 --> Last96
    Last96 --> PgSelectSingle97
    PgSelectSingle97 --> PgClassExpression99
    PgClassExpression99 --> List100
    List100 --> PgCursor98
    PgSelect88 ==> __Item103
    __Item103 --> PgSelectSingle104
    PgSelectSingle104 --> PgClassExpression106
    PgClassExpression106 --> List107
    List107 --> PgCursor105
    PgSelectSingle104 --> PgClassExpression109
    PgSelectSingle104 --> PgClassExpression110
    PgSelectSingle104 --> PgClassExpression111
    PgSelectSingle104 --> PgClassExpression112
    Object24 & __InputStaticLeaf34 & Connection44 --> PgSelect114
    PgSelect114 --> First115
    First115 --> PgSelectSingle116
    PgSelectSingle116 --> PgClassExpression117
    Object24 & __InputStaticLeaf34 & Connection44 --> PgSelect118
    PgSelect118 --> First120
    First120 --> PgSelectSingle121
    PgSelectSingle121 --> PgClassExpression123
    PgClassExpression123 --> List124
    List124 --> PgCursor122
    PgSelect118 --> Last126
    Last126 --> PgSelectSingle127
    PgSelectSingle127 --> PgClassExpression129
    PgClassExpression129 --> List130
    List130 --> PgCursor128
    PgSelect118 ==> __Item133
    __Item133 --> PgSelectSingle134
    PgSelectSingle134 --> PgClassExpression136
    PgClassExpression136 --> List137
    List137 --> PgCursor135
    PgSelectSingle134 --> PgClassExpression139
    PgSelectSingle134 --> PgClassExpression140
    PgSelectSingle134 --> PgClassExpression141
    PgSelectSingle134 --> PgClassExpression142
    Object24 & __InputStaticLeaf54 & Connection63 --> PgSelect144
    PgSelect144 --> First145
    First145 --> PgSelectSingle146
    PgSelectSingle146 --> PgClassExpression147
    Object24 & __InputStaticLeaf54 & Connection63 --> PgSelect148
    PgSelect148 --> First150
    First150 --> PgSelectSingle151
    PgSelectSingle151 --> PgClassExpression153
    PgClassExpression153 --> List154
    List154 --> PgCursor152
    PgSelect148 --> Last156
    Last156 --> PgSelectSingle157
    PgSelectSingle157 --> PgClassExpression159
    PgClassExpression159 --> List160
    List160 --> PgCursor158
    PgSelect148 ==> __Item163
    __Item163 --> PgSelectSingle164
    PgSelectSingle164 --> PgClassExpression166
    PgClassExpression166 --> List167
    List167 --> PgCursor165
    PgSelectSingle164 --> PgClassExpression169
    PgSelectSingle164 --> PgClassExpression170
    PgSelectSingle164 --> PgClassExpression171
    PgSelectSingle164 --> PgClassExpression172
    Object24 & __InputStaticLeaf74 & Connection82 --> PgSelect174
    PgSelect174 --> First175
    First175 --> PgSelectSingle176
    PgSelectSingle176 --> PgClassExpression177
    Object24 & __InputStaticLeaf74 & Connection82 --> PgSelect178
    PgSelect178 --> First180
    First180 --> PgSelectSingle181
    PgSelectSingle181 --> PgClassExpression183
    PgClassExpression183 --> List184
    List184 --> PgCursor182
    PgSelect178 --> Last186
    Last186 --> PgSelectSingle187
    PgSelectSingle187 --> PgClassExpression189
    PgClassExpression189 --> List190
    List190 --> PgCursor188
    PgSelect178 ==> __Item193
    __Item193 --> PgSelectSingle194
    PgSelectSingle194 --> PgClassExpression196
    PgClassExpression196 --> List197
    List197 --> PgCursor195
    PgSelectSingle194 --> PgClassExpression199
    PgSelectSingle194 --> PgClassExpression200
    PgSelectSingle194 --> PgClassExpression201
    PgSelectSingle194 --> PgClassExpression202

    %% plan-to-path relationships

    subgraph "Buckets for queries/v4/pg11.network_types"
    Bucket0("Bucket 0<br />(root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,__InputStaticLeaf14,Access22,Access23,Object24,Connection25,__InputStaticLeaf34,Connection44,__InputStaticLeaf54,Connection63,__InputStaticLeaf74,Connection82,PgPageInfo83,PgSelect84,First85,PgSelectSingle86,PgClassExpression87,PgSelect88,First90,PgSelectSingle91,PgCursor92,PgClassExpression93,List94,Last96,PgSelectSingle97,PgCursor98,PgClassExpression99,List100,Constant101,Constant102,PgPageInfo113,PgSelect114,First115,PgSelectSingle116,PgClassExpression117,PgSelect118,First120,PgSelectSingle121,PgCursor122,PgClassExpression123,List124,Last126,PgSelectSingle127,PgCursor128,PgClassExpression129,List130,Constant131,Constant132,PgPageInfo143,PgSelect144,First145,PgSelectSingle146,PgClassExpression147,PgSelect148,First150,PgSelectSingle151,PgCursor152,PgClassExpression153,List154,Last156,PgSelectSingle157,PgCursor158,PgClassExpression159,List160,Constant161,Constant162,PgPageInfo173,PgSelect174,First175,PgSelectSingle176,PgClassExpression177,PgSelect178,First180,PgSelectSingle181,PgCursor182,PgClassExpression183,List184,Last186,PgSelectSingle187,PgCursor188,PgClassExpression189,List190,Constant191,Constant192 bucket0
    Bucket1("Bucket 1<br />(listItem)<br />Deps: 88<br /><br />ROOT __Item{1}ᐸ88ᐳ[103]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item103,PgSelectSingle104,PgCursor105,PgClassExpression106,List107,PgClassExpression109,PgClassExpression110,PgClassExpression111,PgClassExpression112 bucket1
    Bucket2("Bucket 2<br />(listItem)<br />Deps: 118<br /><br />ROOT __Item{2}ᐸ118ᐳ[133]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item133,PgSelectSingle134,PgCursor135,PgClassExpression136,List137,PgClassExpression139,PgClassExpression140,PgClassExpression141,PgClassExpression142 bucket2
    Bucket3("Bucket 3<br />(listItem)<br />Deps: 148<br /><br />ROOT __Item{3}ᐸ148ᐳ[163]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,__Item163,PgSelectSingle164,PgCursor165,PgClassExpression166,List167,PgClassExpression169,PgClassExpression170,PgClassExpression171,PgClassExpression172 bucket3
    Bucket4("Bucket 4<br />(listItem)<br />Deps: 178<br /><br />ROOT __Item{4}ᐸ178ᐳ[193]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item193,PgSelectSingle194,PgCursor195,PgClassExpression196,List197,PgClassExpression199,PgClassExpression200,PgClassExpression201,PgClassExpression202 bucket4
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4
    end
