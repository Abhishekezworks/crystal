%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    __InputStaticLeaf7["__InputStaticLeaf[7∈0]"]:::plan
    Access9["Access[9∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access10["Access[10∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object11["Object[11∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    PgSelect8[["PgSelect[8∈0]<br />ᐸsingle_table_itemsᐳ"]]:::plan
    First12["First[12∈0]"]:::plan
    PgSelectSingle13["PgSelectSingle[13∈0]<br />ᐸsingle_table_itemsᐳ"]:::plan
    PgClassExpression14["PgClassExpression[14∈0]<br />ᐸ__single_t...s__.”type”ᐳ"]:::plan
    Lambda15["Lambda[15∈0]"]:::plan
    PgSingleTablePolymorphic16["PgSingleTablePolymorphic[16∈0]"]:::plan
    PgClassExpression17["PgClassExpression[17∈0]<br />ᐸ__single_t...parent_id”ᐳ"]:::plan
    PgSelect18[["PgSelect[18∈1]<br />ᐸsingle_table_itemsᐳ<br />ᐳSingleTableTopic<br />ᐳSingleTablePost<br />ᐳSingleTableDivider<br />ᐳSingleTableChecklist<br />ᐳSingleTableChecklistItem"]]:::plan
    First22["First[22∈1]<br />ᐳSingleTableTopic<br />ᐳSingleTablePost<br />ᐳSingleTableDivider<br />ᐳSingleTableChecklist<br />ᐳSingleTableChecklistItem"]:::plan
    PgSelectSingle23["PgSelectSingle[23∈1]<br />ᐸsingle_table_itemsᐳ<br />ᐳSingleTableTopic<br />ᐳSingleTablePost<br />ᐳSingleTableDivider<br />ᐳSingleTableChecklist<br />ᐳSingleTableChecklistItem"]:::plan
    PgClassExpression24["PgClassExpression[24∈1]<br />ᐸ__single_t...s__.”type”ᐳ<br />ᐳSingleTableTopic<br />ᐳSingleTablePost<br />ᐳSingleTableDivider<br />ᐳSingleTableChecklist<br />ᐳSingleTableChecklistItem"]:::plan
    Lambda25["Lambda[25∈1]<br />ᐳSingleTableTopic<br />ᐳSingleTablePost<br />ᐳSingleTableDivider<br />ᐳSingleTableChecklist<br />ᐳSingleTableChecklistItem"]:::plan
    PgSingleTablePolymorphic26["PgSingleTablePolymorphic[26∈1]<br />ᐳSingleTableTopic<br />ᐳSingleTablePost<br />ᐳSingleTableDivider<br />ᐳSingleTableChecklist<br />ᐳSingleTableChecklistItem"]:::plan
    PgClassExpression28["PgClassExpression[28∈1]<br />ᐸ__single_t...author_id”ᐳ<br />ᐳSingleTableTopic<br />ᐳSingleTablePost<br />ᐳSingleTableDivider<br />ᐳSingleTableChecklist<br />ᐳSingleTableChecklistItem"]:::plan
    PgSelect29[["PgSelect[29∈2]<br />ᐸpeopleᐳ<br />ᐳSingleTableTopicᐳSingleTableTopic<br />ᐳSingleTableTopicᐳSingleTablePost<br />ᐳSingleTableTopicᐳSingleTableDivider<br />ᐳSingleTableTopicᐳSingleTableChecklist<br />ᐳSingleTableTopicᐳSingleTableChecklistItem<br />ᐳSingleTablePostᐳSingleTableTopic<br />ᐳSingleTablePostᐳSingleTablePost<br />ᐳSingleTablePostᐳSingleTableDivider<br />ᐳSingleTablePostᐳSingleTableChecklist<br />ᐳSingleTablePostᐳSingleTableChecklistItem<br />ᐳSingleTableDividerᐳSingleTableTopic<br />ᐳSingleTableDividerᐳSingleTablePost<br />ᐳSingleTableDividerᐳSingleTableDivider<br />ᐳSingleTableDividerᐳSingleTableChecklist<br />ᐳSingleTableDividerᐳSingleTableChecklistItem<br />ᐳSingleTableChecklistᐳSingleTableTopic<br />ᐳSingleTableChecklistᐳSingleTablePost<br />ᐳSingleTableChecklistᐳSingleTableDivider<br />ᐳSingleTableChecklistᐳSingleTableChecklist<br />ᐳSingleTableChecklistᐳSingleTableChecklistItem<br />ᐳSingleTableChecklistItemᐳSingleTableTopic<br />ᐳSingleTableChecklistItemᐳSingleTablePost<br />ᐳSingleTableChecklistItemᐳSingleTableDivider<br />ᐳSingleTableChecklistItemᐳSingleTableChecklist<br />ᐳSingleTableChecklistItemᐳSingleTableChecklistItem"]]:::plan
    First33["First[33∈2]<br />ᐳSingleTableTopicᐳSingleTableTopic<br />ᐳSingleTableTopicᐳSingleTablePost<br />ᐳSingleTableTopicᐳSingleTableDivider<br />ᐳSingleTableTopicᐳSingleTableChecklist<br />ᐳSingleTableTopicᐳSingleTableChecklistItem<br />ᐳSingleTablePostᐳSingleTableTopic<br />ᐳSingleTablePostᐳSingleTablePost<br />ᐳSingleTablePostᐳSingleTableDivider<br />ᐳSingleTablePostᐳSingleTableChecklist<br />ᐳSingleTablePostᐳSingleTableChecklistItem<br />ᐳSingleTableDividerᐳSingleTableTopic<br />ᐳSingleTableDividerᐳSingleTablePost<br />ᐳSingleTableDividerᐳSingleTableDivider<br />ᐳSingleTableDividerᐳSingleTableChecklist<br />ᐳSingleTableDividerᐳSingleTableChecklistItem<br />ᐳSingleTableChecklistᐳSingleTableTopic<br />ᐳSingleTableChecklistᐳSingleTablePost<br />ᐳSingleTableChecklistᐳSingleTableDivider<br />ᐳSingleTableChecklistᐳSingleTableChecklist<br />ᐳSingleTableChecklistᐳSingleTableChecklistItem<br />ᐳSingleTableChecklistItemᐳSingleTableTopic<br />ᐳSingleTableChecklistItemᐳSingleTablePost<br />ᐳSingleTableChecklistItemᐳSingleTableDivider<br />ᐳSingleTableChecklistItemᐳSingleTableChecklist<br />ᐳSingleTableChecklistItemᐳSingleTableChecklistItem"]:::plan
    PgSelectSingle34["PgSelectSingle[34∈2]<br />ᐸpeopleᐳ<br />ᐳSingleTableTopicᐳSingleTableTopic<br />ᐳSingleTableTopicᐳSingleTablePost<br />ᐳSingleTableTopicᐳSingleTableDivider<br />ᐳSingleTableTopicᐳSingleTableChecklist<br />ᐳSingleTableTopicᐳSingleTableChecklistItem<br />ᐳSingleTablePostᐳSingleTableTopic<br />ᐳSingleTablePostᐳSingleTablePost<br />ᐳSingleTablePostᐳSingleTableDivider<br />ᐳSingleTablePostᐳSingleTableChecklist<br />ᐳSingleTablePostᐳSingleTableChecklistItem<br />ᐳSingleTableDividerᐳSingleTableTopic<br />ᐳSingleTableDividerᐳSingleTablePost<br />ᐳSingleTableDividerᐳSingleTableDivider<br />ᐳSingleTableDividerᐳSingleTableChecklist<br />ᐳSingleTableDividerᐳSingleTableChecklistItem<br />ᐳSingleTableChecklistᐳSingleTableTopic<br />ᐳSingleTableChecklistᐳSingleTablePost<br />ᐳSingleTableChecklistᐳSingleTableDivider<br />ᐳSingleTableChecklistᐳSingleTableChecklist<br />ᐳSingleTableChecklistᐳSingleTableChecklistItem<br />ᐳSingleTableChecklistItemᐳSingleTableTopic<br />ᐳSingleTableChecklistItemᐳSingleTablePost<br />ᐳSingleTableChecklistItemᐳSingleTableDivider<br />ᐳSingleTableChecklistItemᐳSingleTableChecklist<br />ᐳSingleTableChecklistItemᐳSingleTableChecklistItem"]:::plan
    PgClassExpression35["PgClassExpression[35∈2]<br />ᐸ__people__.”username”ᐳ<br />ᐳSingleTableTopicᐳSingleTableTopic<br />ᐳSingleTableTopicᐳSingleTablePost<br />ᐳSingleTableTopicᐳSingleTableDivider<br />ᐳSingleTableTopicᐳSingleTableChecklist<br />ᐳSingleTableTopicᐳSingleTableChecklistItem<br />ᐳSingleTablePostᐳSingleTableTopic<br />ᐳSingleTablePostᐳSingleTablePost<br />ᐳSingleTablePostᐳSingleTableDivider<br />ᐳSingleTablePostᐳSingleTableChecklist<br />ᐳSingleTablePostᐳSingleTableChecklistItem<br />ᐳSingleTableDividerᐳSingleTableTopic<br />ᐳSingleTableDividerᐳSingleTablePost<br />ᐳSingleTableDividerᐳSingleTableDivider<br />ᐳSingleTableDividerᐳSingleTableChecklist<br />ᐳSingleTableDividerᐳSingleTableChecklistItem<br />ᐳSingleTableChecklistᐳSingleTableTopic<br />ᐳSingleTableChecklistᐳSingleTablePost<br />ᐳSingleTableChecklistᐳSingleTableDivider<br />ᐳSingleTableChecklistᐳSingleTableChecklist<br />ᐳSingleTableChecklistᐳSingleTableChecklistItem<br />ᐳSingleTableChecklistItemᐳSingleTableTopic<br />ᐳSingleTableChecklistItemᐳSingleTablePost<br />ᐳSingleTableChecklistItemᐳSingleTableDivider<br />ᐳSingleTableChecklistItemᐳSingleTableChecklist<br />ᐳSingleTableChecklistItemᐳSingleTableChecklistItem"]:::plan
    PgClassExpression72["PgClassExpression[72∈0]<br />ᐸ__single_t...ems__.”id”ᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access9
    __Value3 --> Access10
    Access9 & Access10 --> Object11
    Object11 & __InputStaticLeaf7 --> PgSelect8
    PgSelect8 --> First12
    First12 --> PgSelectSingle13
    PgSelectSingle13 --> PgClassExpression14
    PgClassExpression14 --> Lambda15
    Lambda15 & PgSelectSingle13 --> PgSingleTablePolymorphic16
    PgSelectSingle13 --> PgClassExpression17
    Object11 & PgClassExpression17 --> PgSelect18
    PgSelect18 --> First22
    First22 --> PgSelectSingle23
    PgSelectSingle23 --> PgClassExpression24
    PgClassExpression24 --> Lambda25
    Lambda25 & PgSelectSingle23 --> PgSingleTablePolymorphic26
    PgSelectSingle23 --> PgClassExpression28
    Object11 & PgClassExpression28 --> PgSelect29
    PgSelect29 --> First33
    First33 --> PgSelectSingle34
    PgSelectSingle34 --> PgClassExpression35
    PgSelectSingle13 --> PgClassExpression72

    subgraph "Buckets for queries/interfaces-single-table/relation"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,__InputStaticLeaf7,PgSelect8,Access9,Access10,Object11,First12,PgSelectSingle13,PgClassExpression14,Lambda15,PgSingleTablePolymorphic16,PgClassExpression17,PgClassExpression72 bucket0
    Bucket1("Bucket 1 (polymorphic)<br />SingleTableTopic,SingleTablePost,SingleTableDivider,SingleTableChecklist,SingleTableChecklistItem<br />Deps: 11, 17, 13, 16, 72<br />ᐳSingleTableTopic<br />ᐳSingleTablePost<br />ᐳSingleTableDivider<br />ᐳSingleTableChecklist<br />ᐳSingleTableChecklistItem"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect18,First22,PgSelectSingle23,PgClassExpression24,Lambda25,PgSingleTablePolymorphic26,PgClassExpression28 bucket1
    Bucket2("Bucket 2 (polymorphic)<br />SingleTableTopic,SingleTablePost,SingleTableDivider,SingleTableChecklist,SingleTableChecklistItem<br />Deps: 11, 28, 23, 26, 17<br />ᐳSingleTableTopicᐳSingleTableTopic<br />ᐳSingleTableTopicᐳSingleTablePost<br />ᐳSingleTableTopicᐳSingleTableDivider<br />ᐳSingleTableTopicᐳSingleTableChecklist<br />ᐳSingleTableTopicᐳSingleTableChecklistItem<br />ᐳSingleTablePostᐳSingleTableTopic<br />ᐳSingleTablePostᐳSingleTablePost<br />ᐳSingleTablePostᐳSingleTableDivider<br />ᐳSingleTablePostᐳSingleTableChecklist<br />ᐳSingleTablePostᐳSingleTableChecklistItem<br />ᐳSingleTableDividerᐳSingleTableTopic<br />ᐳSingleTableDividerᐳSingleTablePost<br />ᐳSingleTableDividerᐳSingleTableDivider<br />ᐳSingleTableDividerᐳSingleTableChecklist<br />ᐳSingleTableDividerᐳSingleTableChecklistItem<br />ᐳSingleTableChecklistᐳSingleTableTopic<br />ᐳSingleTableChecklistᐳSingleTablePost<br />ᐳSingleTableChecklistᐳSingleTableDivider<br />ᐳSingleTableChecklistᐳSingleTableChecklist<br />ᐳSingleTableChecklistᐳSingleTableChecklistItem<br />ᐳSingleTableChecklistItemᐳSingleTableTopic<br />ᐳSingleTableChecklistItemᐳSingleTablePost<br />ᐳSingleTableChecklistItemᐳSingleTableDivider<br />ᐳSingleTableChecklistItemᐳSingleTableChecklist<br />ᐳSingleTableChecklistItemᐳSingleTableChecklistItem"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect29,First33,PgSelectSingle34,PgClassExpression35 bucket2
    Bucket3("Bucket 3 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableTopicᐳSingleTableTopic<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    Bucket4("Bucket 4 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableTopicᐳSingleTablePost<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4 bucket4
    Bucket5("Bucket 5 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableTopicᐳSingleTableDivider<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5 bucket5
    Bucket6("Bucket 6 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableTopicᐳSingleTableChecklist<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6 bucket6
    Bucket7("Bucket 7 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableTopicᐳSingleTableChecklistItem<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7 bucket7
    Bucket8("Bucket 8 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTablePostᐳSingleTableTopic<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8 bucket8
    Bucket9("Bucket 9 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTablePostᐳSingleTablePost<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9 bucket9
    Bucket10("Bucket 10 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTablePostᐳSingleTableDivider<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10 bucket10
    Bucket11("Bucket 11 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTablePostᐳSingleTableChecklist<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11 bucket11
    Bucket12("Bucket 12 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTablePostᐳSingleTableChecklistItem<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12 bucket12
    Bucket13("Bucket 13 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableDividerᐳSingleTableTopic<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13 bucket13
    Bucket14("Bucket 14 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableDividerᐳSingleTablePost<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14 bucket14
    Bucket15("Bucket 15 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableDividerᐳSingleTableDivider<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket15 stroke:#ff00ff
    class Bucket15 bucket15
    Bucket16("Bucket 16 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableDividerᐳSingleTableChecklist<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket16 stroke:#f5deb3
    class Bucket16 bucket16
    Bucket17("Bucket 17 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableDividerᐳSingleTableChecklistItem<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket17 stroke:#696969
    class Bucket17 bucket17
    Bucket18("Bucket 18 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableChecklistᐳSingleTableTopic<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket18 stroke:#00bfff
    class Bucket18 bucket18
    Bucket19("Bucket 19 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableChecklistᐳSingleTablePost<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket19 stroke:#7f007f
    class Bucket19 bucket19
    Bucket20("Bucket 20 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableChecklistᐳSingleTableDivider<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket20 stroke:#ffa500
    class Bucket20 bucket20
    Bucket21("Bucket 21 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableChecklistᐳSingleTableChecklist<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket21 stroke:#0000ff
    class Bucket21 bucket21
    Bucket22("Bucket 22 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableChecklistᐳSingleTableChecklistItem<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket22 stroke:#7fff00
    class Bucket22 bucket22
    Bucket23("Bucket 23 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableChecklistItemᐳSingleTableTopic<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket23 stroke:#ff1493
    class Bucket23 bucket23
    Bucket24("Bucket 24 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableChecklistItemᐳSingleTablePost<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket24 stroke:#808000
    class Bucket24 bucket24
    Bucket25("Bucket 25 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableChecklistItemᐳSingleTableDivider<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket25 stroke:#dda0dd
    class Bucket25 bucket25
    Bucket26("Bucket 26 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableChecklistItemᐳSingleTableChecklist<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket26 stroke:#ff0000
    class Bucket26 bucket26
    Bucket27("Bucket 27 (nullableField)<br />Deps: 34, 35<br />ᐳSingleTableChecklistItemᐳSingleTableChecklistItem<br />ROOT PgSelectSingle{2}ᐸpeopleᐳ[34]"):::bucket
    classDef bucket27 stroke:#ffff00
    class Bucket27 bucket27
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7 & Bucket8 & Bucket9 & Bucket10 & Bucket11 & Bucket12 & Bucket13 & Bucket14 & Bucket15 & Bucket16 & Bucket17 & Bucket18 & Bucket19 & Bucket20 & Bucket21 & Bucket22 & Bucket23 & Bucket24 & Bucket25 & Bucket26 & Bucket27
    end
