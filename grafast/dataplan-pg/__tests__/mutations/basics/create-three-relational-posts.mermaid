%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object11{{"Object[11∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0]<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0]<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    __Value2["__Value[2∈0]<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0]<br />ᐸrootValueᐳ"]:::plan
    Constant6{{"Constant[6∈0]<br />ᐸ'POST'ᐳ"}}:::plan
    Constant7{{"Constant[7∈0]<br />ᐸ2ᐳ"}}:::plan
    Constant13{{"Constant[13∈0]<br />ᐸ'Post ꖛ1'ᐳ"}}:::plan
    Constant14{{"Constant[14∈0]<br />ᐸ'Desc 1'ᐳ"}}:::plan
    Constant15{{"Constant[15∈0]<br />ᐸnullᐳ"}}:::plan
    Constant27{{"Constant[27∈0]<br />ᐸ'Post ꖛ2'ᐳ"}}:::plan
    Constant28{{"Constant[28∈0]<br />ᐸ'Desc 2'ᐳ"}}:::plan
    Constant41{{"Constant[41∈0]<br />ᐸ'Post ꖛ3'ᐳ"}}:::plan
    Constant42{{"Constant[42∈0]<br />ᐸ'Desc 3'ᐳ"}}:::plan
    PgInsertSingle16[["PgInsertSingle[16∈1]<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression12{{"PgClassExpression[12∈1]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object11 & PgClassExpression12 & Constant13 & Constant14 & Constant15 --> PgInsertSingle16
    PgInsertSingle30[["PgInsertSingle[30∈1]<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression26{{"PgClassExpression[26∈1]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object11 & PgClassExpression26 & Constant27 & Constant28 & Constant15 --> PgInsertSingle30
    PgInsertSingle44[["PgInsertSingle[44∈1]<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression40{{"PgClassExpression[40∈1]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object11 & PgClassExpression40 & Constant41 & Constant42 & Constant15 --> PgInsertSingle44
    PgInsertSingle8[["PgInsertSingle[8∈1]<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant7 --> PgInsertSingle8
    PgInsertSingle22[["PgInsertSingle[22∈1]<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant7 --> PgInsertSingle22
    PgInsertSingle36[["PgInsertSingle[36∈1]<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant7 --> PgInsertSingle36
    PgInsertSingle8 --> PgClassExpression12
    PgInsertSingle22 --> PgClassExpression26
    PgInsertSingle36 --> PgClassExpression40
    PgClassExpression48{{"PgClassExpression[48∈1]<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgInsertSingle44 --> PgClassExpression48
    PgSelect50[["PgSelect[50∈2]<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant205{{"Constant[205∈2]<br />ᐸ1000000ᐳ"}}:::plan
    Object11 & Constant205 --> PgSelect50
    PgSelect102[["PgSelect[102∈2]<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant206{{"Constant[206∈2]<br />ᐸ1000001ᐳ"}}:::plan
    Object11 & Constant206 --> PgSelect102
    PgSelect154[["PgSelect[154∈2]<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant207{{"Constant[207∈2]<br />ᐸ1000002ᐳ"}}:::plan
    Object11 & Constant207 --> PgSelect154
    First54{{"First[54∈2]"}}:::plan
    PgSelect50 --> First54
    PgSelectSingle55{{"PgSelectSingle[55∈2]<br />ᐸrelational_itemsᐳ"}}:::plan
    First54 --> PgSelectSingle55
    PgClassExpression58{{"PgClassExpression[58∈2]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle55 --> PgClassExpression58
    First106{{"First[106∈2]"}}:::plan
    PgSelect102 --> First106
    PgSelectSingle107{{"PgSelectSingle[107∈2]<br />ᐸrelational_itemsᐳ"}}:::plan
    First106 --> PgSelectSingle107
    PgClassExpression110{{"PgClassExpression[110∈2]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression110
    First158{{"First[158∈2]"}}:::plan
    PgSelect154 --> First158
    PgSelectSingle159{{"PgSelectSingle[159∈2]<br />ᐸrelational_itemsᐳ"}}:::plan
    First158 --> PgSelectSingle159
    PgClassExpression162{{"PgClassExpression[162∈2]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle159 --> PgClassExpression162
    PgPolymorphic57{{"PgPolymorphic[57∈3]"}}:::plan
    PgClassExpression56{{"PgClassExpression[56∈3]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle55 & PgClassExpression56 --> PgPolymorphic57
    PgPolymorphic109{{"PgPolymorphic[109∈3]"}}:::plan
    PgClassExpression108{{"PgClassExpression[108∈3]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle107 & PgClassExpression108 --> PgPolymorphic109
    PgPolymorphic161{{"PgPolymorphic[161∈3]"}}:::plan
    PgClassExpression160{{"PgClassExpression[160∈3]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle159 & PgClassExpression160 --> PgPolymorphic161
    PgSelectSingle55 --> PgClassExpression56
    PgSelectSingle107 --> PgClassExpression108
    PgSelectSingle159 --> PgClassExpression160
    PgSelect59[["PgSelect[59∈4]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression58 --> PgSelect59
    PgSelect67[["PgSelect[67∈4]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression58 --> PgSelect67
    PgSelect78[["PgSelect[78∈4]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression58 --> PgSelect78
    PgSelect86[["PgSelect[86∈4]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression58 --> PgSelect86
    PgSelect94[["PgSelect[94∈4]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression58 --> PgSelect94
    First63{{"First[63∈4]"}}:::plan
    PgSelect59 --> First63
    PgSelectSingle64{{"PgSelectSingle[64∈4]<br />ᐸrelational_topicsᐳ"}}:::plan
    First63 --> PgSelectSingle64
    First71{{"First[71∈4]"}}:::plan
    PgSelect67 --> First71
    PgSelectSingle72{{"PgSelectSingle[72∈4]<br />ᐸrelational_postsᐳ"}}:::plan
    First71 --> PgSelectSingle72
    PgClassExpression74{{"PgClassExpression[74∈4]<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression74
    PgClassExpression75{{"PgClassExpression[75∈4]<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression75
    PgClassExpression76{{"PgClassExpression[76∈4]<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle72 --> PgClassExpression76
    First82{{"First[82∈4]"}}:::plan
    PgSelect78 --> First82
    PgSelectSingle83{{"PgSelectSingle[83∈4]<br />ᐸrelational_dividersᐳ"}}:::plan
    First82 --> PgSelectSingle83
    First90{{"First[90∈4]"}}:::plan
    PgSelect86 --> First90
    PgSelectSingle91{{"PgSelectSingle[91∈4]<br />ᐸrelational_checklistsᐳ"}}:::plan
    First90 --> PgSelectSingle91
    First98{{"First[98∈4]"}}:::plan
    PgSelect94 --> First98
    PgSelectSingle99{{"PgSelectSingle[99∈4]<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First98 --> PgSelectSingle99
    PgSelect111[["PgSelect[111∈5]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression110 --> PgSelect111
    PgSelect119[["PgSelect[119∈5]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression110 --> PgSelect119
    PgSelect130[["PgSelect[130∈5]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression110 --> PgSelect130
    PgSelect138[["PgSelect[138∈5]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression110 --> PgSelect138
    PgSelect146[["PgSelect[146∈5]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression110 --> PgSelect146
    First115{{"First[115∈5]"}}:::plan
    PgSelect111 --> First115
    PgSelectSingle116{{"PgSelectSingle[116∈5]<br />ᐸrelational_topicsᐳ"}}:::plan
    First115 --> PgSelectSingle116
    First123{{"First[123∈5]"}}:::plan
    PgSelect119 --> First123
    PgSelectSingle124{{"PgSelectSingle[124∈5]<br />ᐸrelational_postsᐳ"}}:::plan
    First123 --> PgSelectSingle124
    PgClassExpression126{{"PgClassExpression[126∈5]<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle124 --> PgClassExpression126
    PgClassExpression127{{"PgClassExpression[127∈5]<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle124 --> PgClassExpression127
    PgClassExpression128{{"PgClassExpression[128∈5]<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle124 --> PgClassExpression128
    First134{{"First[134∈5]"}}:::plan
    PgSelect130 --> First134
    PgSelectSingle135{{"PgSelectSingle[135∈5]<br />ᐸrelational_dividersᐳ"}}:::plan
    First134 --> PgSelectSingle135
    First142{{"First[142∈5]"}}:::plan
    PgSelect138 --> First142
    PgSelectSingle143{{"PgSelectSingle[143∈5]<br />ᐸrelational_checklistsᐳ"}}:::plan
    First142 --> PgSelectSingle143
    First150{{"First[150∈5]"}}:::plan
    PgSelect146 --> First150
    PgSelectSingle151{{"PgSelectSingle[151∈5]<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First150 --> PgSelectSingle151
    PgSelect163[["PgSelect[163∈6]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression162 --> PgSelect163
    PgSelect171[["PgSelect[171∈6]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression162 --> PgSelect171
    PgSelect182[["PgSelect[182∈6]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression162 --> PgSelect182
    PgSelect190[["PgSelect[190∈6]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression162 --> PgSelect190
    PgSelect198[["PgSelect[198∈6]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression162 --> PgSelect198
    First167{{"First[167∈6]"}}:::plan
    PgSelect163 --> First167
    PgSelectSingle168{{"PgSelectSingle[168∈6]<br />ᐸrelational_topicsᐳ"}}:::plan
    First167 --> PgSelectSingle168
    First175{{"First[175∈6]"}}:::plan
    PgSelect171 --> First175
    PgSelectSingle176{{"PgSelectSingle[176∈6]<br />ᐸrelational_postsᐳ"}}:::plan
    First175 --> PgSelectSingle176
    PgClassExpression178{{"PgClassExpression[178∈6]<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle176 --> PgClassExpression178
    PgClassExpression179{{"PgClassExpression[179∈6]<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle176 --> PgClassExpression179
    PgClassExpression180{{"PgClassExpression[180∈6]<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle176 --> PgClassExpression180
    First186{{"First[186∈6]"}}:::plan
    PgSelect182 --> First186
    PgSelectSingle187{{"PgSelectSingle[187∈6]<br />ᐸrelational_dividersᐳ"}}:::plan
    First186 --> PgSelectSingle187
    First194{{"First[194∈6]"}}:::plan
    PgSelect190 --> First194
    PgSelectSingle195{{"PgSelectSingle[195∈6]<br />ᐸrelational_checklistsᐳ"}}:::plan
    First194 --> PgSelectSingle195
    First202{{"First[202∈6]"}}:::plan
    PgSelect198 --> First202
    PgSelectSingle203{{"PgSelectSingle[203∈6]<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First202 --> PgSelectSingle203

    %% define steps

    subgraph "Buckets for mutations/basics/create-three-relational-posts"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,Constant13,Constant14,Constant15,Constant27,Constant28,Constant41,Constant42 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 6, 7, 13, 14, 15, 27, 28, 41, 42, 4<br /><br />1: PgInsertSingle[8]<br />2: PgClassExpression[12]<br />3: PgInsertSingle[16]<br />4: PgInsertSingle[22]<br />5: PgClassExpression[26]<br />6: PgInsertSingle[30]<br />7: PgInsertSingle[36]<br />8: PgClassExpression[40]<br />9: PgInsertSingle[44]<br />10: <br />ᐳ: PgClassExpression[48]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgInsertSingle8,PgClassExpression12,PgInsertSingle16,PgInsertSingle22,PgClassExpression26,PgInsertSingle30,PgInsertSingle36,PgClassExpression40,PgInsertSingle44,PgClassExpression48 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 48, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[48]<br />1: <br />ᐳ: 205, 206, 207<br />2: 50, 102, 154<br />ᐳ: 54, 55, 58, 106, 107, 110, 158, 159, 162"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect50,First54,PgSelectSingle55,PgClassExpression58,PgSelect102,First106,PgSelectSingle107,PgClassExpression110,PgSelect154,First158,PgSelectSingle159,PgClassExpression162,Constant205,Constant206,Constant207 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 55, 107, 159, 4, 11, 58, 110, 162<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression56,PgPolymorphic57,PgClassExpression108,PgPolymorphic109,PgClassExpression160,PgPolymorphic161 bucket3
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 58, 57<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect59,First63,PgSelectSingle64,PgSelect67,First71,PgSelectSingle72,PgClassExpression74,PgClassExpression75,PgClassExpression76,PgSelect78,First82,PgSelectSingle83,PgSelect86,First90,PgSelectSingle91,PgSelect94,First98,PgSelectSingle99 bucket4
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 110, 109<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect111,First115,PgSelectSingle116,PgSelect119,First123,PgSelectSingle124,PgClassExpression126,PgClassExpression127,PgClassExpression128,PgSelect130,First134,PgSelectSingle135,PgSelect138,First142,PgSelectSingle143,PgSelect146,First150,PgSelectSingle151 bucket5
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 162, 161<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect163,First167,PgSelectSingle168,PgSelect171,First175,PgSelectSingle176,PgClassExpression178,PgClassExpression179,PgClassExpression180,PgSelect182,First186,PgSelectSingle187,PgSelect190,First194,PgSelectSingle195,PgSelect198,First202,PgSelectSingle203 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6
    classDef unary fill:#fafffa,borderWidth:8px
    class Object11,Access9,Access10,__Value2,__Value4,Constant6,Constant7,Constant13,Constant14,Constant15,Constant27,Constant28,Constant41,Constant42,PgInsertSingle16,PgInsertSingle30,PgInsertSingle44,PgInsertSingle8,PgInsertSingle22,PgInsertSingle36,PgClassExpression12,PgClassExpression26,PgClassExpression40,PgClassExpression48,PgSelect50,PgSelect102,PgSelect154,First54,PgSelectSingle55,PgClassExpression58,First106,PgSelectSingle107,PgClassExpression110,First158,PgSelectSingle159,PgClassExpression162,Constant205,Constant206,Constant207,PgPolymorphic57,PgPolymorphic109,PgPolymorphic161,PgClassExpression56,PgClassExpression108,PgClassExpression160,PgSelect59,PgSelect67,PgSelect78,PgSelect86,PgSelect94,First63,PgSelectSingle64,First71,PgSelectSingle72,PgClassExpression74,PgClassExpression75,PgClassExpression76,First82,PgSelectSingle83,First90,PgSelectSingle91,First98,PgSelectSingle99,PgSelect111,PgSelect119,PgSelect130,PgSelect138,PgSelect146,First115,PgSelectSingle116,First123,PgSelectSingle124,PgClassExpression126,PgClassExpression127,PgClassExpression128,First134,PgSelectSingle135,First142,PgSelectSingle143,First150,PgSelectSingle151,PgSelect163,PgSelect171,PgSelect182,PgSelect190,PgSelect198,First167,PgSelectSingle168,First175,PgSelectSingle176,PgClassExpression178,PgClassExpression179,PgClassExpression180,First186,PgSelectSingle187,First194,PgSelectSingle195,First202,PgSelectSingle203 unary
    end
