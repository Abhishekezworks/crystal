%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/basics/create-three-relational-posts-computed"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 12, 14, 25, 36, 209, 210, 211, 4<br /><br />1: PgSelect[8]<br />2: PgSelect[19]<br />3: PgSelect[30]<br />4: PgSelectRows[40]<br />ᐳ: 39, 42, 43"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 12, 209, 210, 211, 43, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[43]<br />1: 45, 59, 70<br />2: 53, 64, 75<br />ᐳ: 52, 55, 56, 57, 63, 66, 67, 68, 74, 77, 78, 79, 80, 120, 160"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 12, 80, 57, 120, 68, 160, 79<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 12, 80, 57<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 81, 92, 99, 106, 113<br />2: 89, 96, 103, 110, 117<br />ᐳ: 88, 91, 95, 98, 102, 105, 109, 112, 116, 119, 200, 201, 202"):::bucket
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 12, 120, 68<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 121, 132, 139, 146, 153<br />2: 129, 136, 143, 150, 157<br />ᐳ: 128, 131, 135, 138, 142, 145, 149, 152, 156, 159, 203, 204, 205"):::bucket
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 12, 160, 79<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 161, 172, 179, 186, 193<br />2: 169, 176, 183, 190, 197<br />ᐳ: 168, 171, 175, 178, 182, 185, 189, 192, 196, 199, 206, 207, 208"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6

    %% plan dependencies
    Object12{{"Object[12∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access11{{"Access[11∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access11 --> Object12
    PgFromExpression14{{"PgFromExpression[14∈0] ➊"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ'Computed post ꖛ1'ᐳ"}}:::plan
    Constant6 & Constant7 --> PgFromExpression14
    PgFromExpression25{{"PgFromExpression[25∈0] ➊"}}:::plan
    Constant18{{"Constant[18∈0] ➊<br />ᐸ'Computed post ꖛ2'ᐳ"}}:::plan
    Constant6 & Constant18 --> PgFromExpression25
    PgFromExpression36{{"PgFromExpression[36∈0] ➊"}}:::plan
    Constant29{{"Constant[29∈0] ➊<br />ᐸ'Computed post ꖛ3'ᐳ"}}:::plan
    Constant6 & Constant29 --> PgFromExpression36
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access11
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant209{{"Constant[209∈0] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Constant210{{"Constant[210∈0] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Constant211{{"Constant[211∈0] ➊<br />ᐸ1000002ᐳ"}}:::plan
    PgSelect8[["PgSelect[8∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object12 & PgFromExpression14 --> PgSelect8
    PgSelect19[["PgSelect[19∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object12 & PgFromExpression25 --> PgSelect19
    PgSelect30[["PgSelect[30∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object12 & PgFromExpression36 --> PgSelect30
    First39{{"First[39∈1] ➊"}}:::plan
    PgSelectRows40[["PgSelectRows[40∈1] ➊"]]:::plan
    PgSelectRows40 --> First39
    PgSelect30 --> PgSelectRows40
    PgSelectSingle42{{"PgSelectSingle[42∈1] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First39 --> PgSelectSingle42
    PgClassExpression43{{"PgClassExpression[43∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgSelectSingle42 --> PgClassExpression43
    PgSelect45[["PgSelect[45∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object12 & Constant209 --> PgSelect45
    PgPolymorphic57{{"PgPolymorphic[57∈2] ➊"}}:::plan
    PgSelectSingle55{{"PgSelectSingle[55∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression56{{"PgClassExpression[56∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle55 & PgClassExpression56 --> PgPolymorphic57
    PgSelect59[["PgSelect[59∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object12 & Constant210 --> PgSelect59
    PgPolymorphic68{{"PgPolymorphic[68∈2] ➊"}}:::plan
    PgSelectSingle66{{"PgSelectSingle[66∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression67{{"PgClassExpression[67∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle66 & PgClassExpression67 --> PgPolymorphic68
    PgSelect70[["PgSelect[70∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object12 & Constant211 --> PgSelect70
    PgPolymorphic79{{"PgPolymorphic[79∈2] ➊"}}:::plan
    PgSelectSingle77{{"PgSelectSingle[77∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression78{{"PgClassExpression[78∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle77 & PgClassExpression78 --> PgPolymorphic79
    First52{{"First[52∈2] ➊"}}:::plan
    PgSelectRows53[["PgSelectRows[53∈2] ➊"]]:::plan
    PgSelectRows53 --> First52
    PgSelect45 --> PgSelectRows53
    First52 --> PgSelectSingle55
    PgSelectSingle55 --> PgClassExpression56
    First63{{"First[63∈2] ➊"}}:::plan
    PgSelectRows64[["PgSelectRows[64∈2] ➊"]]:::plan
    PgSelectRows64 --> First63
    PgSelect59 --> PgSelectRows64
    First63 --> PgSelectSingle66
    PgSelectSingle66 --> PgClassExpression67
    First74{{"First[74∈2] ➊"}}:::plan
    PgSelectRows75[["PgSelectRows[75∈2] ➊"]]:::plan
    PgSelectRows75 --> First74
    PgSelect70 --> PgSelectRows75
    First74 --> PgSelectSingle77
    PgSelectSingle77 --> PgClassExpression78
    PgClassExpression80{{"PgClassExpression[80∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle55 --> PgClassExpression80
    PgClassExpression120{{"PgClassExpression[120∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle66 --> PgClassExpression120
    PgClassExpression160{{"PgClassExpression[160∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle77 --> PgClassExpression160
    PgSelect81[["PgSelect[81∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object12 & PgClassExpression80 --> PgSelect81
    PgSelect92[["PgSelect[92∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object12 & PgClassExpression80 --> PgSelect92
    PgSelect99[["PgSelect[99∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object12 & PgClassExpression80 --> PgSelect99
    PgSelect106[["PgSelect[106∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object12 & PgClassExpression80 --> PgSelect106
    PgSelect113[["PgSelect[113∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object12 & PgClassExpression80 --> PgSelect113
    First88{{"First[88∈4] ➊^"}}:::plan
    PgSelectRows89[["PgSelectRows[89∈4] ➊^"]]:::plan
    PgSelectRows89 --> First88
    PgSelect81 --> PgSelectRows89
    PgSelectSingle91{{"PgSelectSingle[91∈4] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First88 --> PgSelectSingle91
    First95{{"First[95∈4] ➊^"}}:::plan
    PgSelectRows96[["PgSelectRows[96∈4] ➊^"]]:::plan
    PgSelectRows96 --> First95
    PgSelect92 --> PgSelectRows96
    PgSelectSingle98{{"PgSelectSingle[98∈4] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First95 --> PgSelectSingle98
    First102{{"First[102∈4] ➊^"}}:::plan
    PgSelectRows103[["PgSelectRows[103∈4] ➊^"]]:::plan
    PgSelectRows103 --> First102
    PgSelect99 --> PgSelectRows103
    PgSelectSingle105{{"PgSelectSingle[105∈4] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First102 --> PgSelectSingle105
    First109{{"First[109∈4] ➊^"}}:::plan
    PgSelectRows110[["PgSelectRows[110∈4] ➊^"]]:::plan
    PgSelectRows110 --> First109
    PgSelect106 --> PgSelectRows110
    PgSelectSingle112{{"PgSelectSingle[112∈4] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First109 --> PgSelectSingle112
    First116{{"First[116∈4] ➊^"}}:::plan
    PgSelectRows117[["PgSelectRows[117∈4] ➊^"]]:::plan
    PgSelectRows117 --> First116
    PgSelect113 --> PgSelectRows117
    PgSelectSingle119{{"PgSelectSingle[119∈4] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First116 --> PgSelectSingle119
    PgClassExpression200{{"PgClassExpression[200∈4] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle98 --> PgClassExpression200
    PgClassExpression201{{"PgClassExpression[201∈4] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle98 --> PgClassExpression201
    PgClassExpression202{{"PgClassExpression[202∈4] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle98 --> PgClassExpression202
    PgSelect121[["PgSelect[121∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object12 & PgClassExpression120 --> PgSelect121
    PgSelect132[["PgSelect[132∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object12 & PgClassExpression120 --> PgSelect132
    PgSelect139[["PgSelect[139∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object12 & PgClassExpression120 --> PgSelect139
    PgSelect146[["PgSelect[146∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object12 & PgClassExpression120 --> PgSelect146
    PgSelect153[["PgSelect[153∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object12 & PgClassExpression120 --> PgSelect153
    First128{{"First[128∈5] ➊^"}}:::plan
    PgSelectRows129[["PgSelectRows[129∈5] ➊^"]]:::plan
    PgSelectRows129 --> First128
    PgSelect121 --> PgSelectRows129
    PgSelectSingle131{{"PgSelectSingle[131∈5] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First128 --> PgSelectSingle131
    First135{{"First[135∈5] ➊^"}}:::plan
    PgSelectRows136[["PgSelectRows[136∈5] ➊^"]]:::plan
    PgSelectRows136 --> First135
    PgSelect132 --> PgSelectRows136
    PgSelectSingle138{{"PgSelectSingle[138∈5] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First135 --> PgSelectSingle138
    First142{{"First[142∈5] ➊^"}}:::plan
    PgSelectRows143[["PgSelectRows[143∈5] ➊^"]]:::plan
    PgSelectRows143 --> First142
    PgSelect139 --> PgSelectRows143
    PgSelectSingle145{{"PgSelectSingle[145∈5] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First142 --> PgSelectSingle145
    First149{{"First[149∈5] ➊^"}}:::plan
    PgSelectRows150[["PgSelectRows[150∈5] ➊^"]]:::plan
    PgSelectRows150 --> First149
    PgSelect146 --> PgSelectRows150
    PgSelectSingle152{{"PgSelectSingle[152∈5] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First149 --> PgSelectSingle152
    First156{{"First[156∈5] ➊^"}}:::plan
    PgSelectRows157[["PgSelectRows[157∈5] ➊^"]]:::plan
    PgSelectRows157 --> First156
    PgSelect153 --> PgSelectRows157
    PgSelectSingle159{{"PgSelectSingle[159∈5] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First156 --> PgSelectSingle159
    PgClassExpression203{{"PgClassExpression[203∈5] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle138 --> PgClassExpression203
    PgClassExpression204{{"PgClassExpression[204∈5] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle138 --> PgClassExpression204
    PgClassExpression205{{"PgClassExpression[205∈5] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle138 --> PgClassExpression205
    PgSelect161[["PgSelect[161∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object12 & PgClassExpression160 --> PgSelect161
    PgSelect172[["PgSelect[172∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object12 & PgClassExpression160 --> PgSelect172
    PgSelect179[["PgSelect[179∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object12 & PgClassExpression160 --> PgSelect179
    PgSelect186[["PgSelect[186∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object12 & PgClassExpression160 --> PgSelect186
    PgSelect193[["PgSelect[193∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object12 & PgClassExpression160 --> PgSelect193
    First168{{"First[168∈6] ➊^"}}:::plan
    PgSelectRows169[["PgSelectRows[169∈6] ➊^"]]:::plan
    PgSelectRows169 --> First168
    PgSelect161 --> PgSelectRows169
    PgSelectSingle171{{"PgSelectSingle[171∈6] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First168 --> PgSelectSingle171
    First175{{"First[175∈6] ➊^"}}:::plan
    PgSelectRows176[["PgSelectRows[176∈6] ➊^"]]:::plan
    PgSelectRows176 --> First175
    PgSelect172 --> PgSelectRows176
    PgSelectSingle178{{"PgSelectSingle[178∈6] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First175 --> PgSelectSingle178
    First182{{"First[182∈6] ➊^"}}:::plan
    PgSelectRows183[["PgSelectRows[183∈6] ➊^"]]:::plan
    PgSelectRows183 --> First182
    PgSelect179 --> PgSelectRows183
    PgSelectSingle185{{"PgSelectSingle[185∈6] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First182 --> PgSelectSingle185
    First189{{"First[189∈6] ➊^"}}:::plan
    PgSelectRows190[["PgSelectRows[190∈6] ➊^"]]:::plan
    PgSelectRows190 --> First189
    PgSelect186 --> PgSelectRows190
    PgSelectSingle192{{"PgSelectSingle[192∈6] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First189 --> PgSelectSingle192
    First196{{"First[196∈6] ➊^"}}:::plan
    PgSelectRows197[["PgSelectRows[197∈6] ➊^"]]:::plan
    PgSelectRows197 --> First196
    PgSelect193 --> PgSelectRows197
    PgSelectSingle199{{"PgSelectSingle[199∈6] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First196 --> PgSelectSingle199
    PgClassExpression206{{"PgClassExpression[206∈6] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle178 --> PgClassExpression206
    PgClassExpression207{{"PgClassExpression[207∈6] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle178 --> PgClassExpression207
    PgClassExpression208{{"PgClassExpression[208∈6] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle178 --> PgClassExpression208

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access11,Object12,PgFromExpression14,Constant18,PgFromExpression25,Constant29,PgFromExpression36,Constant209,Constant210,Constant211 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect8,PgSelect19,PgSelect30,First39,PgSelectRows40,PgSelectSingle42,PgClassExpression43 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect45,First52,PgSelectRows53,PgSelectSingle55,PgClassExpression56,PgPolymorphic57,PgSelect59,First63,PgSelectRows64,PgSelectSingle66,PgClassExpression67,PgPolymorphic68,PgSelect70,First74,PgSelectRows75,PgSelectSingle77,PgClassExpression78,PgPolymorphic79,PgClassExpression80,PgClassExpression120,PgClassExpression160 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect81,First88,PgSelectRows89,PgSelectSingle91,PgSelect92,First95,PgSelectRows96,PgSelectSingle98,PgSelect99,First102,PgSelectRows103,PgSelectSingle105,PgSelect106,First109,PgSelectRows110,PgSelectSingle112,PgSelect113,First116,PgSelectRows117,PgSelectSingle119,PgClassExpression200,PgClassExpression201,PgClassExpression202 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect121,First128,PgSelectRows129,PgSelectSingle131,PgSelect132,First135,PgSelectRows136,PgSelectSingle138,PgSelect139,First142,PgSelectRows143,PgSelectSingle145,PgSelect146,First149,PgSelectRows150,PgSelectSingle152,PgSelect153,First156,PgSelectRows157,PgSelectSingle159,PgClassExpression203,PgClassExpression204,PgClassExpression205 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect161,First168,PgSelectRows169,PgSelectSingle171,PgSelect172,First175,PgSelectRows176,PgSelectSingle178,PgSelect179,First182,PgSelectRows183,PgSelectSingle185,PgSelect186,First189,PgSelectRows190,PgSelectSingle192,PgSelect193,First196,PgSelectRows197,PgSelectSingle199,PgClassExpression206,PgClassExpression207,PgClassExpression208 bucket6

    %% implicit side effects
    PgSelect8 -.-o PgSelect19
    PgSelect19 -.-o PgSelect30

