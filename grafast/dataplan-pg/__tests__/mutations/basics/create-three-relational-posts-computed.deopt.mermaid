%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/basics/create-three-relational-posts-computed"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 12, 19, 26, 201, 202, 203, 4<br /><br />1: PgSelect[8]<br />2: PgSelect[15]<br />3: PgSelect[22]<br />4: PgSelectRows[28]<br />ᐳ: 27, 29, 30"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 201, 202, 203, 30, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[30]<br />1: 32, 40, 46<br />2: 37, 43, 49<br />ᐳ: 36, 38, 42, 44, 48, 50, 51, 52, 53, 98, 99, 100, 145, 146, 147"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 11, 53, 52, 100, 99, 147, 146<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    Bucket4("Bucket 4 (polymorphic)<br />Deps: 11, 53, 52<br /><br />1: 54, 66, 74, 82, 90<br />2: 63, 71, 79, 87, 95<br />ᐳ: 62, 65, 70, 73, 78, 81, 86, 89, 94, 97, 192, 193, 194"):::bucket
    Bucket5("Bucket 5 (polymorphic)<br />Deps: 11, 100, 99<br /><br />1: 101, 113, 121, 129, 137<br />2: 110, 118, 126, 134, 142<br />ᐳ: 109, 112, 117, 120, 125, 128, 133, 136, 141, 144, 195, 196, 197"):::bucket
    Bucket6("Bucket 6 (polymorphic)<br />Deps: 11, 147, 146<br /><br />1: 148, 160, 168, 176, 184<br />2: 157, 165, 173, 181, 189<br />ᐳ: 156, 159, 164, 167, 172, 175, 180, 183, 188, 191, 198, 199, 200"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6

    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    PgFromExpression12{{"PgFromExpression[12∈0] ➊"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ'Computed post ꖛ1'ᐳ"}}:::plan
    Constant6 & Constant7 --> PgFromExpression12
    PgFromExpression19{{"PgFromExpression[19∈0] ➊"}}:::plan
    Constant14{{"Constant[14∈0] ➊<br />ᐸ'Computed post ꖛ2'ᐳ"}}:::plan
    Constant6 & Constant14 --> PgFromExpression19
    PgFromExpression26{{"PgFromExpression[26∈0] ➊"}}:::plan
    Constant21{{"Constant[21∈0] ➊<br />ᐸ'Computed post ꖛ3'ᐳ"}}:::plan
    Constant6 & Constant21 --> PgFromExpression26
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant201{{"Constant[201∈0] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Constant202{{"Constant[202∈0] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Constant203{{"Constant[203∈0] ➊<br />ᐸ1000002ᐳ"}}:::plan
    PgSelect8[["PgSelect[8∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression12 --> PgSelect8
    PgSelect15[["PgSelect[15∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression19 --> PgSelect15
    PgSelect22[["PgSelect[22∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression26 --> PgSelect22
    First27{{"First[27∈1] ➊"}}:::plan
    PgSelectRows28[["PgSelectRows[28∈1] ➊"]]:::plan
    PgSelectRows28 --> First27
    PgSelect22 --> PgSelectRows28
    PgSelectSingle29{{"PgSelectSingle[29∈1] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First27 --> PgSelectSingle29
    PgClassExpression30{{"PgClassExpression[30∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgSelectSingle29 --> PgClassExpression30
    PgSelect32[["PgSelect[32∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant201 --> PgSelect32
    PgSelect40[["PgSelect[40∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant202 --> PgSelect40
    PgSelect46[["PgSelect[46∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant203 --> PgSelect46
    First36{{"First[36∈2] ➊"}}:::plan
    PgSelectRows37[["PgSelectRows[37∈2] ➊"]]:::plan
    PgSelectRows37 --> First36
    PgSelect32 --> PgSelectRows37
    PgSelectSingle38{{"PgSelectSingle[38∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First36 --> PgSelectSingle38
    First42{{"First[42∈2] ➊"}}:::plan
    PgSelectRows43[["PgSelectRows[43∈2] ➊"]]:::plan
    PgSelectRows43 --> First42
    PgSelect40 --> PgSelectRows43
    PgSelectSingle44{{"PgSelectSingle[44∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First42 --> PgSelectSingle44
    First48{{"First[48∈2] ➊"}}:::plan
    PgSelectRows49[["PgSelectRows[49∈2] ➊"]]:::plan
    PgSelectRows49 --> First48
    PgSelect46 --> PgSelectRows49
    PgSelectSingle50{{"PgSelectSingle[50∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First48 --> PgSelectSingle50
    PgClassExpression51{{"PgClassExpression[51∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle38 --> PgClassExpression51
    Lambda52{{"Lambda[52∈2] ➊<br />ᐸrelationalItemTypeNameFromTypeᐳ"}}:::plan
    PgClassExpression51 --> Lambda52
    PgClassExpression53{{"PgClassExpression[53∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle38 --> PgClassExpression53
    PgClassExpression98{{"PgClassExpression[98∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression98
    Lambda99{{"Lambda[99∈2] ➊<br />ᐸrelationalItemTypeNameFromTypeᐳ"}}:::plan
    PgClassExpression98 --> Lambda99
    PgClassExpression100{{"PgClassExpression[100∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression100
    PgClassExpression145{{"PgClassExpression[145∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression145
    Lambda146{{"Lambda[146∈2] ➊<br />ᐸrelationalItemTypeNameFromTypeᐳ"}}:::plan
    PgClassExpression145 --> Lambda146
    PgClassExpression147{{"PgClassExpression[147∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression147
    PgSelect54[["PgSelect[54∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression53 --> PgSelect54
    PgSelect66[["PgSelect[66∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression53 --> PgSelect66
    PgSelect74[["PgSelect[74∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression53 --> PgSelect74
    PgSelect82[["PgSelect[82∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression53 --> PgSelect82
    PgSelect90[["PgSelect[90∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression53 --> PgSelect90
    First62{{"First[62∈4] ➊^"}}:::plan
    PgSelectRows63[["PgSelectRows[63∈4] ➊^"]]:::plan
    PgSelectRows63 --> First62
    PgSelect54 --> PgSelectRows63
    PgSelectSingle65{{"PgSelectSingle[65∈4] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First62 --> PgSelectSingle65
    First70{{"First[70∈4] ➊^"}}:::plan
    PgSelectRows71[["PgSelectRows[71∈4] ➊^"]]:::plan
    PgSelectRows71 --> First70
    PgSelect66 --> PgSelectRows71
    PgSelectSingle73{{"PgSelectSingle[73∈4] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First70 --> PgSelectSingle73
    First78{{"First[78∈4] ➊^"}}:::plan
    PgSelectRows79[["PgSelectRows[79∈4] ➊^"]]:::plan
    PgSelectRows79 --> First78
    PgSelect74 --> PgSelectRows79
    PgSelectSingle81{{"PgSelectSingle[81∈4] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First78 --> PgSelectSingle81
    First86{{"First[86∈4] ➊^"}}:::plan
    PgSelectRows87[["PgSelectRows[87∈4] ➊^"]]:::plan
    PgSelectRows87 --> First86
    PgSelect82 --> PgSelectRows87
    PgSelectSingle89{{"PgSelectSingle[89∈4] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First86 --> PgSelectSingle89
    First94{{"First[94∈4] ➊^"}}:::plan
    PgSelectRows95[["PgSelectRows[95∈4] ➊^"]]:::plan
    PgSelectRows95 --> First94
    PgSelect90 --> PgSelectRows95
    PgSelectSingle97{{"PgSelectSingle[97∈4] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First94 --> PgSelectSingle97
    PgClassExpression192{{"PgClassExpression[192∈4] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle73 --> PgClassExpression192
    PgClassExpression193{{"PgClassExpression[193∈4] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle73 --> PgClassExpression193
    PgClassExpression194{{"PgClassExpression[194∈4] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle73 --> PgClassExpression194
    PgSelect101[["PgSelect[101∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression100 --> PgSelect101
    PgSelect113[["PgSelect[113∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression100 --> PgSelect113
    PgSelect121[["PgSelect[121∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression100 --> PgSelect121
    PgSelect129[["PgSelect[129∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression100 --> PgSelect129
    PgSelect137[["PgSelect[137∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression100 --> PgSelect137
    First109{{"First[109∈5] ➊^"}}:::plan
    PgSelectRows110[["PgSelectRows[110∈5] ➊^"]]:::plan
    PgSelectRows110 --> First109
    PgSelect101 --> PgSelectRows110
    PgSelectSingle112{{"PgSelectSingle[112∈5] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First109 --> PgSelectSingle112
    First117{{"First[117∈5] ➊^"}}:::plan
    PgSelectRows118[["PgSelectRows[118∈5] ➊^"]]:::plan
    PgSelectRows118 --> First117
    PgSelect113 --> PgSelectRows118
    PgSelectSingle120{{"PgSelectSingle[120∈5] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First117 --> PgSelectSingle120
    First125{{"First[125∈5] ➊^"}}:::plan
    PgSelectRows126[["PgSelectRows[126∈5] ➊^"]]:::plan
    PgSelectRows126 --> First125
    PgSelect121 --> PgSelectRows126
    PgSelectSingle128{{"PgSelectSingle[128∈5] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First125 --> PgSelectSingle128
    First133{{"First[133∈5] ➊^"}}:::plan
    PgSelectRows134[["PgSelectRows[134∈5] ➊^"]]:::plan
    PgSelectRows134 --> First133
    PgSelect129 --> PgSelectRows134
    PgSelectSingle136{{"PgSelectSingle[136∈5] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First133 --> PgSelectSingle136
    First141{{"First[141∈5] ➊^"}}:::plan
    PgSelectRows142[["PgSelectRows[142∈5] ➊^"]]:::plan
    PgSelectRows142 --> First141
    PgSelect137 --> PgSelectRows142
    PgSelectSingle144{{"PgSelectSingle[144∈5] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First141 --> PgSelectSingle144
    PgClassExpression195{{"PgClassExpression[195∈5] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle120 --> PgClassExpression195
    PgClassExpression196{{"PgClassExpression[196∈5] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle120 --> PgClassExpression196
    PgClassExpression197{{"PgClassExpression[197∈5] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle120 --> PgClassExpression197
    PgSelect148[["PgSelect[148∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression147 --> PgSelect148
    PgSelect160[["PgSelect[160∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression147 --> PgSelect160
    PgSelect168[["PgSelect[168∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression147 --> PgSelect168
    PgSelect176[["PgSelect[176∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression147 --> PgSelect176
    PgSelect184[["PgSelect[184∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression147 --> PgSelect184
    First156{{"First[156∈6] ➊^"}}:::plan
    PgSelectRows157[["PgSelectRows[157∈6] ➊^"]]:::plan
    PgSelectRows157 --> First156
    PgSelect148 --> PgSelectRows157
    PgSelectSingle159{{"PgSelectSingle[159∈6] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First156 --> PgSelectSingle159
    First164{{"First[164∈6] ➊^"}}:::plan
    PgSelectRows165[["PgSelectRows[165∈6] ➊^"]]:::plan
    PgSelectRows165 --> First164
    PgSelect160 --> PgSelectRows165
    PgSelectSingle167{{"PgSelectSingle[167∈6] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First164 --> PgSelectSingle167
    First172{{"First[172∈6] ➊^"}}:::plan
    PgSelectRows173[["PgSelectRows[173∈6] ➊^"]]:::plan
    PgSelectRows173 --> First172
    PgSelect168 --> PgSelectRows173
    PgSelectSingle175{{"PgSelectSingle[175∈6] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First172 --> PgSelectSingle175
    First180{{"First[180∈6] ➊^"}}:::plan
    PgSelectRows181[["PgSelectRows[181∈6] ➊^"]]:::plan
    PgSelectRows181 --> First180
    PgSelect176 --> PgSelectRows181
    PgSelectSingle183{{"PgSelectSingle[183∈6] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First180 --> PgSelectSingle183
    First188{{"First[188∈6] ➊^"}}:::plan
    PgSelectRows189[["PgSelectRows[189∈6] ➊^"]]:::plan
    PgSelectRows189 --> First188
    PgSelect184 --> PgSelectRows189
    PgSelectSingle191{{"PgSelectSingle[191∈6] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First188 --> PgSelectSingle191
    PgClassExpression198{{"PgClassExpression[198∈6] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle167 --> PgClassExpression198
    PgClassExpression199{{"PgClassExpression[199∈6] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle167 --> PgClassExpression199
    PgClassExpression200{{"PgClassExpression[200∈6] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle167 --> PgClassExpression200

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,PgFromExpression12,Constant14,PgFromExpression19,Constant21,PgFromExpression26,Constant201,Constant202,Constant203 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect8,PgSelect15,PgSelect22,First27,PgSelectRows28,PgSelectSingle29,PgClassExpression30 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect32,First36,PgSelectRows37,PgSelectSingle38,PgSelect40,First42,PgSelectRows43,PgSelectSingle44,PgSelect46,First48,PgSelectRows49,PgSelectSingle50,PgClassExpression51,Lambda52,PgClassExpression53,PgClassExpression98,Lambda99,PgClassExpression100,PgClassExpression145,Lambda146,PgClassExpression147 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect54,First62,PgSelectRows63,PgSelectSingle65,PgSelect66,First70,PgSelectRows71,PgSelectSingle73,PgSelect74,First78,PgSelectRows79,PgSelectSingle81,PgSelect82,First86,PgSelectRows87,PgSelectSingle89,PgSelect90,First94,PgSelectRows95,PgSelectSingle97,PgClassExpression192,PgClassExpression193,PgClassExpression194 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect101,First109,PgSelectRows110,PgSelectSingle112,PgSelect113,First117,PgSelectRows118,PgSelectSingle120,PgSelect121,First125,PgSelectRows126,PgSelectSingle128,PgSelect129,First133,PgSelectRows134,PgSelectSingle136,PgSelect137,First141,PgSelectRows142,PgSelectSingle144,PgClassExpression195,PgClassExpression196,PgClassExpression197 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect148,First156,PgSelectRows157,PgSelectSingle159,PgSelect160,First164,PgSelectRows165,PgSelectSingle167,PgSelect168,First172,PgSelectRows173,PgSelectSingle175,PgSelect176,First180,PgSelectRows181,PgSelectSingle183,PgSelect184,First188,PgSelectRows189,PgSelectSingle191,PgClassExpression198,PgClassExpression199,PgClassExpression200 bucket6

    %% implicit side effects
    PgSelect8 -.-o PgSelect15
    PgSelect15 -.-o PgSelect22

