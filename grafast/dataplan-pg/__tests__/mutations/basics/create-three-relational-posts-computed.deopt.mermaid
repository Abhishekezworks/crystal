%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ'Computed post ꖛ1'ᐳ"}}:::plan
    Constant13{{"Constant[13∈0] ➊<br />ᐸ'Computed post ꖛ2'ᐳ"}}:::plan
    Constant19{{"Constant[19∈0] ➊<br />ᐸ'Computed post ꖛ3'ᐳ"}}:::plan
    Constant147{{"Constant[147∈0] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Constant148{{"Constant[148∈0] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Constant149{{"Constant[149∈0] ➊<br />ᐸ1000002ᐳ"}}:::plan
    PgSelect8[["PgSelect[8∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant7 --> PgSelect8
    PgSelect14[["PgSelect[14∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant13 --> PgSelect14
    PgSelect20[["PgSelect[20∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant19 --> PgSelect20
    First24{{"First[24∈1] ➊"}}:::plan
    PgSelectRows25[["PgSelectRows[25∈1] ➊"]]:::plan
    PgSelectRows25 --> First24
    PgSelect20 --> PgSelectRows25
    PgSelectSingle26{{"PgSelectSingle[26∈1] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First24 --> PgSelectSingle26
    PgClassExpression27{{"PgClassExpression[27∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgSelectSingle26 --> PgClassExpression27
    PgSelect29[["PgSelect[29∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant147 --> PgSelect29
    PgPolymorphic37{{"PgPolymorphic[37∈2] ➊"}}:::plan
    PgSelectSingle35{{"PgSelectSingle[35∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression36{{"PgClassExpression[36∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle35 & PgClassExpression36 --> PgPolymorphic37
    PgSelect70[["PgSelect[70∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant148 --> PgSelect70
    PgPolymorphic76{{"PgPolymorphic[76∈2] ➊"}}:::plan
    PgSelectSingle74{{"PgSelectSingle[74∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression75{{"PgClassExpression[75∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle74 & PgClassExpression75 --> PgPolymorphic76
    PgSelect109[["PgSelect[109∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant149 --> PgSelect109
    PgPolymorphic115{{"PgPolymorphic[115∈2] ➊"}}:::plan
    PgSelectSingle113{{"PgSelectSingle[113∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression114{{"PgClassExpression[114∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle113 & PgClassExpression114 --> PgPolymorphic115
    First33{{"First[33∈2] ➊"}}:::plan
    PgSelectRows34[["PgSelectRows[34∈2] ➊"]]:::plan
    PgSelectRows34 --> First33
    PgSelect29 --> PgSelectRows34
    First33 --> PgSelectSingle35
    PgSelectSingle35 --> PgClassExpression36
    PgClassExpression38{{"PgClassExpression[38∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle35 --> PgClassExpression38
    First72{{"First[72∈2] ➊"}}:::plan
    PgSelectRows73[["PgSelectRows[73∈2] ➊"]]:::plan
    PgSelectRows73 --> First72
    PgSelect70 --> PgSelectRows73
    First72 --> PgSelectSingle74
    PgSelectSingle74 --> PgClassExpression75
    PgClassExpression77{{"PgClassExpression[77∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle74 --> PgClassExpression77
    First111{{"First[111∈2] ➊"}}:::plan
    PgSelectRows112[["PgSelectRows[112∈2] ➊"]]:::plan
    PgSelectRows112 --> First111
    PgSelect109 --> PgSelectRows112
    First111 --> PgSelectSingle113
    PgSelectSingle113 --> PgClassExpression114
    PgClassExpression116{{"PgClassExpression[116∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle113 --> PgClassExpression116
    PgSelect39[["PgSelect[39∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression38 --> PgSelect39
    PgSelect46[["PgSelect[46∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression38 --> PgSelect46
    PgSelect54[["PgSelect[54∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression38 --> PgSelect54
    PgSelect59[["PgSelect[59∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression38 --> PgSelect59
    PgSelect64[["PgSelect[64∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression38 --> PgSelect64
    First43{{"First[43∈4] ➊"}}:::plan
    PgSelectRows44[["PgSelectRows[44∈4] ➊"]]:::plan
    PgSelectRows44 --> First43
    PgSelect39 --> PgSelectRows44
    PgSelectSingle45{{"PgSelectSingle[45∈4] ➊<br />ᐸrelational_topicsᐳ"}}:::plan
    First43 --> PgSelectSingle45
    First48{{"First[48∈4] ➊"}}:::plan
    PgSelectRows49[["PgSelectRows[49∈4] ➊"]]:::plan
    PgSelectRows49 --> First48
    PgSelect46 --> PgSelectRows49
    PgSelectSingle50{{"PgSelectSingle[50∈4] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First48 --> PgSelectSingle50
    PgClassExpression51{{"PgClassExpression[51∈4] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression51
    PgClassExpression52{{"PgClassExpression[52∈4] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression52
    PgClassExpression53{{"PgClassExpression[53∈4] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression53
    First56{{"First[56∈4] ➊"}}:::plan
    PgSelectRows57[["PgSelectRows[57∈4] ➊"]]:::plan
    PgSelectRows57 --> First56
    PgSelect54 --> PgSelectRows57
    PgSelectSingle58{{"PgSelectSingle[58∈4] ➊<br />ᐸrelational_dividersᐳ"}}:::plan
    First56 --> PgSelectSingle58
    First61{{"First[61∈4] ➊"}}:::plan
    PgSelectRows62[["PgSelectRows[62∈4] ➊"]]:::plan
    PgSelectRows62 --> First61
    PgSelect59 --> PgSelectRows62
    PgSelectSingle63{{"PgSelectSingle[63∈4] ➊<br />ᐸrelational_checklistsᐳ"}}:::plan
    First61 --> PgSelectSingle63
    First66{{"First[66∈4] ➊"}}:::plan
    PgSelectRows67[["PgSelectRows[67∈4] ➊"]]:::plan
    PgSelectRows67 --> First66
    PgSelect64 --> PgSelectRows67
    PgSelectSingle68{{"PgSelectSingle[68∈4] ➊<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First66 --> PgSelectSingle68
    PgSelect78[["PgSelect[78∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression77 --> PgSelect78
    PgSelect85[["PgSelect[85∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression77 --> PgSelect85
    PgSelect93[["PgSelect[93∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression77 --> PgSelect93
    PgSelect98[["PgSelect[98∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression77 --> PgSelect98
    PgSelect103[["PgSelect[103∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression77 --> PgSelect103
    First82{{"First[82∈5] ➊"}}:::plan
    PgSelectRows83[["PgSelectRows[83∈5] ➊"]]:::plan
    PgSelectRows83 --> First82
    PgSelect78 --> PgSelectRows83
    PgSelectSingle84{{"PgSelectSingle[84∈5] ➊<br />ᐸrelational_topicsᐳ"}}:::plan
    First82 --> PgSelectSingle84
    First87{{"First[87∈5] ➊"}}:::plan
    PgSelectRows88[["PgSelectRows[88∈5] ➊"]]:::plan
    PgSelectRows88 --> First87
    PgSelect85 --> PgSelectRows88
    PgSelectSingle89{{"PgSelectSingle[89∈5] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First87 --> PgSelectSingle89
    PgClassExpression90{{"PgClassExpression[90∈5] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression90
    PgClassExpression91{{"PgClassExpression[91∈5] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression91
    PgClassExpression92{{"PgClassExpression[92∈5] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression92
    First95{{"First[95∈5] ➊"}}:::plan
    PgSelectRows96[["PgSelectRows[96∈5] ➊"]]:::plan
    PgSelectRows96 --> First95
    PgSelect93 --> PgSelectRows96
    PgSelectSingle97{{"PgSelectSingle[97∈5] ➊<br />ᐸrelational_dividersᐳ"}}:::plan
    First95 --> PgSelectSingle97
    First100{{"First[100∈5] ➊"}}:::plan
    PgSelectRows101[["PgSelectRows[101∈5] ➊"]]:::plan
    PgSelectRows101 --> First100
    PgSelect98 --> PgSelectRows101
    PgSelectSingle102{{"PgSelectSingle[102∈5] ➊<br />ᐸrelational_checklistsᐳ"}}:::plan
    First100 --> PgSelectSingle102
    First105{{"First[105∈5] ➊"}}:::plan
    PgSelectRows106[["PgSelectRows[106∈5] ➊"]]:::plan
    PgSelectRows106 --> First105
    PgSelect103 --> PgSelectRows106
    PgSelectSingle107{{"PgSelectSingle[107∈5] ➊<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First105 --> PgSelectSingle107
    PgSelect117[["PgSelect[117∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression116 --> PgSelect117
    PgSelect124[["PgSelect[124∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression116 --> PgSelect124
    PgSelect132[["PgSelect[132∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression116 --> PgSelect132
    PgSelect137[["PgSelect[137∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression116 --> PgSelect137
    PgSelect142[["PgSelect[142∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression116 --> PgSelect142
    First121{{"First[121∈6] ➊"}}:::plan
    PgSelectRows122[["PgSelectRows[122∈6] ➊"]]:::plan
    PgSelectRows122 --> First121
    PgSelect117 --> PgSelectRows122
    PgSelectSingle123{{"PgSelectSingle[123∈6] ➊<br />ᐸrelational_topicsᐳ"}}:::plan
    First121 --> PgSelectSingle123
    First126{{"First[126∈6] ➊"}}:::plan
    PgSelectRows127[["PgSelectRows[127∈6] ➊"]]:::plan
    PgSelectRows127 --> First126
    PgSelect124 --> PgSelectRows127
    PgSelectSingle128{{"PgSelectSingle[128∈6] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First126 --> PgSelectSingle128
    PgClassExpression129{{"PgClassExpression[129∈6] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle128 --> PgClassExpression129
    PgClassExpression130{{"PgClassExpression[130∈6] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle128 --> PgClassExpression130
    PgClassExpression131{{"PgClassExpression[131∈6] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle128 --> PgClassExpression131
    First134{{"First[134∈6] ➊"}}:::plan
    PgSelectRows135[["PgSelectRows[135∈6] ➊"]]:::plan
    PgSelectRows135 --> First134
    PgSelect132 --> PgSelectRows135
    PgSelectSingle136{{"PgSelectSingle[136∈6] ➊<br />ᐸrelational_dividersᐳ"}}:::plan
    First134 --> PgSelectSingle136
    First139{{"First[139∈6] ➊"}}:::plan
    PgSelectRows140[["PgSelectRows[140∈6] ➊"]]:::plan
    PgSelectRows140 --> First139
    PgSelect137 --> PgSelectRows140
    PgSelectSingle141{{"PgSelectSingle[141∈6] ➊<br />ᐸrelational_checklistsᐳ"}}:::plan
    First139 --> PgSelectSingle141
    First144{{"First[144∈6] ➊"}}:::plan
    PgSelectRows145[["PgSelectRows[145∈6] ➊"]]:::plan
    PgSelectRows145 --> First144
    PgSelect142 --> PgSelectRows145
    PgSelectSingle146{{"PgSelectSingle[146∈6] ➊<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First144 --> PgSelectSingle146

    %% define steps

    %% implicit side effects
    PgSelect8 -.-o PgSelect14
    PgSelect14 -.-o PgSelect20

    subgraph "Buckets for mutations/basics/create-three-relational-posts-computed"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,Constant13,Constant19,Constant147,Constant148,Constant149 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 6, 7, 13, 19, 147, 148, 149, 4<br /><br />1: PgSelect[8]<br />2: PgSelect[14]<br />3: PgSelect[20]<br />4: PgSelectRows[25]<br />ᐳ: 24, 26, 27"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect8,PgSelect14,PgSelect20,First24,PgSelectRows25,PgSelectSingle26,PgClassExpression27 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 147, 148, 149, 27, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[27]<br />1: 29, 70, 109<br />2: 34, 73, 112<br />ᐳ: 33, 35, 36, 37, 38, 72, 74, 75, 76, 77, 111, 113, 114, 115, 116"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect29,First33,PgSelectRows34,PgSelectSingle35,PgClassExpression36,PgPolymorphic37,PgClassExpression38,PgSelect70,First72,PgSelectRows73,PgSelectSingle74,PgClassExpression75,PgPolymorphic76,PgClassExpression77,PgSelect109,First111,PgSelectRows112,PgSelectSingle113,PgClassExpression114,PgPolymorphic115,PgClassExpression116 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 11, 38, 37, 77, 76, 116, 115<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 38, 37<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 39, 46, 54, 59, 64<br />2: 44, 49, 57, 62, 67<br />ᐳ: 43, 45, 48, 50, 51, 52, 53, 56, 58, 61, 63, 66, 68"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect39,First43,PgSelectRows44,PgSelectSingle45,PgSelect46,First48,PgSelectRows49,PgSelectSingle50,PgClassExpression51,PgClassExpression52,PgClassExpression53,PgSelect54,First56,PgSelectRows57,PgSelectSingle58,PgSelect59,First61,PgSelectRows62,PgSelectSingle63,PgSelect64,First66,PgSelectRows67,PgSelectSingle68 bucket4
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 77, 76<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 78, 85, 93, 98, 103<br />2: 83, 88, 96, 101, 106<br />ᐳ: 82, 84, 87, 89, 90, 91, 92, 95, 97, 100, 102, 105, 107"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect78,First82,PgSelectRows83,PgSelectSingle84,PgSelect85,First87,PgSelectRows88,PgSelectSingle89,PgClassExpression90,PgClassExpression91,PgClassExpression92,PgSelect93,First95,PgSelectRows96,PgSelectSingle97,PgSelect98,First100,PgSelectRows101,PgSelectSingle102,PgSelect103,First105,PgSelectRows106,PgSelectSingle107 bucket5
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 116, 115<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 117, 124, 132, 137, 142<br />2: 122, 127, 135, 140, 145<br />ᐳ: 121, 123, 126, 128, 129, 130, 131, 134, 136, 139, 141, 144, 146"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect117,First121,PgSelectRows122,PgSelectSingle123,PgSelect124,First126,PgSelectRows127,PgSelectSingle128,PgClassExpression129,PgClassExpression130,PgClassExpression131,PgSelect132,First134,PgSelectRows135,PgSelectSingle136,PgSelect137,First139,PgSelectRows140,PgSelectSingle141,PgSelect142,First144,PgSelectRows145,PgSelectSingle146 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6
    end
