%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/basics/create-three-relational-posts-computed"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 12, 19, 26, 201, 202, 203, 4<br /><br />1: PgSelect[8]<br />2: PgSelect[15]<br />3: PgSelect[22]<br />4: PgSelectRows[28]<br />ᐳ: 27, 29, 30"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 201, 202, 203, 30, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[30]<br />1: 32, 42, 50<br />2: 37, 45, 53<br />ᐳ: 36, 38, 39, 40, 44, 46, 47, 48, 52, 54, 55, 56, 57, 102, 147"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 11, 57, 40, 102, 48, 147, 56<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 57, 40<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 58, 70, 78, 86, 94<br />2: 67, 75, 83, 91, 99<br />ᐳ: 66, 69, 74, 77, 82, 85, 90, 93, 98, 101, 192, 193, 194"):::bucket
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 102, 48<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 103, 115, 123, 131, 139<br />2: 112, 120, 128, 136, 144<br />ᐳ: 111, 114, 119, 122, 127, 130, 135, 138, 143, 146, 195, 196, 197"):::bucket
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 147, 56<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 148, 160, 168, 176, 184<br />2: 157, 165, 173, 181, 189<br />ᐳ: 156, 159, 164, 167, 172, 175, 180, 183, 188, 191, 198, 199, 200"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6

    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    PgFromExpression12{{"PgFromExpression[12∈0] ➊"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ'Computed post ꖛ1'ᐳ"}}:::plan
    Constant6 & Constant7 --> PgFromExpression12
    PgFromExpression19{{"PgFromExpression[19∈0] ➊"}}:::plan
    Constant14{{"Constant[14∈0] ➊<br />ᐸ'Computed post ꖛ2'ᐳ"}}:::plan
    Constant6 & Constant14 --> PgFromExpression19
    PgFromExpression26{{"PgFromExpression[26∈0] ➊"}}:::plan
    Constant21{{"Constant[21∈0] ➊<br />ᐸ'Computed post ꖛ3'ᐳ"}}:::plan
    Constant6 & Constant21 --> PgFromExpression26
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant201{{"Constant[201∈0] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Constant202{{"Constant[202∈0] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Constant203{{"Constant[203∈0] ➊<br />ᐸ1000002ᐳ"}}:::plan
    PgSelect8[["PgSelect[8∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression12 --> PgSelect8
    PgSelect15[["PgSelect[15∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression19 --> PgSelect15
    PgSelect22[["PgSelect[22∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression26 --> PgSelect22
    First27{{"First[27∈1] ➊"}}:::plan
    PgSelectRows28[["PgSelectRows[28∈1] ➊"]]:::plan
    PgSelectRows28 --> First27
    PgSelect22 --> PgSelectRows28
    PgSelectSingle29{{"PgSelectSingle[29∈1] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First27 --> PgSelectSingle29
    PgClassExpression30{{"PgClassExpression[30∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgSelectSingle29 --> PgClassExpression30
    PgSelect32[["PgSelect[32∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant201 --> PgSelect32
    PgPolymorphic40{{"PgPolymorphic[40∈2] ➊"}}:::plan
    PgSelectSingle38{{"PgSelectSingle[38∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression39{{"PgClassExpression[39∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle38 & PgClassExpression39 --> PgPolymorphic40
    PgSelect42[["PgSelect[42∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant202 --> PgSelect42
    PgPolymorphic48{{"PgPolymorphic[48∈2] ➊"}}:::plan
    PgSelectSingle46{{"PgSelectSingle[46∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression47{{"PgClassExpression[47∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle46 & PgClassExpression47 --> PgPolymorphic48
    PgSelect50[["PgSelect[50∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant203 --> PgSelect50
    PgPolymorphic56{{"PgPolymorphic[56∈2] ➊"}}:::plan
    PgSelectSingle54{{"PgSelectSingle[54∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression55{{"PgClassExpression[55∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle54 & PgClassExpression55 --> PgPolymorphic56
    First36{{"First[36∈2] ➊"}}:::plan
    PgSelectRows37[["PgSelectRows[37∈2] ➊"]]:::plan
    PgSelectRows37 --> First36
    PgSelect32 --> PgSelectRows37
    First36 --> PgSelectSingle38
    PgSelectSingle38 --> PgClassExpression39
    First44{{"First[44∈2] ➊"}}:::plan
    PgSelectRows45[["PgSelectRows[45∈2] ➊"]]:::plan
    PgSelectRows45 --> First44
    PgSelect42 --> PgSelectRows45
    First44 --> PgSelectSingle46
    PgSelectSingle46 --> PgClassExpression47
    First52{{"First[52∈2] ➊"}}:::plan
    PgSelectRows53[["PgSelectRows[53∈2] ➊"]]:::plan
    PgSelectRows53 --> First52
    PgSelect50 --> PgSelectRows53
    First52 --> PgSelectSingle54
    PgSelectSingle54 --> PgClassExpression55
    PgClassExpression57{{"PgClassExpression[57∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle38 --> PgClassExpression57
    PgClassExpression102{{"PgClassExpression[102∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle46 --> PgClassExpression102
    PgClassExpression147{{"PgClassExpression[147∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle54 --> PgClassExpression147
    PgSelect58[["PgSelect[58∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression57 --> PgSelect58
    PgSelect70[["PgSelect[70∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression57 --> PgSelect70
    PgSelect78[["PgSelect[78∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression57 --> PgSelect78
    PgSelect86[["PgSelect[86∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression57 --> PgSelect86
    PgSelect94[["PgSelect[94∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression57 --> PgSelect94
    First66{{"First[66∈4] ➊^"}}:::plan
    PgSelectRows67[["PgSelectRows[67∈4] ➊^"]]:::plan
    PgSelectRows67 --> First66
    PgSelect58 --> PgSelectRows67
    PgSelectSingle69{{"PgSelectSingle[69∈4] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First66 --> PgSelectSingle69
    First74{{"First[74∈4] ➊^"}}:::plan
    PgSelectRows75[["PgSelectRows[75∈4] ➊^"]]:::plan
    PgSelectRows75 --> First74
    PgSelect70 --> PgSelectRows75
    PgSelectSingle77{{"PgSelectSingle[77∈4] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First74 --> PgSelectSingle77
    First82{{"First[82∈4] ➊^"}}:::plan
    PgSelectRows83[["PgSelectRows[83∈4] ➊^"]]:::plan
    PgSelectRows83 --> First82
    PgSelect78 --> PgSelectRows83
    PgSelectSingle85{{"PgSelectSingle[85∈4] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First82 --> PgSelectSingle85
    First90{{"First[90∈4] ➊^"}}:::plan
    PgSelectRows91[["PgSelectRows[91∈4] ➊^"]]:::plan
    PgSelectRows91 --> First90
    PgSelect86 --> PgSelectRows91
    PgSelectSingle93{{"PgSelectSingle[93∈4] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First90 --> PgSelectSingle93
    First98{{"First[98∈4] ➊^"}}:::plan
    PgSelectRows99[["PgSelectRows[99∈4] ➊^"]]:::plan
    PgSelectRows99 --> First98
    PgSelect94 --> PgSelectRows99
    PgSelectSingle101{{"PgSelectSingle[101∈4] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First98 --> PgSelectSingle101
    PgClassExpression192{{"PgClassExpression[192∈4] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle77 --> PgClassExpression192
    PgClassExpression193{{"PgClassExpression[193∈4] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle77 --> PgClassExpression193
    PgClassExpression194{{"PgClassExpression[194∈4] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle77 --> PgClassExpression194
    PgSelect103[["PgSelect[103∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression102 --> PgSelect103
    PgSelect115[["PgSelect[115∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression102 --> PgSelect115
    PgSelect123[["PgSelect[123∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression102 --> PgSelect123
    PgSelect131[["PgSelect[131∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression102 --> PgSelect131
    PgSelect139[["PgSelect[139∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression102 --> PgSelect139
    First111{{"First[111∈5] ➊^"}}:::plan
    PgSelectRows112[["PgSelectRows[112∈5] ➊^"]]:::plan
    PgSelectRows112 --> First111
    PgSelect103 --> PgSelectRows112
    PgSelectSingle114{{"PgSelectSingle[114∈5] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First111 --> PgSelectSingle114
    First119{{"First[119∈5] ➊^"}}:::plan
    PgSelectRows120[["PgSelectRows[120∈5] ➊^"]]:::plan
    PgSelectRows120 --> First119
    PgSelect115 --> PgSelectRows120
    PgSelectSingle122{{"PgSelectSingle[122∈5] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First119 --> PgSelectSingle122
    First127{{"First[127∈5] ➊^"}}:::plan
    PgSelectRows128[["PgSelectRows[128∈5] ➊^"]]:::plan
    PgSelectRows128 --> First127
    PgSelect123 --> PgSelectRows128
    PgSelectSingle130{{"PgSelectSingle[130∈5] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First127 --> PgSelectSingle130
    First135{{"First[135∈5] ➊^"}}:::plan
    PgSelectRows136[["PgSelectRows[136∈5] ➊^"]]:::plan
    PgSelectRows136 --> First135
    PgSelect131 --> PgSelectRows136
    PgSelectSingle138{{"PgSelectSingle[138∈5] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First135 --> PgSelectSingle138
    First143{{"First[143∈5] ➊^"}}:::plan
    PgSelectRows144[["PgSelectRows[144∈5] ➊^"]]:::plan
    PgSelectRows144 --> First143
    PgSelect139 --> PgSelectRows144
    PgSelectSingle146{{"PgSelectSingle[146∈5] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First143 --> PgSelectSingle146
    PgClassExpression195{{"PgClassExpression[195∈5] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle122 --> PgClassExpression195
    PgClassExpression196{{"PgClassExpression[196∈5] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle122 --> PgClassExpression196
    PgClassExpression197{{"PgClassExpression[197∈5] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle122 --> PgClassExpression197
    PgSelect148[["PgSelect[148∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression147 --> PgSelect148
    PgSelect160[["PgSelect[160∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression147 --> PgSelect160
    PgSelect168[["PgSelect[168∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression147 --> PgSelect168
    PgSelect176[["PgSelect[176∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression147 --> PgSelect176
    PgSelect184[["PgSelect[184∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression147 --> PgSelect184
    First156{{"First[156∈6] ➊^"}}:::plan
    PgSelectRows157[["PgSelectRows[157∈6] ➊^"]]:::plan
    PgSelectRows157 --> First156
    PgSelect148 --> PgSelectRows157
    PgSelectSingle159{{"PgSelectSingle[159∈6] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First156 --> PgSelectSingle159
    First164{{"First[164∈6] ➊^"}}:::plan
    PgSelectRows165[["PgSelectRows[165∈6] ➊^"]]:::plan
    PgSelectRows165 --> First164
    PgSelect160 --> PgSelectRows165
    PgSelectSingle167{{"PgSelectSingle[167∈6] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First164 --> PgSelectSingle167
    First172{{"First[172∈6] ➊^"}}:::plan
    PgSelectRows173[["PgSelectRows[173∈6] ➊^"]]:::plan
    PgSelectRows173 --> First172
    PgSelect168 --> PgSelectRows173
    PgSelectSingle175{{"PgSelectSingle[175∈6] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First172 --> PgSelectSingle175
    First180{{"First[180∈6] ➊^"}}:::plan
    PgSelectRows181[["PgSelectRows[181∈6] ➊^"]]:::plan
    PgSelectRows181 --> First180
    PgSelect176 --> PgSelectRows181
    PgSelectSingle183{{"PgSelectSingle[183∈6] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First180 --> PgSelectSingle183
    First188{{"First[188∈6] ➊^"}}:::plan
    PgSelectRows189[["PgSelectRows[189∈6] ➊^"]]:::plan
    PgSelectRows189 --> First188
    PgSelect184 --> PgSelectRows189
    PgSelectSingle191{{"PgSelectSingle[191∈6] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First188 --> PgSelectSingle191
    PgClassExpression198{{"PgClassExpression[198∈6] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle167 --> PgClassExpression198
    PgClassExpression199{{"PgClassExpression[199∈6] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle167 --> PgClassExpression199
    PgClassExpression200{{"PgClassExpression[200∈6] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle167 --> PgClassExpression200

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,PgFromExpression12,Constant14,PgFromExpression19,Constant21,PgFromExpression26,Constant201,Constant202,Constant203 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect8,PgSelect15,PgSelect22,First27,PgSelectRows28,PgSelectSingle29,PgClassExpression30 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect32,First36,PgSelectRows37,PgSelectSingle38,PgClassExpression39,PgPolymorphic40,PgSelect42,First44,PgSelectRows45,PgSelectSingle46,PgClassExpression47,PgPolymorphic48,PgSelect50,First52,PgSelectRows53,PgSelectSingle54,PgClassExpression55,PgPolymorphic56,PgClassExpression57,PgClassExpression102,PgClassExpression147 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect58,First66,PgSelectRows67,PgSelectSingle69,PgSelect70,First74,PgSelectRows75,PgSelectSingle77,PgSelect78,First82,PgSelectRows83,PgSelectSingle85,PgSelect86,First90,PgSelectRows91,PgSelectSingle93,PgSelect94,First98,PgSelectRows99,PgSelectSingle101,PgClassExpression192,PgClassExpression193,PgClassExpression194 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect103,First111,PgSelectRows112,PgSelectSingle114,PgSelect115,First119,PgSelectRows120,PgSelectSingle122,PgSelect123,First127,PgSelectRows128,PgSelectSingle130,PgSelect131,First135,PgSelectRows136,PgSelectSingle138,PgSelect139,First143,PgSelectRows144,PgSelectSingle146,PgClassExpression195,PgClassExpression196,PgClassExpression197 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect148,First156,PgSelectRows157,PgSelectSingle159,PgSelect160,First164,PgSelectRows165,PgSelectSingle167,PgSelect168,First172,PgSelectRows173,PgSelectSingle175,PgSelect176,First180,PgSelectRows181,PgSelectSingle183,PgSelect184,First188,PgSelectRows189,PgSelectSingle191,PgClassExpression198,PgClassExpression199,PgClassExpression200 bucket6

    %% implicit side effects
    PgSelect8 -.-o PgSelect15
    PgSelect15 -.-o PgSelect22

