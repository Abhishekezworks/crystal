%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    PgFromExpression12{{"PgFromExpression[12∈0] ➊"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ'Computed post ꖛ1'ᐳ"}}:::plan
    Constant6 & Constant7 --> PgFromExpression12
    PgFromExpression19{{"PgFromExpression[19∈0] ➊"}}:::plan
    Constant14{{"Constant[14∈0] ➊<br />ᐸ'Computed post ꖛ2'ᐳ"}}:::plan
    Constant6 & Constant14 --> PgFromExpression19
    PgFromExpression26{{"PgFromExpression[26∈0] ➊"}}:::plan
    Constant21{{"Constant[21∈0] ➊<br />ᐸ'Computed post ꖛ3'ᐳ"}}:::plan
    Constant6 & Constant21 --> PgFromExpression26
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant150{{"Constant[150∈0] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Constant151{{"Constant[151∈0] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Constant152{{"Constant[152∈0] ➊<br />ᐸ1000002ᐳ"}}:::plan
    PgSelect8[["PgSelect[8∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression12 --> PgSelect8
    PgSelect15[["PgSelect[15∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression19 --> PgSelect15
    PgSelect22[["PgSelect[22∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression26 --> PgSelect22
    First27{{"First[27∈1] ➊"}}:::plan
    PgSelectRows28[["PgSelectRows[28∈1] ➊"]]:::plan
    PgSelectRows28 --> First27
    PgSelect22 --> PgSelectRows28
    PgSelectSingle29{{"PgSelectSingle[29∈1] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First27 --> PgSelectSingle29
    PgClassExpression30{{"PgClassExpression[30∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgSelectSingle29 --> PgClassExpression30
    PgSelect32[["PgSelect[32∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant150 --> PgSelect32
    PgPolymorphic40{{"PgPolymorphic[40∈2] ➊"}}:::plan
    PgSelectSingle38{{"PgSelectSingle[38∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression39{{"PgClassExpression[39∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle38 & PgClassExpression39 --> PgPolymorphic40
    PgSelect70[["PgSelect[70∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant151 --> PgSelect70
    PgPolymorphic76{{"PgPolymorphic[76∈2] ➊"}}:::plan
    PgSelectSingle74{{"PgSelectSingle[74∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression75{{"PgClassExpression[75∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle74 & PgClassExpression75 --> PgPolymorphic76
    PgSelect106[["PgSelect[106∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant152 --> PgSelect106
    PgPolymorphic112{{"PgPolymorphic[112∈2] ➊"}}:::plan
    PgSelectSingle110{{"PgSelectSingle[110∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression111{{"PgClassExpression[111∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle110 & PgClassExpression111 --> PgPolymorphic112
    First36{{"First[36∈2] ➊"}}:::plan
    PgSelectRows37[["PgSelectRows[37∈2] ➊"]]:::plan
    PgSelectRows37 --> First36
    PgSelect32 --> PgSelectRows37
    First36 --> PgSelectSingle38
    PgSelectSingle38 --> PgClassExpression39
    PgClassExpression41{{"PgClassExpression[41∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle38 --> PgClassExpression41
    First72{{"First[72∈2] ➊"}}:::plan
    PgSelectRows73[["PgSelectRows[73∈2] ➊"]]:::plan
    PgSelectRows73 --> First72
    PgSelect70 --> PgSelectRows73
    First72 --> PgSelectSingle74
    PgSelectSingle74 --> PgClassExpression75
    PgClassExpression77{{"PgClassExpression[77∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle74 --> PgClassExpression77
    First108{{"First[108∈2] ➊"}}:::plan
    PgSelectRows109[["PgSelectRows[109∈2] ➊"]]:::plan
    PgSelectRows109 --> First108
    PgSelect106 --> PgSelectRows109
    First108 --> PgSelectSingle110
    PgSelectSingle110 --> PgClassExpression111
    PgClassExpression113{{"PgClassExpression[113∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle110 --> PgClassExpression113
    PgSelect42[["PgSelect[42∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect42
    PgSelect49[["PgSelect[49∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect49
    PgSelect54[["PgSelect[54∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect54
    PgSelect59[["PgSelect[59∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect59
    PgSelect64[["PgSelect[64∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect64
    First46{{"First[46∈4] ➊^"}}:::plan
    PgSelectRows47[["PgSelectRows[47∈4] ➊^"]]:::plan
    PgSelectRows47 --> First46
    PgSelect42 --> PgSelectRows47
    PgSelectSingle48{{"PgSelectSingle[48∈4] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First46 --> PgSelectSingle48
    First51{{"First[51∈4] ➊^"}}:::plan
    PgSelectRows52[["PgSelectRows[52∈4] ➊^"]]:::plan
    PgSelectRows52 --> First51
    PgSelect49 --> PgSelectRows52
    PgSelectSingle53{{"PgSelectSingle[53∈4] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First51 --> PgSelectSingle53
    First56{{"First[56∈4] ➊^"}}:::plan
    PgSelectRows57[["PgSelectRows[57∈4] ➊^"]]:::plan
    PgSelectRows57 --> First56
    PgSelect54 --> PgSelectRows57
    PgSelectSingle58{{"PgSelectSingle[58∈4] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First56 --> PgSelectSingle58
    First61{{"First[61∈4] ➊^"}}:::plan
    PgSelectRows62[["PgSelectRows[62∈4] ➊^"]]:::plan
    PgSelectRows62 --> First61
    PgSelect59 --> PgSelectRows62
    PgSelectSingle63{{"PgSelectSingle[63∈4] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First61 --> PgSelectSingle63
    First66{{"First[66∈4] ➊^"}}:::plan
    PgSelectRows67[["PgSelectRows[67∈4] ➊^"]]:::plan
    PgSelectRows67 --> First66
    PgSelect64 --> PgSelectRows67
    PgSelectSingle68{{"PgSelectSingle[68∈4] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First66 --> PgSelectSingle68
    PgClassExpression141{{"PgClassExpression[141∈4] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression141
    PgClassExpression142{{"PgClassExpression[142∈4] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression142
    PgClassExpression143{{"PgClassExpression[143∈4] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle53 --> PgClassExpression143
    PgSelect78[["PgSelect[78∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression77 --> PgSelect78
    PgSelect85[["PgSelect[85∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression77 --> PgSelect85
    PgSelect90[["PgSelect[90∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression77 --> PgSelect90
    PgSelect95[["PgSelect[95∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression77 --> PgSelect95
    PgSelect100[["PgSelect[100∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression77 --> PgSelect100
    First82{{"First[82∈5] ➊^"}}:::plan
    PgSelectRows83[["PgSelectRows[83∈5] ➊^"]]:::plan
    PgSelectRows83 --> First82
    PgSelect78 --> PgSelectRows83
    PgSelectSingle84{{"PgSelectSingle[84∈5] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First82 --> PgSelectSingle84
    First87{{"First[87∈5] ➊^"}}:::plan
    PgSelectRows88[["PgSelectRows[88∈5] ➊^"]]:::plan
    PgSelectRows88 --> First87
    PgSelect85 --> PgSelectRows88
    PgSelectSingle89{{"PgSelectSingle[89∈5] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First87 --> PgSelectSingle89
    First92{{"First[92∈5] ➊^"}}:::plan
    PgSelectRows93[["PgSelectRows[93∈5] ➊^"]]:::plan
    PgSelectRows93 --> First92
    PgSelect90 --> PgSelectRows93
    PgSelectSingle94{{"PgSelectSingle[94∈5] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First92 --> PgSelectSingle94
    First97{{"First[97∈5] ➊^"}}:::plan
    PgSelectRows98[["PgSelectRows[98∈5] ➊^"]]:::plan
    PgSelectRows98 --> First97
    PgSelect95 --> PgSelectRows98
    PgSelectSingle99{{"PgSelectSingle[99∈5] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First97 --> PgSelectSingle99
    First102{{"First[102∈5] ➊^"}}:::plan
    PgSelectRows103[["PgSelectRows[103∈5] ➊^"]]:::plan
    PgSelectRows103 --> First102
    PgSelect100 --> PgSelectRows103
    PgSelectSingle104{{"PgSelectSingle[104∈5] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First102 --> PgSelectSingle104
    PgClassExpression144{{"PgClassExpression[144∈5] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression144
    PgClassExpression145{{"PgClassExpression[145∈5] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression145
    PgClassExpression146{{"PgClassExpression[146∈5] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression146
    PgSelect114[["PgSelect[114∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression113 --> PgSelect114
    PgSelect121[["PgSelect[121∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression113 --> PgSelect121
    PgSelect126[["PgSelect[126∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression113 --> PgSelect126
    PgSelect131[["PgSelect[131∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression113 --> PgSelect131
    PgSelect136[["PgSelect[136∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression113 --> PgSelect136
    First118{{"First[118∈6] ➊^"}}:::plan
    PgSelectRows119[["PgSelectRows[119∈6] ➊^"]]:::plan
    PgSelectRows119 --> First118
    PgSelect114 --> PgSelectRows119
    PgSelectSingle120{{"PgSelectSingle[120∈6] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First118 --> PgSelectSingle120
    First123{{"First[123∈6] ➊^"}}:::plan
    PgSelectRows124[["PgSelectRows[124∈6] ➊^"]]:::plan
    PgSelectRows124 --> First123
    PgSelect121 --> PgSelectRows124
    PgSelectSingle125{{"PgSelectSingle[125∈6] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First123 --> PgSelectSingle125
    First128{{"First[128∈6] ➊^"}}:::plan
    PgSelectRows129[["PgSelectRows[129∈6] ➊^"]]:::plan
    PgSelectRows129 --> First128
    PgSelect126 --> PgSelectRows129
    PgSelectSingle130{{"PgSelectSingle[130∈6] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First128 --> PgSelectSingle130
    First133{{"First[133∈6] ➊^"}}:::plan
    PgSelectRows134[["PgSelectRows[134∈6] ➊^"]]:::plan
    PgSelectRows134 --> First133
    PgSelect131 --> PgSelectRows134
    PgSelectSingle135{{"PgSelectSingle[135∈6] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First133 --> PgSelectSingle135
    First138{{"First[138∈6] ➊^"}}:::plan
    PgSelectRows139[["PgSelectRows[139∈6] ➊^"]]:::plan
    PgSelectRows139 --> First138
    PgSelect136 --> PgSelectRows139
    PgSelectSingle140{{"PgSelectSingle[140∈6] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First138 --> PgSelectSingle140
    PgClassExpression147{{"PgClassExpression[147∈6] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle125 --> PgClassExpression147
    PgClassExpression148{{"PgClassExpression[148∈6] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle125 --> PgClassExpression148
    PgClassExpression149{{"PgClassExpression[149∈6] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle125 --> PgClassExpression149

    %% define steps

    %% implicit side effects
    PgSelect8 -.-o PgSelect15
    PgSelect15 -.-o PgSelect22

    subgraph "Buckets for mutations/basics/create-three-relational-posts-computed"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,PgFromExpression12,Constant14,PgFromExpression19,Constant21,PgFromExpression26,Constant150,Constant151,Constant152 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 12, 19, 26, 150, 151, 152, 4<br /><br />1: PgSelect[8]<br />2: PgSelect[15]<br />3: PgSelect[22]<br />4: PgSelectRows[28]<br />ᐳ: 27, 29, 30"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect8,PgSelect15,PgSelect22,First27,PgSelectRows28,PgSelectSingle29,PgClassExpression30 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 150, 151, 152, 30, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[30]<br />1: 32, 70, 106<br />2: 37, 73, 109<br />ᐳ: 36, 38, 39, 40, 41, 72, 74, 75, 76, 77, 108, 110, 111, 112, 113"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect32,First36,PgSelectRows37,PgSelectSingle38,PgClassExpression39,PgPolymorphic40,PgClassExpression41,PgSelect70,First72,PgSelectRows73,PgSelectSingle74,PgClassExpression75,PgPolymorphic76,PgClassExpression77,PgSelect106,First108,PgSelectRows109,PgSelectSingle110,PgClassExpression111,PgPolymorphic112,PgClassExpression113 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 11, 41, 40, 77, 76, 113, 112<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 41, 40<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 42, 49, 54, 59, 64<br />2: 47, 52, 57, 62, 67<br />ᐳ: 46, 48, 51, 53, 56, 58, 61, 63, 66, 68, 141, 142, 143"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect42,First46,PgSelectRows47,PgSelectSingle48,PgSelect49,First51,PgSelectRows52,PgSelectSingle53,PgSelect54,First56,PgSelectRows57,PgSelectSingle58,PgSelect59,First61,PgSelectRows62,PgSelectSingle63,PgSelect64,First66,PgSelectRows67,PgSelectSingle68,PgClassExpression141,PgClassExpression142,PgClassExpression143 bucket4
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 77, 76<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 78, 85, 90, 95, 100<br />2: 83, 88, 93, 98, 103<br />ᐳ: 82, 84, 87, 89, 92, 94, 97, 99, 102, 104, 144, 145, 146"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect78,First82,PgSelectRows83,PgSelectSingle84,PgSelect85,First87,PgSelectRows88,PgSelectSingle89,PgSelect90,First92,PgSelectRows93,PgSelectSingle94,PgSelect95,First97,PgSelectRows98,PgSelectSingle99,PgSelect100,First102,PgSelectRows103,PgSelectSingle104,PgClassExpression144,PgClassExpression145,PgClassExpression146 bucket5
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 113, 112<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 114, 121, 126, 131, 136<br />2: 119, 124, 129, 134, 139<br />ᐳ: 118, 120, 123, 125, 128, 130, 133, 135, 138, 140, 147, 148, 149"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect114,First118,PgSelectRows119,PgSelectSingle120,PgSelect121,First123,PgSelectRows124,PgSelectSingle125,PgSelect126,First128,PgSelectRows129,PgSelectSingle130,PgSelect131,First133,PgSelectRows134,PgSelectSingle135,PgSelect136,First138,PgSelectRows139,PgSelectSingle140,PgClassExpression147,PgClassExpression148,PgClassExpression149 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6
    end
