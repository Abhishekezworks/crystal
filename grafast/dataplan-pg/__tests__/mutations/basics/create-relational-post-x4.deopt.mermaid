%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/basics/create-relational-post-x4"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 16, 10, 11, 166, 167, 168<br /><br />1: PgInsertSingle[12]<br />2: Access[18]<br />3: PgClassExpression[17]<br />4: PgInsertSingle[20]<br />5: <br />ᐳ: Access[26], PgClassExpression[25]"):::bucket
    Bucket2("Bucket 2 (mutationField)<br />Deps: 10, 11, 2, 169, 170, 171<br /><br />1: Access[35]<br />2: Access[37]<br />3: Object[38]<br />4: PgInsertSingle[34]<br />5: Access[40]<br />6: PgClassExpression[39]<br />7: PgInsertSingle[42]<br />8: <br />ᐳ: Access[48], PgClassExpression[47]"):::bucket
    Bucket3("Bucket 3 (mutationField)<br />Deps: 10, 11, 2, 172, 173, 174<br /><br />1: Access[57]<br />2: Access[59]<br />3: Object[60]<br />4: PgInsertSingle[56]<br />5: Access[62]<br />6: PgClassExpression[61]<br />7: PgInsertSingle[64]<br />8: <br />ᐳ: Access[70], PgClassExpression[69]"):::bucket
    Bucket4("Bucket 4 (mutationField)<br />Deps: 10, 11, 2, 175, 176, 177<br /><br />1: Access[79]<br />2: Access[81]<br />3: Object[82]<br />4: PgInsertSingle[78]<br />5: Access[84]<br />6: PgClassExpression[83]<br />7: PgInsertSingle[86]<br />8: <br />ᐳ: Access[92], PgClassExpression[91]"):::bucket
    Bucket5("Bucket 5 (nullableBoundary)<br />Deps: 26, 16, 25<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[25]<br />1: <br />ᐳ: PgClassExpression[94]<br />2: PgSelect[97]<br />3: PgSelectRows[105]<br />ᐳ: First[104], PgSelectSingle[107]"):::bucket
    Bucket6("Bucket 6 (nullableBoundary)<br />Deps: 48, 38, 47<br /><br />ROOT PgClassExpression{2}ᐸ__relational_posts__ᐳ[47]<br />1: <br />ᐳ: PgClassExpression[108]<br />2: PgSelect[111]<br />3: PgSelectRows[119]<br />ᐳ: First[118], PgSelectSingle[121]"):::bucket
    Bucket7("Bucket 7 (nullableBoundary)<br />Deps: 70, 60, 69<br /><br />ROOT PgClassExpression{3}ᐸ__relational_posts__ᐳ[69]<br />1: <br />ᐳ: PgClassExpression[122]<br />2: PgSelect[125]<br />3: PgSelectRows[133]<br />ᐳ: First[132], PgSelectSingle[135]"):::bucket
    Bucket8("Bucket 8 (nullableBoundary)<br />Deps: 92, 82, 91<br /><br />ROOT PgClassExpression{4}ᐸ__relational_posts__ᐳ[91]<br />1: <br />ᐳ: PgClassExpression[136]<br />2: PgSelect[139]<br />3: PgSelectRows[147]<br />ᐳ: First[146], PgSelectSingle[149]"):::bucket
    Bucket9("Bucket 9 (nullableBoundary)<br />Deps: 107<br /><br />ROOT PgSelectSingle{5}ᐸrelational_postsᐳ[107]"):::bucket
    Bucket10("Bucket 10 (nullableBoundary)<br />Deps: 121<br /><br />ROOT PgSelectSingle{6}ᐸrelational_postsᐳ[121]"):::bucket
    Bucket11("Bucket 11 (nullableBoundary)<br />Deps: 135<br /><br />ROOT PgSelectSingle{7}ᐸrelational_postsᐳ[135]"):::bucket
    Bucket12("Bucket 12 (nullableBoundary)<br />Deps: 149<br /><br />ROOT PgSelectSingle{8}ᐸrelational_postsᐳ[149]"):::bucket
    end
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4
    Bucket1 --> Bucket5
    Bucket2 --> Bucket6
    Bucket3 --> Bucket7
    Bucket4 --> Bucket8
    Bucket5 --> Bucket9
    Bucket6 --> Bucket10
    Bucket7 --> Bucket11
    Bucket8 --> Bucket12

    %% plan dependencies
    Object16{{"Object[16∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access13{{"Access[13∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access15{{"Access[15∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access13 & Access15 --> Object16
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access13
    __Value2 --> Access15
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant10{{"Constant[10∈0] ➊<br />ᐸ'POST'ᐳ"}}:::plan
    Constant11{{"Constant[11∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant166{{"Constant[166∈0] ➊<br />ᐸ'My Relational Post'ᐳ"}}:::plan
    Constant167{{"Constant[167∈0] ➊<br />ᐸ'A post, innit?'ᐳ"}}:::plan
    Constant168{{"Constant[168∈0] ➊<br />ᐸ'Such a great post.'ᐳ"}}:::plan
    Constant169{{"Constant[169∈0] ➊<br />ᐸ'My Relational Post 2'ᐳ"}}:::plan
    Constant170{{"Constant[170∈0] ➊<br />ᐸ'A post, innit? 2'ᐳ"}}:::plan
    Constant171{{"Constant[171∈0] ➊<br />ᐸ'Such a great post. 2'ᐳ"}}:::plan
    Constant172{{"Constant[172∈0] ➊<br />ᐸ'My Relational Post 3'ᐳ"}}:::plan
    Constant173{{"Constant[173∈0] ➊<br />ᐸ'A post, innit? 3'ᐳ"}}:::plan
    Constant174{{"Constant[174∈0] ➊<br />ᐸ'Such a great post. 3'ᐳ"}}:::plan
    Constant175{{"Constant[175∈0] ➊<br />ᐸ'My Relational Post 4'ᐳ"}}:::plan
    Constant176{{"Constant[176∈0] ➊<br />ᐸ'A post, innit? 4'ᐳ"}}:::plan
    Constant177{{"Constant[177∈0] ➊<br />ᐸ'Such a great post. 4'ᐳ"}}:::plan
    PgInsertSingle20[["PgInsertSingle[20∈1] ➊<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression17{{"PgClassExpression[17∈1] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object16 & PgClassExpression17 & Constant166 & Constant167 & Constant168 --> PgInsertSingle20
    PgInsertSingle12[["PgInsertSingle[12∈1] ➊<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object16 & Constant10 & Constant11 --> PgInsertSingle12
    Access18{{"Access[18∈1] ➊<br />ᐸ12.tᐳ"}}:::plan
    Access18 --> PgClassExpression17
    PgInsertSingle12 --> Access18
    PgClassExpression25{{"PgClassExpression[25∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    Access26{{"Access[26∈1] ➊<br />ᐸ20.tᐳ"}}:::plan
    Access26 --> PgClassExpression25
    PgInsertSingle20 --> Access26
    PgSelect97[["PgSelect[97∈5] ➊<br />ᐸrelational_postsᐳ"]]:::plan
    PgClassExpression94{{"PgClassExpression[94∈5] ➊<br />ᐸ(__relatio...ts__).”id”ᐳ"}}:::plan
    Object16 & PgClassExpression94 --> PgSelect97
    Access26 --> PgClassExpression94
    First104{{"First[104∈5] ➊"}}:::plan
    PgSelectRows105[["PgSelectRows[105∈5] ➊"]]:::plan
    PgSelectRows105 --> First104
    PgSelect97 --> PgSelectRows105
    PgSelectSingle107{{"PgSelectSingle[107∈5] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First104 --> PgSelectSingle107
    PgClassExpression150{{"PgClassExpression[150∈9] ➊<br />ᐸ__relation...sts__.”id”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression150
    PgClassExpression151{{"PgClassExpression[151∈9] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression151
    PgClassExpression152{{"PgClassExpression[152∈9] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression152
    PgClassExpression153{{"PgClassExpression[153∈9] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression153
    PgInsertSingle42[["PgInsertSingle[42∈2] ➊<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    Object38{{"Object[38∈2] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    PgClassExpression39{{"PgClassExpression[39∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object38 & PgClassExpression39 & Constant169 & Constant170 & Constant171 --> PgInsertSingle42
    PgInsertSingle34[["PgInsertSingle[34∈2] ➊<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object38 & Constant10 & Constant11 --> PgInsertSingle34
    Access35{{"Access[35∈2] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access37{{"Access[37∈2] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access35 & Access37 --> Object38
    __Value2 --> Access35
    __Value2 --> Access37
    Access40{{"Access[40∈2] ➊<br />ᐸ34.tᐳ"}}:::plan
    Access40 --> PgClassExpression39
    PgInsertSingle34 --> Access40
    PgClassExpression47{{"PgClassExpression[47∈2] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    Access48{{"Access[48∈2] ➊<br />ᐸ42.tᐳ"}}:::plan
    Access48 --> PgClassExpression47
    PgInsertSingle42 --> Access48
    PgSelect111[["PgSelect[111∈6] ➊<br />ᐸrelational_postsᐳ"]]:::plan
    PgClassExpression108{{"PgClassExpression[108∈6] ➊<br />ᐸ(__relatio...ts__).”id”ᐳ"}}:::plan
    Object38 & PgClassExpression108 --> PgSelect111
    Access48 --> PgClassExpression108
    First118{{"First[118∈6] ➊"}}:::plan
    PgSelectRows119[["PgSelectRows[119∈6] ➊"]]:::plan
    PgSelectRows119 --> First118
    PgSelect111 --> PgSelectRows119
    PgSelectSingle121{{"PgSelectSingle[121∈6] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First118 --> PgSelectSingle121
    PgClassExpression154{{"PgClassExpression[154∈10] ➊<br />ᐸ__relation...sts__.”id”ᐳ"}}:::plan
    PgSelectSingle121 --> PgClassExpression154
    PgClassExpression155{{"PgClassExpression[155∈10] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle121 --> PgClassExpression155
    PgClassExpression156{{"PgClassExpression[156∈10] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle121 --> PgClassExpression156
    PgClassExpression157{{"PgClassExpression[157∈10] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle121 --> PgClassExpression157
    PgInsertSingle64[["PgInsertSingle[64∈3] ➊<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    Object60{{"Object[60∈3] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    PgClassExpression61{{"PgClassExpression[61∈3] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object60 & PgClassExpression61 & Constant172 & Constant173 & Constant174 --> PgInsertSingle64
    PgInsertSingle56[["PgInsertSingle[56∈3] ➊<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object60 & Constant10 & Constant11 --> PgInsertSingle56
    Access57{{"Access[57∈3] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access59{{"Access[59∈3] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access57 & Access59 --> Object60
    __Value2 --> Access57
    __Value2 --> Access59
    Access62{{"Access[62∈3] ➊<br />ᐸ56.tᐳ"}}:::plan
    Access62 --> PgClassExpression61
    PgInsertSingle56 --> Access62
    PgClassExpression69{{"PgClassExpression[69∈3] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    Access70{{"Access[70∈3] ➊<br />ᐸ64.tᐳ"}}:::plan
    Access70 --> PgClassExpression69
    PgInsertSingle64 --> Access70
    PgSelect125[["PgSelect[125∈7] ➊<br />ᐸrelational_postsᐳ"]]:::plan
    PgClassExpression122{{"PgClassExpression[122∈7] ➊<br />ᐸ(__relatio...ts__).”id”ᐳ"}}:::plan
    Object60 & PgClassExpression122 --> PgSelect125
    Access70 --> PgClassExpression122
    First132{{"First[132∈7] ➊"}}:::plan
    PgSelectRows133[["PgSelectRows[133∈7] ➊"]]:::plan
    PgSelectRows133 --> First132
    PgSelect125 --> PgSelectRows133
    PgSelectSingle135{{"PgSelectSingle[135∈7] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First132 --> PgSelectSingle135
    PgClassExpression158{{"PgClassExpression[158∈11] ➊<br />ᐸ__relation...sts__.”id”ᐳ"}}:::plan
    PgSelectSingle135 --> PgClassExpression158
    PgClassExpression159{{"PgClassExpression[159∈11] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle135 --> PgClassExpression159
    PgClassExpression160{{"PgClassExpression[160∈11] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle135 --> PgClassExpression160
    PgClassExpression161{{"PgClassExpression[161∈11] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle135 --> PgClassExpression161
    PgInsertSingle86[["PgInsertSingle[86∈4] ➊<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    Object82{{"Object[82∈4] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    PgClassExpression83{{"PgClassExpression[83∈4] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object82 & PgClassExpression83 & Constant175 & Constant176 & Constant177 --> PgInsertSingle86
    PgInsertSingle78[["PgInsertSingle[78∈4] ➊<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object82 & Constant10 & Constant11 --> PgInsertSingle78
    Access79{{"Access[79∈4] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access81{{"Access[81∈4] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access79 & Access81 --> Object82
    __Value2 --> Access79
    __Value2 --> Access81
    Access84{{"Access[84∈4] ➊<br />ᐸ78.tᐳ"}}:::plan
    Access84 --> PgClassExpression83
    PgInsertSingle78 --> Access84
    PgClassExpression91{{"PgClassExpression[91∈4] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    Access92{{"Access[92∈4] ➊<br />ᐸ86.tᐳ"}}:::plan
    Access92 --> PgClassExpression91
    PgInsertSingle86 --> Access92
    PgSelect139[["PgSelect[139∈8] ➊<br />ᐸrelational_postsᐳ"]]:::plan
    PgClassExpression136{{"PgClassExpression[136∈8] ➊<br />ᐸ(__relatio...ts__).”id”ᐳ"}}:::plan
    Object82 & PgClassExpression136 --> PgSelect139
    Access92 --> PgClassExpression136
    First146{{"First[146∈8] ➊"}}:::plan
    PgSelectRows147[["PgSelectRows[147∈8] ➊"]]:::plan
    PgSelectRows147 --> First146
    PgSelect139 --> PgSelectRows147
    PgSelectSingle149{{"PgSelectSingle[149∈8] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First146 --> PgSelectSingle149
    PgClassExpression162{{"PgClassExpression[162∈12] ➊<br />ᐸ__relation...sts__.”id”ᐳ"}}:::plan
    PgSelectSingle149 --> PgClassExpression162
    PgClassExpression163{{"PgClassExpression[163∈12] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle149 --> PgClassExpression163
    PgClassExpression164{{"PgClassExpression[164∈12] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle149 --> PgClassExpression164
    PgClassExpression165{{"PgClassExpression[165∈12] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle149 --> PgClassExpression165

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant10,Constant11,Access13,Access15,Object16,Constant166,Constant167,Constant168,Constant169,Constant170,Constant171,Constant172,Constant173,Constant174,Constant175,Constant176,Constant177 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgInsertSingle12,PgClassExpression17,Access18,PgInsertSingle20,PgClassExpression25,Access26 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgInsertSingle34,Access35,Access37,Object38,PgClassExpression39,Access40,PgInsertSingle42,PgClassExpression47,Access48 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgInsertSingle56,Access57,Access59,Object60,PgClassExpression61,Access62,PgInsertSingle64,PgClassExpression69,Access70 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgInsertSingle78,Access79,Access81,Object82,PgClassExpression83,Access84,PgInsertSingle86,PgClassExpression91,Access92 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression94,PgSelect97,First104,PgSelectRows105,PgSelectSingle107 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression108,PgSelect111,First118,PgSelectRows119,PgSelectSingle121 bucket6
    classDef bucket7 stroke:#808000
    class Bucket7,PgClassExpression122,PgSelect125,First132,PgSelectRows133,PgSelectSingle135 bucket7
    classDef bucket8 stroke:#dda0dd
    class Bucket8,PgClassExpression136,PgSelect139,First146,PgSelectRows147,PgSelectSingle149 bucket8
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgClassExpression150,PgClassExpression151,PgClassExpression152,PgClassExpression153 bucket9
    classDef bucket10 stroke:#ffff00
    class Bucket10,PgClassExpression154,PgClassExpression155,PgClassExpression156,PgClassExpression157 bucket10
    classDef bucket11 stroke:#00ffff
    class Bucket11,PgClassExpression158,PgClassExpression159,PgClassExpression160,PgClassExpression161 bucket11
    classDef bucket12 stroke:#4169e1
    class Bucket12,PgClassExpression162,PgClassExpression163,PgClassExpression164,PgClassExpression165 bucket12

