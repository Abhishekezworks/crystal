%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ'POST'ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant13{{"Constant[13∈0] ➊<br />ᐸ'Post ꖛ1'ᐳ"}}:::plan
    Constant14{{"Constant[14∈0] ➊<br />ᐸ'Desc 1'ᐳ"}}:::plan
    Constant15{{"Constant[15∈0] ➊<br />ᐸnullᐳ"}}:::plan
    Constant27{{"Constant[27∈0] ➊<br />ᐸ'Post ꖛ2'ᐳ"}}:::plan
    Constant28{{"Constant[28∈0] ➊<br />ᐸ'Desc 2'ᐳ"}}:::plan
    Constant41{{"Constant[41∈0] ➊<br />ᐸ'Post ꖛ3'ᐳ"}}:::plan
    Constant42{{"Constant[42∈0] ➊<br />ᐸ'Desc 3'ᐳ"}}:::plan
    PgInsertSingle16[["PgInsertSingle[16∈1] ➊<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression12{{"PgClassExpression[12∈1] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object11 & PgClassExpression12 & Constant13 & Constant14 & Constant15 --> PgInsertSingle16
    PgInsertSingle30[["PgInsertSingle[30∈1] ➊<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression26{{"PgClassExpression[26∈1] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object11 & PgClassExpression26 & Constant27 & Constant28 & Constant15 --> PgInsertSingle30
    PgInsertSingle44[["PgInsertSingle[44∈1] ➊<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression40{{"PgClassExpression[40∈1] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object11 & PgClassExpression40 & Constant41 & Constant42 & Constant15 --> PgInsertSingle44
    PgInsertSingle8[["PgInsertSingle[8∈1] ➊<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant7 --> PgInsertSingle8
    PgInsertSingle22[["PgInsertSingle[22∈1] ➊<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant7 --> PgInsertSingle22
    PgInsertSingle36[["PgInsertSingle[36∈1] ➊<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object11 & Constant6 & Constant7 --> PgInsertSingle36
    PgInsertSingle8 --> PgClassExpression12
    PgInsertSingle22 --> PgClassExpression26
    PgInsertSingle36 --> PgClassExpression40
    PgClassExpression48{{"PgClassExpression[48∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgInsertSingle44 --> PgClassExpression48
    PgSelect50[["PgSelect[50∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant178{{"Constant[178∈2] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Object11 & Constant178 --> PgSelect50
    PgSelect93[["PgSelect[93∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant179{{"Constant[179∈2] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Object11 & Constant179 --> PgSelect93
    PgSelect136[["PgSelect[136∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant180{{"Constant[180∈2] ➊<br />ᐸ1000002ᐳ"}}:::plan
    Object11 & Constant180 --> PgSelect136
    First54{{"First[54∈2] ➊"}}:::plan
    PgSelect50 --> First54
    PgSelectSingle55{{"PgSelectSingle[55∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First54 --> PgSelectSingle55
    First97{{"First[97∈2] ➊"}}:::plan
    PgSelect93 --> First97
    PgSelectSingle98{{"PgSelectSingle[98∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First97 --> PgSelectSingle98
    First140{{"First[140∈2] ➊"}}:::plan
    PgSelect136 --> First140
    PgSelectSingle141{{"PgSelectSingle[141∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First140 --> PgSelectSingle141
    PgPolymorphic57{{"PgPolymorphic[57∈3] ➊"}}:::plan
    PgClassExpression56{{"PgClassExpression[56∈3] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle55 & PgClassExpression56 --> PgPolymorphic57
    PgPolymorphic100{{"PgPolymorphic[100∈3] ➊"}}:::plan
    PgClassExpression99{{"PgClassExpression[99∈3] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle98 & PgClassExpression99 --> PgPolymorphic100
    PgPolymorphic143{{"PgPolymorphic[143∈3] ➊"}}:::plan
    PgClassExpression142{{"PgClassExpression[142∈3] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle141 & PgClassExpression142 --> PgPolymorphic143
    PgSelectSingle55 --> PgClassExpression56
    PgSelectSingle98 --> PgClassExpression99
    PgSelectSingle141 --> PgClassExpression142
    PgSelect59[["PgSelect[59∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    PgClassExpression58{{"PgClassExpression[58∈4] ➊<br />ᐸ__relation...ems__.”id”ᐳ<br />ᐳRelationalTopic"}}:::plan
    Object11 & PgClassExpression58 --> PgSelect59
    PgSelect65[["PgSelect[65∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression58 --> PgSelect65
    PgSelect74[["PgSelect[74∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression58 --> PgSelect74
    PgSelect80[["PgSelect[80∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression58 --> PgSelect80
    PgSelect86[["PgSelect[86∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression58 --> PgSelect86
    PgSelectSingle55 --> PgClassExpression58
    First63{{"First[63∈4] ➊"}}:::plan
    PgSelect59 --> First63
    PgSelectSingle64{{"PgSelectSingle[64∈4] ➊<br />ᐸrelational_topicsᐳ"}}:::plan
    First63 --> PgSelectSingle64
    First69{{"First[69∈4] ➊"}}:::plan
    PgSelect65 --> First69
    PgSelectSingle70{{"PgSelectSingle[70∈4] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First69 --> PgSelectSingle70
    PgClassExpression71{{"PgClassExpression[71∈4] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle70 --> PgClassExpression71
    PgClassExpression72{{"PgClassExpression[72∈4] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle70 --> PgClassExpression72
    PgClassExpression73{{"PgClassExpression[73∈4] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle70 --> PgClassExpression73
    First78{{"First[78∈4] ➊"}}:::plan
    PgSelect74 --> First78
    PgSelectSingle79{{"PgSelectSingle[79∈4] ➊<br />ᐸrelational_dividersᐳ"}}:::plan
    First78 --> PgSelectSingle79
    First84{{"First[84∈4] ➊"}}:::plan
    PgSelect80 --> First84
    PgSelectSingle85{{"PgSelectSingle[85∈4] ➊<br />ᐸrelational_checklistsᐳ"}}:::plan
    First84 --> PgSelectSingle85
    First90{{"First[90∈4] ➊"}}:::plan
    PgSelect86 --> First90
    PgSelectSingle91{{"PgSelectSingle[91∈4] ➊<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First90 --> PgSelectSingle91
    PgSelect102[["PgSelect[102∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    PgClassExpression101{{"PgClassExpression[101∈5] ➊<br />ᐸ__relation...ems__.”id”ᐳ<br />ᐳRelationalTopic"}}:::plan
    Object11 & PgClassExpression101 --> PgSelect102
    PgSelect108[["PgSelect[108∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression101 --> PgSelect108
    PgSelect117[["PgSelect[117∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression101 --> PgSelect117
    PgSelect123[["PgSelect[123∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression101 --> PgSelect123
    PgSelect129[["PgSelect[129∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression101 --> PgSelect129
    PgSelectSingle98 --> PgClassExpression101
    First106{{"First[106∈5] ➊"}}:::plan
    PgSelect102 --> First106
    PgSelectSingle107{{"PgSelectSingle[107∈5] ➊<br />ᐸrelational_topicsᐳ"}}:::plan
    First106 --> PgSelectSingle107
    First112{{"First[112∈5] ➊"}}:::plan
    PgSelect108 --> First112
    PgSelectSingle113{{"PgSelectSingle[113∈5] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First112 --> PgSelectSingle113
    PgClassExpression114{{"PgClassExpression[114∈5] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle113 --> PgClassExpression114
    PgClassExpression115{{"PgClassExpression[115∈5] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle113 --> PgClassExpression115
    PgClassExpression116{{"PgClassExpression[116∈5] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle113 --> PgClassExpression116
    First121{{"First[121∈5] ➊"}}:::plan
    PgSelect117 --> First121
    PgSelectSingle122{{"PgSelectSingle[122∈5] ➊<br />ᐸrelational_dividersᐳ"}}:::plan
    First121 --> PgSelectSingle122
    First127{{"First[127∈5] ➊"}}:::plan
    PgSelect123 --> First127
    PgSelectSingle128{{"PgSelectSingle[128∈5] ➊<br />ᐸrelational_checklistsᐳ"}}:::plan
    First127 --> PgSelectSingle128
    First133{{"First[133∈5] ➊"}}:::plan
    PgSelect129 --> First133
    PgSelectSingle134{{"PgSelectSingle[134∈5] ➊<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First133 --> PgSelectSingle134
    PgSelect145[["PgSelect[145∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    PgClassExpression144{{"PgClassExpression[144∈6] ➊<br />ᐸ__relation...ems__.”id”ᐳ<br />ᐳRelationalTopic"}}:::plan
    Object11 & PgClassExpression144 --> PgSelect145
    PgSelect151[["PgSelect[151∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression144 --> PgSelect151
    PgSelect160[["PgSelect[160∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression144 --> PgSelect160
    PgSelect166[["PgSelect[166∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression144 --> PgSelect166
    PgSelect172[["PgSelect[172∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression144 --> PgSelect172
    PgSelectSingle141 --> PgClassExpression144
    First149{{"First[149∈6] ➊"}}:::plan
    PgSelect145 --> First149
    PgSelectSingle150{{"PgSelectSingle[150∈6] ➊<br />ᐸrelational_topicsᐳ"}}:::plan
    First149 --> PgSelectSingle150
    First155{{"First[155∈6] ➊"}}:::plan
    PgSelect151 --> First155
    PgSelectSingle156{{"PgSelectSingle[156∈6] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First155 --> PgSelectSingle156
    PgClassExpression157{{"PgClassExpression[157∈6] ➊<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle156 --> PgClassExpression157
    PgClassExpression158{{"PgClassExpression[158∈6] ➊<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle156 --> PgClassExpression158
    PgClassExpression159{{"PgClassExpression[159∈6] ➊<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle156 --> PgClassExpression159
    First164{{"First[164∈6] ➊"}}:::plan
    PgSelect160 --> First164
    PgSelectSingle165{{"PgSelectSingle[165∈6] ➊<br />ᐸrelational_dividersᐳ"}}:::plan
    First164 --> PgSelectSingle165
    First170{{"First[170∈6] ➊"}}:::plan
    PgSelect166 --> First170
    PgSelectSingle171{{"PgSelectSingle[171∈6] ➊<br />ᐸrelational_checklistsᐳ"}}:::plan
    First170 --> PgSelectSingle171
    First176{{"First[176∈6] ➊"}}:::plan
    PgSelect172 --> First176
    PgSelectSingle177{{"PgSelectSingle[177∈6] ➊<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First176 --> PgSelectSingle177

    %% define steps

    %% implicit side effects
    PgInsertSingle16 -.-o PgInsertSingle22
    PgInsertSingle30 -.-o PgInsertSingle36

    subgraph "Buckets for mutations/basics/create-three-relational-posts"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,Constant13,Constant14,Constant15,Constant27,Constant28,Constant41,Constant42 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 6, 7, 13, 14, 15, 27, 28, 41, 42, 4<br /><br />1: PgInsertSingle[8]<br />2: PgClassExpression[12]<br />3: PgInsertSingle[16]<br />4: PgInsertSingle[22]<br />5: PgClassExpression[26]<br />6: PgInsertSingle[30]<br />7: PgInsertSingle[36]<br />8: PgClassExpression[40]<br />9: PgInsertSingle[44]<br />10: <br />ᐳ: PgClassExpression[48]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgInsertSingle8,PgClassExpression12,PgInsertSingle16,PgInsertSingle22,PgClassExpression26,PgInsertSingle30,PgInsertSingle36,PgClassExpression40,PgInsertSingle44,PgClassExpression48 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 48, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[48]<br />1: <br />ᐳ: 178, 179, 180<br />2: 50, 93, 136<br />ᐳ: 54, 55, 97, 98, 140, 141"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect50,First54,PgSelectSingle55,PgSelect93,First97,PgSelectSingle98,PgSelect136,First140,PgSelectSingle141,Constant178,Constant179,Constant180 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 55, 98, 141, 4, 11<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression56,PgPolymorphic57,PgClassExpression99,PgPolymorphic100,PgClassExpression142,PgPolymorphic143 bucket3
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 55, 11, 57<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: <br />ᐳ: PgClassExpression[58]<br />2: 59, 65, 74, 80, 86<br />ᐳ: 63, 64, 69, 70, 71, 72, 73, 78, 79, 84, 85, 90, 91"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgClassExpression58,PgSelect59,First63,PgSelectSingle64,PgSelect65,First69,PgSelectSingle70,PgClassExpression71,PgClassExpression72,PgClassExpression73,PgSelect74,First78,PgSelectSingle79,PgSelect80,First84,PgSelectSingle85,PgSelect86,First90,PgSelectSingle91 bucket4
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 98, 11, 100<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: <br />ᐳ: PgClassExpression[101]<br />2: 102, 108, 117, 123, 129<br />ᐳ: 106, 107, 112, 113, 114, 115, 116, 121, 122, 127, 128, 133, 134"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgClassExpression101,PgSelect102,First106,PgSelectSingle107,PgSelect108,First112,PgSelectSingle113,PgClassExpression114,PgClassExpression115,PgClassExpression116,PgSelect117,First121,PgSelectSingle122,PgSelect123,First127,PgSelectSingle128,PgSelect129,First133,PgSelectSingle134 bucket5
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 141, 11, 143<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: <br />ᐳ: PgClassExpression[144]<br />2: 145, 151, 160, 166, 172<br />ᐳ: 149, 150, 155, 156, 157, 158, 159, 164, 165, 170, 171, 176, 177"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgClassExpression144,PgSelect145,First149,PgSelectSingle150,PgSelect151,First155,PgSelectSingle156,PgClassExpression157,PgClassExpression158,PgClassExpression159,PgSelect160,First164,PgSelectSingle165,PgSelect166,First170,PgSelectSingle171,PgSelect172,First176,PgSelectSingle177 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6
    end
