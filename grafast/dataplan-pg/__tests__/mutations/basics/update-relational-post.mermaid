%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    __InputStaticLeaf8["__InputStaticLeaf[8∈0]"]:::plan
    __InputStaticLeaf11["__InputStaticLeaf[11∈0]"]:::plan
    Access14["Access[14∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access15["Access[15∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object16["Object[16∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    PgUpdate13[["PgUpdate[13∈1]"]]:::sideeffectplan
    PgClassExpression17["PgClassExpression[17∈1]<br />ᐸ__relation...sts__.”id”ᐳ"]:::plan
    PgSelect19[["PgSelect[19∈1]<br />ᐸrelational_postsᐳ"]]:::plan
    First23["First[23∈1]"]:::plan
    PgSelectSingle24["PgSelectSingle[24∈1]<br />ᐸrelational_postsᐳ"]:::plan
    PgClassExpression25["PgClassExpression[25∈1]<br />ᐸ__relation...sts__.”id”ᐳ"]:::plan
    PgClassExpression26["PgClassExpression[26∈1]<br />ᐸ__relation...__.”title”ᐳ"]:::plan
    PgClassExpression27["PgClassExpression[27∈1]<br />ᐸ__relation...scription”ᐳ"]:::plan
    PgClassExpression28["PgClassExpression[28∈1]<br />ᐸ__relation...s__.”note”ᐳ"]:::plan
    Map223["Map[223∈1]<br />ᐸ24:{”0”:3}ᐳ"]:::plan
    PgSelectSingle35["PgSelectSingle[35∈1]<br />ᐸtextᐳ"]:::plan
    PgClassExpression36["PgClassExpression[36∈1]<br />ᐸ__relation..._lower__.vᐳ"]:::plan
    Map231["Map[231∈1]<br />ᐸ24:{”0”:5,”1”:6,”2”:7,”3”:8}ᐳ"]:::plan
    PgSelectSingle43["PgSelectSingle[43∈1]<br />ᐸrelational_itemsᐳ"]:::plan
    PgClassExpression44["PgClassExpression[44∈1]<br />ᐸ__relation..._archived”ᐳ"]:::plan
    Map227["Map[227∈1]<br />ᐸ43:{”0”:1,”1”:2}ᐳ"]:::plan
    PgSelectSingle58["PgSelectSingle[58∈1]<br />ᐸpeopleᐳ"]:::plan
    PgClassExpression59["PgClassExpression[59∈1]<br />ᐸ__people__.”person_id”ᐳ"]:::plan
    PgClassExpression60["PgClassExpression[60∈1]<br />ᐸ__people__.”username”ᐳ"]:::plan
    __InputStaticLeaf62["__InputStaticLeaf[62∈0]"]:::plan
    __InputStaticLeaf66["__InputStaticLeaf[66∈0]"]:::plan
    PgUpdate67[["PgUpdate[67∈5]"]]:::sideeffectplan
    PgClassExpression71["PgClassExpression[71∈5]<br />ᐸ__relation...sts__.”id”ᐳ"]:::plan
    PgSelect73[["PgSelect[73∈5]<br />ᐸrelational_postsᐳ"]]:::plan
    First77["First[77∈5]"]:::plan
    PgSelectSingle78["PgSelectSingle[78∈5]<br />ᐸrelational_postsᐳ"]:::plan
    PgClassExpression79["PgClassExpression[79∈5]<br />ᐸ__relation...sts__.”id”ᐳ"]:::plan
    PgClassExpression80["PgClassExpression[80∈5]<br />ᐸ__relation...__.”title”ᐳ"]:::plan
    PgClassExpression81["PgClassExpression[81∈5]<br />ᐸ__relation...scription”ᐳ"]:::plan
    PgClassExpression82["PgClassExpression[82∈5]<br />ᐸ__relation...s__.”note”ᐳ"]:::plan
    Map235["Map[235∈5]<br />ᐸ78:{”0”:3}ᐳ"]:::plan
    PgSelectSingle89["PgSelectSingle[89∈5]<br />ᐸtextᐳ"]:::plan
    PgClassExpression90["PgClassExpression[90∈5]<br />ᐸ__relation..._lower__.vᐳ"]:::plan
    Map243["Map[243∈5]<br />ᐸ78:{”0”:5,”1”:6,”2”:7,”3”:8}ᐳ"]:::plan
    PgSelectSingle97["PgSelectSingle[97∈5]<br />ᐸrelational_itemsᐳ"]:::plan
    PgClassExpression98["PgClassExpression[98∈5]<br />ᐸ__relation..._archived”ᐳ"]:::plan
    Map239["Map[239∈5]<br />ᐸ97:{”0”:1,”1”:2}ᐳ"]:::plan
    PgSelectSingle112["PgSelectSingle[112∈5]<br />ᐸpeopleᐳ"]:::plan
    PgClassExpression113["PgClassExpression[113∈5]<br />ᐸ__people__.”person_id”ᐳ"]:::plan
    PgClassExpression114["PgClassExpression[114∈5]<br />ᐸ__people__.”username”ᐳ"]:::plan
    __InputStaticLeaf116["__InputStaticLeaf[116∈0]"]:::plan
    __InputStaticLeaf119["__InputStaticLeaf[119∈0]"]:::plan
    PgUpdate121[["PgUpdate[121∈9]"]]:::sideeffectplan
    PgClassExpression125["PgClassExpression[125∈9]<br />ᐸ__relation...sts__.”id”ᐳ"]:::plan
    PgSelect127[["PgSelect[127∈9]<br />ᐸrelational_postsᐳ"]]:::plan
    First131["First[131∈9]"]:::plan
    PgSelectSingle132["PgSelectSingle[132∈9]<br />ᐸrelational_postsᐳ"]:::plan
    PgClassExpression133["PgClassExpression[133∈9]<br />ᐸ__relation...sts__.”id”ᐳ"]:::plan
    PgClassExpression134["PgClassExpression[134∈9]<br />ᐸ__relation...__.”title”ᐳ"]:::plan
    PgClassExpression135["PgClassExpression[135∈9]<br />ᐸ__relation...scription”ᐳ"]:::plan
    PgClassExpression136["PgClassExpression[136∈9]<br />ᐸ__relation...s__.”note”ᐳ"]:::plan
    Map245["Map[245∈9]<br />ᐸ132:{”0”:5}ᐳ"]:::plan
    PgSelectSingle143["PgSelectSingle[143∈9]<br />ᐸtextᐳ"]:::plan
    PgClassExpression144["PgClassExpression[144∈9]<br />ᐸ__relation..._lower__.vᐳ"]:::plan
    Map241["Map[241∈9]<br />ᐸ132:{”0”:0,”1”:1,”2”:2,”3”:3}ᐳ"]:::plan
    PgSelectSingle151["PgSelectSingle[151∈9]<br />ᐸrelational_itemsᐳ"]:::plan
    PgClassExpression152["PgClassExpression[152∈9]<br />ᐸ__relation..._archived”ᐳ"]:::plan
    Map237["Map[237∈9]<br />ᐸ151:{”0”:0,”1”:1}ᐳ"]:::plan
    PgSelectSingle166["PgSelectSingle[166∈9]<br />ᐸpeopleᐳ"]:::plan
    PgClassExpression167["PgClassExpression[167∈9]<br />ᐸ__people__.”person_id”ᐳ"]:::plan
    PgClassExpression168["PgClassExpression[168∈9]<br />ᐸ__people__.”username”ᐳ"]:::plan
    __InputStaticLeaf170["__InputStaticLeaf[170∈0]"]:::plan
    __InputStaticLeaf173["__InputStaticLeaf[173∈0]"]:::plan
    PgUpdate175[["PgUpdate[175∈13]"]]:::sideeffectplan
    PgClassExpression179["PgClassExpression[179∈13]<br />ᐸ__relation...sts__.”id”ᐳ"]:::plan
    PgSelect181[["PgSelect[181∈13]<br />ᐸrelational_postsᐳ"]]:::plan
    First185["First[185∈13]"]:::plan
    PgSelectSingle186["PgSelectSingle[186∈13]<br />ᐸrelational_postsᐳ"]:::plan
    PgClassExpression187["PgClassExpression[187∈13]<br />ᐸ__relation...sts__.”id”ᐳ"]:::plan
    PgClassExpression188["PgClassExpression[188∈13]<br />ᐸ__relation...__.”title”ᐳ"]:::plan
    PgClassExpression189["PgClassExpression[189∈13]<br />ᐸ__relation...scription”ᐳ"]:::plan
    PgClassExpression190["PgClassExpression[190∈13]<br />ᐸ__relation...s__.”note”ᐳ"]:::plan
    Map233["Map[233∈13]<br />ᐸ186:{”0”:5}ᐳ"]:::plan
    PgSelectSingle197["PgSelectSingle[197∈13]<br />ᐸtextᐳ"]:::plan
    PgClassExpression198["PgClassExpression[198∈13]<br />ᐸ__relation..._lower__.vᐳ"]:::plan
    Map229["Map[229∈13]<br />ᐸ186:{”0”:0,”1”:1,”2”:2,”3”:3}ᐳ"]:::plan
    PgSelectSingle205["PgSelectSingle[205∈13]<br />ᐸrelational_itemsᐳ"]:::plan
    PgClassExpression206["PgClassExpression[206∈13]<br />ᐸ__relation..._archived”ᐳ"]:::plan
    Map225["Map[225∈13]<br />ᐸ205:{”0”:0,”1”:1}ᐳ"]:::plan
    PgSelectSingle220["PgSelectSingle[220∈13]<br />ᐸpeopleᐳ"]:::plan
    PgClassExpression221["PgClassExpression[221∈13]<br />ᐸ__people__.”person_id”ᐳ"]:::plan
    PgClassExpression222["PgClassExpression[222∈13]<br />ᐸ__people__.”username”ᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access14
    __Value3 --> Access15
    Access14 & Access15 --> Object16
    Object16 & __InputStaticLeaf8 & __InputStaticLeaf11 --> PgUpdate13
    PgUpdate13 --> PgClassExpression17
    Object16 & PgClassExpression17 --> PgSelect19
    PgSelect19 --> First23
    First23 --> PgSelectSingle24
    PgSelectSingle24 --> PgClassExpression25
    PgSelectSingle24 --> PgClassExpression26
    PgSelectSingle24 --> PgClassExpression27
    PgSelectSingle24 --> PgClassExpression28
    PgSelectSingle24 --> Map223
    Map223 --> PgSelectSingle35
    PgSelectSingle35 --> PgClassExpression36
    PgSelectSingle24 --> Map231
    Map231 --> PgSelectSingle43
    PgSelectSingle43 --> PgClassExpression44
    PgSelectSingle43 --> Map227
    Map227 --> PgSelectSingle58
    PgSelectSingle58 --> PgClassExpression59
    PgSelectSingle58 --> PgClassExpression60
    Object16 & __InputStaticLeaf62 & __InputStaticLeaf66 --> PgUpdate67
    PgUpdate67 --> PgClassExpression71
    Object16 & PgClassExpression71 --> PgSelect73
    PgSelect73 --> First77
    First77 --> PgSelectSingle78
    PgSelectSingle78 --> PgClassExpression79
    PgSelectSingle78 --> PgClassExpression80
    PgSelectSingle78 --> PgClassExpression81
    PgSelectSingle78 --> PgClassExpression82
    PgSelectSingle78 --> Map235
    Map235 --> PgSelectSingle89
    PgSelectSingle89 --> PgClassExpression90
    PgSelectSingle78 --> Map243
    Map243 --> PgSelectSingle97
    PgSelectSingle97 --> PgClassExpression98
    PgSelectSingle97 --> Map239
    Map239 --> PgSelectSingle112
    PgSelectSingle112 --> PgClassExpression113
    PgSelectSingle112 --> PgClassExpression114
    Object16 & __InputStaticLeaf116 & __InputStaticLeaf119 --> PgUpdate121
    PgUpdate121 --> PgClassExpression125
    Object16 & PgClassExpression125 --> PgSelect127
    PgSelect127 --> First131
    First131 --> PgSelectSingle132
    PgSelectSingle132 --> PgClassExpression133
    PgSelectSingle132 --> PgClassExpression134
    PgSelectSingle132 --> PgClassExpression135
    PgSelectSingle132 --> PgClassExpression136
    PgSelectSingle132 --> Map245
    Map245 --> PgSelectSingle143
    PgSelectSingle143 --> PgClassExpression144
    PgSelectSingle132 --> Map241
    Map241 --> PgSelectSingle151
    PgSelectSingle151 --> PgClassExpression152
    PgSelectSingle151 --> Map237
    Map237 --> PgSelectSingle166
    PgSelectSingle166 --> PgClassExpression167
    PgSelectSingle166 --> PgClassExpression168
    Object16 & __InputStaticLeaf170 & __InputStaticLeaf173 --> PgUpdate175
    PgUpdate175 --> PgClassExpression179
    Object16 & PgClassExpression179 --> PgSelect181
    PgSelect181 --> First185
    First185 --> PgSelectSingle186
    PgSelectSingle186 --> PgClassExpression187
    PgSelectSingle186 --> PgClassExpression188
    PgSelectSingle186 --> PgClassExpression189
    PgSelectSingle186 --> PgClassExpression190
    PgSelectSingle186 --> Map233
    Map233 --> PgSelectSingle197
    PgSelectSingle197 --> PgClassExpression198
    PgSelectSingle186 --> Map229
    Map229 --> PgSelectSingle205
    PgSelectSingle205 --> PgClassExpression206
    PgSelectSingle205 --> Map225
    Map225 --> PgSelectSingle220
    PgSelectSingle220 --> PgClassExpression221
    PgSelectSingle220 --> PgClassExpression222

    subgraph "Buckets for mutations/basics/update-relational-post"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,__InputStaticLeaf8,__InputStaticLeaf11,Access14,Access15,Object16,__InputStaticLeaf62,__InputStaticLeaf66,__InputStaticLeaf116,__InputStaticLeaf119,__InputStaticLeaf170,__InputStaticLeaf173 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 16, 8, 11<br /><br />1: PgUpdate{1}[13]<br />2: PgClassExpression{1}ᐸ__relation...sts__.”id”ᐳ[17],PgClassExpression{1}ᐸ__relation...sts__.”id”ᐳ[17]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgUpdate13,PgClassExpression17,PgSelect19,First23,PgSelectSingle24,PgClassExpression25,PgClassExpression26,PgClassExpression27,PgClassExpression28,PgSelectSingle35,PgClassExpression36,PgSelectSingle43,PgClassExpression44,PgSelectSingle58,PgClassExpression59,PgClassExpression60,Map223,Map227,Map231 bucket1
    Bucket2("Bucket 2 (nullableField)<br />Deps: 13, 24, 58, 17, 25, 26, 27, 28, 36, 44, 59, 60<br /><br />ROOT PgUpdate{1}[13]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2 bucket2
    Bucket3("Bucket 3 (nullableField)<br />Deps: 24, 58, 25, 26, 27, 28, 36, 44, 59, 60<br /><br />ROOT PgSelectSingle{1}ᐸrelational_postsᐳ[24]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    Bucket4("Bucket 4 (nullableField)<br />Deps: 58, 59, 60<br /><br />ROOT PgSelectSingle{1}ᐸpeopleᐳ[58]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4 bucket4
    Bucket5("Bucket 5 (mutationField)<br />Deps: 16, 62, 66<br /><br />1: PgUpdate{5}[67]<br />2: PgClassExpression{5}ᐸ__relation...sts__.”id”ᐳ[71],PgClassExpression{5}ᐸ__relation...sts__.”id”ᐳ[71]"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgUpdate67,PgClassExpression71,PgSelect73,First77,PgSelectSingle78,PgClassExpression79,PgClassExpression80,PgClassExpression81,PgClassExpression82,PgSelectSingle89,PgClassExpression90,PgSelectSingle97,PgClassExpression98,PgSelectSingle112,PgClassExpression113,PgClassExpression114,Map235,Map239,Map243 bucket5
    Bucket6("Bucket 6 (nullableField)<br />Deps: 67, 78, 112, 71, 79, 80, 81, 82, 90, 98, 113, 114<br /><br />ROOT PgUpdate{5}[67]"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6 bucket6
    Bucket7("Bucket 7 (nullableField)<br />Deps: 78, 112, 79, 80, 81, 82, 90, 98, 113, 114<br /><br />ROOT PgSelectSingle{5}ᐸrelational_postsᐳ[78]"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7 bucket7
    Bucket8("Bucket 8 (nullableField)<br />Deps: 112, 113, 114<br /><br />ROOT PgSelectSingle{5}ᐸpeopleᐳ[112]"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8 bucket8
    Bucket9("Bucket 9 (mutationField)<br />Deps: 16, 116, 119<br /><br />1: PgUpdate{9}[121]<br />2: PgClassExpression{9}ᐸ__relation...sts__.”id”ᐳ[125],PgClassExpression{9}ᐸ__relation...sts__.”id”ᐳ[125]"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,PgUpdate121,PgClassExpression125,PgSelect127,First131,PgSelectSingle132,PgClassExpression133,PgClassExpression134,PgClassExpression135,PgClassExpression136,PgSelectSingle143,PgClassExpression144,PgSelectSingle151,PgClassExpression152,PgSelectSingle166,PgClassExpression167,PgClassExpression168,Map237,Map241,Map245 bucket9
    Bucket10("Bucket 10 (nullableField)<br />Deps: 121, 132, 166, 125, 133, 134, 135, 136, 144, 152, 167, 168<br /><br />ROOT PgUpdate{9}[121]"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10 bucket10
    Bucket11("Bucket 11 (nullableField)<br />Deps: 132, 166, 133, 134, 135, 136, 144, 152, 167, 168<br /><br />ROOT PgSelectSingle{9}ᐸrelational_postsᐳ[132]"):::bucket
    classDef bucket11 stroke:#00ffff
    class Bucket11 bucket11
    Bucket12("Bucket 12 (nullableField)<br />Deps: 166, 167, 168<br /><br />ROOT PgSelectSingle{9}ᐸpeopleᐳ[166]"):::bucket
    classDef bucket12 stroke:#4169e1
    class Bucket12 bucket12
    Bucket13("Bucket 13 (mutationField)<br />Deps: 16, 170, 173<br /><br />1: PgUpdate{13}[175]<br />2: PgClassExpression{13}ᐸ__relation...sts__.”id”ᐳ[179],PgClassExpression{13}ᐸ__relation...sts__.”id”ᐳ[179]"):::bucket
    classDef bucket13 stroke:#3cb371
    class Bucket13,PgUpdate175,PgClassExpression179,PgSelect181,First185,PgSelectSingle186,PgClassExpression187,PgClassExpression188,PgClassExpression189,PgClassExpression190,PgSelectSingle197,PgClassExpression198,PgSelectSingle205,PgClassExpression206,PgSelectSingle220,PgClassExpression221,PgClassExpression222,Map225,Map229,Map233 bucket13
    Bucket14("Bucket 14 (nullableField)<br />Deps: 175, 186, 220, 179, 187, 188, 189, 190, 198, 206, 221, 222<br /><br />ROOT PgUpdate{13}[175]"):::bucket
    classDef bucket14 stroke:#a52a2a
    class Bucket14 bucket14
    Bucket15("Bucket 15 (nullableField)<br />Deps: 186, 220, 187, 188, 189, 190, 198, 206, 221, 222<br /><br />ROOT PgSelectSingle{13}ᐸrelational_postsᐳ[186]"):::bucket
    classDef bucket15 stroke:#ff00ff
    class Bucket15 bucket15
    Bucket16("Bucket 16 (nullableField)<br />Deps: 220, 221, 222<br /><br />ROOT PgSelectSingle{13}ᐸpeopleᐳ[220]"):::bucket
    classDef bucket16 stroke:#f5deb3
    class Bucket16 bucket16
    Bucket0 --> Bucket1 & Bucket5 & Bucket9 & Bucket13
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4
    Bucket5 --> Bucket6
    Bucket6 --> Bucket7
    Bucket7 --> Bucket8
    Bucket9 --> Bucket10
    Bucket10 --> Bucket11
    Bucket11 --> Bucket12
    Bucket13 --> Bucket14
    Bucket14 --> Bucket15
    Bucket15 --> Bucket16
    end
