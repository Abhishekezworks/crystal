%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/basics/create-three-relational-posts-computed"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 12, 19, 26, 267, 268, 269, 4<br /><br />1: PgSelect[8]<br />2: PgSelect[15]<br />3: PgSelect[22]<br />4: PgSelectRows[28]<br />ᐳ: 27, 29, 30"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 267, 268, 269, 30, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[30]<br />1: 32, 40, 46<br />2: 37, 43, 49<br />ᐳ: 36, 38, 42, 44, 48, 50, 51, 53, 54, 120, 122, 123, 189, 191, 192"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 11, 51, 54, 120, 123, 189, 192<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    Bucket4("Bucket 4 (polymorphic)<br />Deps: 11, 51, 54<br /><br />1: 56, 69, 82, 95, 108<br />2: 65, 78, 91, 104, 117<br />ᐳ: 64, 67, 77, 80, 90, 93, 103, 106, 116, 119, 258, 259, 260"):::bucket
    Bucket5("Bucket 5 (polymorphic)<br />Deps: 11, 120, 123<br /><br />1: 125, 138, 151, 164, 177<br />2: 134, 147, 160, 173, 186<br />ᐳ: 133, 136, 146, 149, 159, 162, 172, 175, 185, 188, 261, 262, 263"):::bucket
    Bucket6("Bucket 6 (polymorphic)<br />Deps: 11, 189, 192<br /><br />1: 194, 207, 220, 233, 246<br />2: 203, 216, 229, 242, 255<br />ᐳ: 202, 205, 215, 218, 228, 231, 241, 244, 254, 257, 264, 265, 266"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6

    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    PgFromExpression12{{"PgFromExpression[12∈0] ➊"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ'Computed post ꖛ1'ᐳ"}}:::plan
    Constant6 & Constant7 --> PgFromExpression12
    PgFromExpression19{{"PgFromExpression[19∈0] ➊"}}:::plan
    Constant14{{"Constant[14∈0] ➊<br />ᐸ'Computed post ꖛ2'ᐳ"}}:::plan
    Constant6 & Constant14 --> PgFromExpression19
    PgFromExpression26{{"PgFromExpression[26∈0] ➊"}}:::plan
    Constant21{{"Constant[21∈0] ➊<br />ᐸ'Computed post ꖛ3'ᐳ"}}:::plan
    Constant6 & Constant21 --> PgFromExpression26
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant267{{"Constant[267∈0] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Constant268{{"Constant[268∈0] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Constant269{{"Constant[269∈0] ➊<br />ᐸ1000002ᐳ"}}:::plan
    PgSelect8[["PgSelect[8∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression12 --> PgSelect8
    PgSelect15[["PgSelect[15∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression19 --> PgSelect15
    PgSelect22[["PgSelect[22∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression26 --> PgSelect22
    First27{{"First[27∈1] ➊"}}:::plan
    PgSelectRows28[["PgSelectRows[28∈1] ➊"]]:::plan
    PgSelectRows28 --> First27
    PgSelect22 --> PgSelectRows28
    PgSelectSingle29{{"PgSelectSingle[29∈1] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First27 --> PgSelectSingle29
    PgClassExpression30{{"PgClassExpression[30∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgSelectSingle29 --> PgClassExpression30
    PgSelect32[["PgSelect[32∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant267 --> PgSelect32
    PgSelect40[["PgSelect[40∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant268 --> PgSelect40
    PgSelect46[["PgSelect[46∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant269 --> PgSelect46
    First36{{"First[36∈2] ➊"}}:::plan
    PgSelectRows37[["PgSelectRows[37∈2] ➊"]]:::plan
    PgSelectRows37 --> First36
    PgSelect32 --> PgSelectRows37
    PgSelectSingle38{{"PgSelectSingle[38∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First36 --> PgSelectSingle38
    First42{{"First[42∈2] ➊"}}:::plan
    PgSelectRows43[["PgSelectRows[43∈2] ➊"]]:::plan
    PgSelectRows43 --> First42
    PgSelect40 --> PgSelectRows43
    PgSelectSingle44{{"PgSelectSingle[44∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First42 --> PgSelectSingle44
    First48{{"First[48∈2] ➊"}}:::plan
    PgSelectRows49[["PgSelectRows[49∈2] ➊"]]:::plan
    PgSelectRows49 --> First48
    PgSelect46 --> PgSelectRows49
    PgSelectSingle50{{"PgSelectSingle[50∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First48 --> PgSelectSingle50
    PgClassExpression51{{"PgClassExpression[51∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle38 --> PgClassExpression51
    PgClassExpression53{{"PgClassExpression[53∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle38 --> PgClassExpression53
    Lambda54{{"Lambda[54∈2] ➊<br />ᐸrelationalItemTypeNameFromTypeᐳ"}}:::plan
    PgClassExpression53 --> Lambda54
    PgClassExpression120{{"PgClassExpression[120∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression120
    PgClassExpression122{{"PgClassExpression[122∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression122
    Lambda123{{"Lambda[123∈2] ➊<br />ᐸrelationalItemTypeNameFromTypeᐳ"}}:::plan
    PgClassExpression122 --> Lambda123
    PgClassExpression189{{"PgClassExpression[189∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression189
    PgClassExpression191{{"PgClassExpression[191∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression191
    Lambda192{{"Lambda[192∈2] ➊<br />ᐸrelationalItemTypeNameFromTypeᐳ"}}:::plan
    PgClassExpression191 --> Lambda192
    PgSelect56[["PgSelect[56∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression51 --> PgSelect56
    PgSelect69[["PgSelect[69∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression51 --> PgSelect69
    PgSelect82[["PgSelect[82∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression51 --> PgSelect82
    PgSelect95[["PgSelect[95∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression51 --> PgSelect95
    PgSelect108[["PgSelect[108∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression51 --> PgSelect108
    First64{{"First[64∈4] ➊^"}}:::plan
    PgSelectRows65[["PgSelectRows[65∈4] ➊^"]]:::plan
    PgSelectRows65 --> First64
    PgSelect56 --> PgSelectRows65
    PgSelectSingle67{{"PgSelectSingle[67∈4] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First64 --> PgSelectSingle67
    First77{{"First[77∈4] ➊^"}}:::plan
    PgSelectRows78[["PgSelectRows[78∈4] ➊^"]]:::plan
    PgSelectRows78 --> First77
    PgSelect69 --> PgSelectRows78
    PgSelectSingle80{{"PgSelectSingle[80∈4] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First77 --> PgSelectSingle80
    First90{{"First[90∈4] ➊^"}}:::plan
    PgSelectRows91[["PgSelectRows[91∈4] ➊^"]]:::plan
    PgSelectRows91 --> First90
    PgSelect82 --> PgSelectRows91
    PgSelectSingle93{{"PgSelectSingle[93∈4] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First90 --> PgSelectSingle93
    First103{{"First[103∈4] ➊^"}}:::plan
    PgSelectRows104[["PgSelectRows[104∈4] ➊^"]]:::plan
    PgSelectRows104 --> First103
    PgSelect95 --> PgSelectRows104
    PgSelectSingle106{{"PgSelectSingle[106∈4] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First103 --> PgSelectSingle106
    First116{{"First[116∈4] ➊^"}}:::plan
    PgSelectRows117[["PgSelectRows[117∈4] ➊^"]]:::plan
    PgSelectRows117 --> First116
    PgSelect108 --> PgSelectRows117
    PgSelectSingle119{{"PgSelectSingle[119∈4] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First116 --> PgSelectSingle119
    PgClassExpression258{{"PgClassExpression[258∈4] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle80 --> PgClassExpression258
    PgClassExpression259{{"PgClassExpression[259∈4] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle80 --> PgClassExpression259
    PgClassExpression260{{"PgClassExpression[260∈4] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle80 --> PgClassExpression260
    PgSelect125[["PgSelect[125∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression120 --> PgSelect125
    PgSelect138[["PgSelect[138∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression120 --> PgSelect138
    PgSelect151[["PgSelect[151∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression120 --> PgSelect151
    PgSelect164[["PgSelect[164∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression120 --> PgSelect164
    PgSelect177[["PgSelect[177∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression120 --> PgSelect177
    First133{{"First[133∈5] ➊^"}}:::plan
    PgSelectRows134[["PgSelectRows[134∈5] ➊^"]]:::plan
    PgSelectRows134 --> First133
    PgSelect125 --> PgSelectRows134
    PgSelectSingle136{{"PgSelectSingle[136∈5] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First133 --> PgSelectSingle136
    First146{{"First[146∈5] ➊^"}}:::plan
    PgSelectRows147[["PgSelectRows[147∈5] ➊^"]]:::plan
    PgSelectRows147 --> First146
    PgSelect138 --> PgSelectRows147
    PgSelectSingle149{{"PgSelectSingle[149∈5] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First146 --> PgSelectSingle149
    First159{{"First[159∈5] ➊^"}}:::plan
    PgSelectRows160[["PgSelectRows[160∈5] ➊^"]]:::plan
    PgSelectRows160 --> First159
    PgSelect151 --> PgSelectRows160
    PgSelectSingle162{{"PgSelectSingle[162∈5] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First159 --> PgSelectSingle162
    First172{{"First[172∈5] ➊^"}}:::plan
    PgSelectRows173[["PgSelectRows[173∈5] ➊^"]]:::plan
    PgSelectRows173 --> First172
    PgSelect164 --> PgSelectRows173
    PgSelectSingle175{{"PgSelectSingle[175∈5] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First172 --> PgSelectSingle175
    First185{{"First[185∈5] ➊^"}}:::plan
    PgSelectRows186[["PgSelectRows[186∈5] ➊^"]]:::plan
    PgSelectRows186 --> First185
    PgSelect177 --> PgSelectRows186
    PgSelectSingle188{{"PgSelectSingle[188∈5] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First185 --> PgSelectSingle188
    PgClassExpression261{{"PgClassExpression[261∈5] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle149 --> PgClassExpression261
    PgClassExpression262{{"PgClassExpression[262∈5] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle149 --> PgClassExpression262
    PgClassExpression263{{"PgClassExpression[263∈5] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle149 --> PgClassExpression263
    PgSelect194[["PgSelect[194∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression189 --> PgSelect194
    PgSelect207[["PgSelect[207∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression189 --> PgSelect207
    PgSelect220[["PgSelect[220∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression189 --> PgSelect220
    PgSelect233[["PgSelect[233∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression189 --> PgSelect233
    PgSelect246[["PgSelect[246∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression189 --> PgSelect246
    First202{{"First[202∈6] ➊^"}}:::plan
    PgSelectRows203[["PgSelectRows[203∈6] ➊^"]]:::plan
    PgSelectRows203 --> First202
    PgSelect194 --> PgSelectRows203
    PgSelectSingle205{{"PgSelectSingle[205∈6] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First202 --> PgSelectSingle205
    First215{{"First[215∈6] ➊^"}}:::plan
    PgSelectRows216[["PgSelectRows[216∈6] ➊^"]]:::plan
    PgSelectRows216 --> First215
    PgSelect207 --> PgSelectRows216
    PgSelectSingle218{{"PgSelectSingle[218∈6] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First215 --> PgSelectSingle218
    First228{{"First[228∈6] ➊^"}}:::plan
    PgSelectRows229[["PgSelectRows[229∈6] ➊^"]]:::plan
    PgSelectRows229 --> First228
    PgSelect220 --> PgSelectRows229
    PgSelectSingle231{{"PgSelectSingle[231∈6] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First228 --> PgSelectSingle231
    First241{{"First[241∈6] ➊^"}}:::plan
    PgSelectRows242[["PgSelectRows[242∈6] ➊^"]]:::plan
    PgSelectRows242 --> First241
    PgSelect233 --> PgSelectRows242
    PgSelectSingle244{{"PgSelectSingle[244∈6] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First241 --> PgSelectSingle244
    First254{{"First[254∈6] ➊^"}}:::plan
    PgSelectRows255[["PgSelectRows[255∈6] ➊^"]]:::plan
    PgSelectRows255 --> First254
    PgSelect246 --> PgSelectRows255
    PgSelectSingle257{{"PgSelectSingle[257∈6] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First254 --> PgSelectSingle257
    PgClassExpression264{{"PgClassExpression[264∈6] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle218 --> PgClassExpression264
    PgClassExpression265{{"PgClassExpression[265∈6] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle218 --> PgClassExpression265
    PgClassExpression266{{"PgClassExpression[266∈6] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle218 --> PgClassExpression266

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,PgFromExpression12,Constant14,PgFromExpression19,Constant21,PgFromExpression26,Constant267,Constant268,Constant269 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect8,PgSelect15,PgSelect22,First27,PgSelectRows28,PgSelectSingle29,PgClassExpression30 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect32,First36,PgSelectRows37,PgSelectSingle38,PgSelect40,First42,PgSelectRows43,PgSelectSingle44,PgSelect46,First48,PgSelectRows49,PgSelectSingle50,PgClassExpression51,PgClassExpression53,Lambda54,PgClassExpression120,PgClassExpression122,Lambda123,PgClassExpression189,PgClassExpression191,Lambda192 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect56,First64,PgSelectRows65,PgSelectSingle67,PgSelect69,First77,PgSelectRows78,PgSelectSingle80,PgSelect82,First90,PgSelectRows91,PgSelectSingle93,PgSelect95,First103,PgSelectRows104,PgSelectSingle106,PgSelect108,First116,PgSelectRows117,PgSelectSingle119,PgClassExpression258,PgClassExpression259,PgClassExpression260 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect125,First133,PgSelectRows134,PgSelectSingle136,PgSelect138,First146,PgSelectRows147,PgSelectSingle149,PgSelect151,First159,PgSelectRows160,PgSelectSingle162,PgSelect164,First172,PgSelectRows173,PgSelectSingle175,PgSelect177,First185,PgSelectRows186,PgSelectSingle188,PgClassExpression261,PgClassExpression262,PgClassExpression263 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect194,First202,PgSelectRows203,PgSelectSingle205,PgSelect207,First215,PgSelectRows216,PgSelectSingle218,PgSelect220,First228,PgSelectRows229,PgSelectSingle231,PgSelect233,First241,PgSelectRows242,PgSelectSingle244,PgSelect246,First254,PgSelectRows255,PgSelectSingle257,PgClassExpression264,PgClassExpression265,PgClassExpression266 bucket6

    %% implicit side effects
    PgSelect8 -.-o PgSelect15
    PgSelect15 -.-o PgSelect22

