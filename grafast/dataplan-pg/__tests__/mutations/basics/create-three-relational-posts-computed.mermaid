%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left

    subgraph "Buckets for mutations/basics/create-three-relational-posts-computed"
    Bucket0("Bucket 0 (root)"):::bucket
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 12, 19, 26, 261, 262, 263, 4<br /><br />1: PgSelect[8]<br />2: PgSelect[15]<br />3: PgSelect[22]<br />4: PgSelectRows[28]<br />ᐳ: 27, 29, 30"):::bucket
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 261, 262, 263, 30, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[30]<br />1: 32, 40, 46<br />2: 37, 43, 49<br />ᐳ: 36, 38, 42, 44, 48, 50, 51, 52, 53, 118, 119, 120, 185, 186, 187"):::bucket
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 11, 53, 52, 120, 119, 187, 186<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    Bucket4("Bucket 4 (polymorphic)<br />Deps: 11, 53, 52<br /><br />1: 54, 67, 80, 93, 106<br />2: 63, 76, 89, 102, 115<br />ᐳ: 62, 65, 75, 78, 88, 91, 101, 104, 114, 117, 252, 253, 254"):::bucket
    Bucket5("Bucket 5 (polymorphic)<br />Deps: 11, 120, 119<br /><br />1: 121, 134, 147, 160, 173<br />2: 130, 143, 156, 169, 182<br />ᐳ: 129, 132, 142, 145, 155, 158, 168, 171, 181, 184, 255, 256, 257"):::bucket
    Bucket6("Bucket 6 (polymorphic)<br />Deps: 11, 187, 186<br /><br />1: 188, 201, 214, 227, 240<br />2: 197, 210, 223, 236, 249<br />ᐳ: 196, 199, 209, 212, 222, 225, 235, 238, 248, 251, 258, 259, 260"):::bucket
    end
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6

    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    PgFromExpression12{{"PgFromExpression[12∈0] ➊"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ'Computed post ꖛ1'ᐳ"}}:::plan
    Constant6 & Constant7 --> PgFromExpression12
    PgFromExpression19{{"PgFromExpression[19∈0] ➊"}}:::plan
    Constant14{{"Constant[14∈0] ➊<br />ᐸ'Computed post ꖛ2'ᐳ"}}:::plan
    Constant6 & Constant14 --> PgFromExpression19
    PgFromExpression26{{"PgFromExpression[26∈0] ➊"}}:::plan
    Constant21{{"Constant[21∈0] ➊<br />ᐸ'Computed post ꖛ3'ᐳ"}}:::plan
    Constant6 & Constant21 --> PgFromExpression26
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant261{{"Constant[261∈0] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Constant262{{"Constant[262∈0] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Constant263{{"Constant[263∈0] ➊<br />ᐸ1000002ᐳ"}}:::plan
    PgSelect8[["PgSelect[8∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression12 --> PgSelect8
    PgSelect15[["PgSelect[15∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression19 --> PgSelect15
    PgSelect22[["PgSelect[22∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression26 --> PgSelect22
    First27{{"First[27∈1] ➊"}}:::plan
    PgSelectRows28[["PgSelectRows[28∈1] ➊"]]:::plan
    PgSelectRows28 --> First27
    PgSelect22 --> PgSelectRows28
    PgSelectSingle29{{"PgSelectSingle[29∈1] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First27 --> PgSelectSingle29
    PgClassExpression30{{"PgClassExpression[30∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgSelectSingle29 --> PgClassExpression30
    PgSelect32[["PgSelect[32∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant261 --> PgSelect32
    PgSelect40[["PgSelect[40∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant262 --> PgSelect40
    PgSelect46[["PgSelect[46∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant263 --> PgSelect46
    First36{{"First[36∈2] ➊"}}:::plan
    PgSelectRows37[["PgSelectRows[37∈2] ➊"]]:::plan
    PgSelectRows37 --> First36
    PgSelect32 --> PgSelectRows37
    PgSelectSingle38{{"PgSelectSingle[38∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First36 --> PgSelectSingle38
    First42{{"First[42∈2] ➊"}}:::plan
    PgSelectRows43[["PgSelectRows[43∈2] ➊"]]:::plan
    PgSelectRows43 --> First42
    PgSelect40 --> PgSelectRows43
    PgSelectSingle44{{"PgSelectSingle[44∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First42 --> PgSelectSingle44
    First48{{"First[48∈2] ➊"}}:::plan
    PgSelectRows49[["PgSelectRows[49∈2] ➊"]]:::plan
    PgSelectRows49 --> First48
    PgSelect46 --> PgSelectRows49
    PgSelectSingle50{{"PgSelectSingle[50∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    First48 --> PgSelectSingle50
    PgClassExpression51{{"PgClassExpression[51∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle38 --> PgClassExpression51
    Lambda52{{"Lambda[52∈2] ➊<br />ᐸrelationalItemTypeNameFromTypeᐳ"}}:::plan
    PgClassExpression51 --> Lambda52
    PgClassExpression53{{"PgClassExpression[53∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle38 --> PgClassExpression53
    PgClassExpression118{{"PgClassExpression[118∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression118
    Lambda119{{"Lambda[119∈2] ➊<br />ᐸrelationalItemTypeNameFromTypeᐳ"}}:::plan
    PgClassExpression118 --> Lambda119
    PgClassExpression120{{"PgClassExpression[120∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle44 --> PgClassExpression120
    PgClassExpression185{{"PgClassExpression[185∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression185
    Lambda186{{"Lambda[186∈2] ➊<br />ᐸrelationalItemTypeNameFromTypeᐳ"}}:::plan
    PgClassExpression185 --> Lambda186
    PgClassExpression187{{"PgClassExpression[187∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle50 --> PgClassExpression187
    PgSelect54[["PgSelect[54∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression53 --> PgSelect54
    PgSelect67[["PgSelect[67∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression53 --> PgSelect67
    PgSelect80[["PgSelect[80∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression53 --> PgSelect80
    PgSelect93[["PgSelect[93∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression53 --> PgSelect93
    PgSelect106[["PgSelect[106∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression53 --> PgSelect106
    First62{{"First[62∈4] ➊^"}}:::plan
    PgSelectRows63[["PgSelectRows[63∈4] ➊^"]]:::plan
    PgSelectRows63 --> First62
    PgSelect54 --> PgSelectRows63
    PgSelectSingle65{{"PgSelectSingle[65∈4] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First62 --> PgSelectSingle65
    First75{{"First[75∈4] ➊^"}}:::plan
    PgSelectRows76[["PgSelectRows[76∈4] ➊^"]]:::plan
    PgSelectRows76 --> First75
    PgSelect67 --> PgSelectRows76
    PgSelectSingle78{{"PgSelectSingle[78∈4] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First75 --> PgSelectSingle78
    First88{{"First[88∈4] ➊^"}}:::plan
    PgSelectRows89[["PgSelectRows[89∈4] ➊^"]]:::plan
    PgSelectRows89 --> First88
    PgSelect80 --> PgSelectRows89
    PgSelectSingle91{{"PgSelectSingle[91∈4] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First88 --> PgSelectSingle91
    First101{{"First[101∈4] ➊^"}}:::plan
    PgSelectRows102[["PgSelectRows[102∈4] ➊^"]]:::plan
    PgSelectRows102 --> First101
    PgSelect93 --> PgSelectRows102
    PgSelectSingle104{{"PgSelectSingle[104∈4] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First101 --> PgSelectSingle104
    First114{{"First[114∈4] ➊^"}}:::plan
    PgSelectRows115[["PgSelectRows[115∈4] ➊^"]]:::plan
    PgSelectRows115 --> First114
    PgSelect106 --> PgSelectRows115
    PgSelectSingle117{{"PgSelectSingle[117∈4] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First114 --> PgSelectSingle117
    PgClassExpression252{{"PgClassExpression[252∈4] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle78 --> PgClassExpression252
    PgClassExpression253{{"PgClassExpression[253∈4] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle78 --> PgClassExpression253
    PgClassExpression254{{"PgClassExpression[254∈4] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle78 --> PgClassExpression254
    PgSelect121[["PgSelect[121∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression120 --> PgSelect121
    PgSelect134[["PgSelect[134∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression120 --> PgSelect134
    PgSelect147[["PgSelect[147∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression120 --> PgSelect147
    PgSelect160[["PgSelect[160∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression120 --> PgSelect160
    PgSelect173[["PgSelect[173∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression120 --> PgSelect173
    First129{{"First[129∈5] ➊^"}}:::plan
    PgSelectRows130[["PgSelectRows[130∈5] ➊^"]]:::plan
    PgSelectRows130 --> First129
    PgSelect121 --> PgSelectRows130
    PgSelectSingle132{{"PgSelectSingle[132∈5] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First129 --> PgSelectSingle132
    First142{{"First[142∈5] ➊^"}}:::plan
    PgSelectRows143[["PgSelectRows[143∈5] ➊^"]]:::plan
    PgSelectRows143 --> First142
    PgSelect134 --> PgSelectRows143
    PgSelectSingle145{{"PgSelectSingle[145∈5] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First142 --> PgSelectSingle145
    First155{{"First[155∈5] ➊^"}}:::plan
    PgSelectRows156[["PgSelectRows[156∈5] ➊^"]]:::plan
    PgSelectRows156 --> First155
    PgSelect147 --> PgSelectRows156
    PgSelectSingle158{{"PgSelectSingle[158∈5] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First155 --> PgSelectSingle158
    First168{{"First[168∈5] ➊^"}}:::plan
    PgSelectRows169[["PgSelectRows[169∈5] ➊^"]]:::plan
    PgSelectRows169 --> First168
    PgSelect160 --> PgSelectRows169
    PgSelectSingle171{{"PgSelectSingle[171∈5] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First168 --> PgSelectSingle171
    First181{{"First[181∈5] ➊^"}}:::plan
    PgSelectRows182[["PgSelectRows[182∈5] ➊^"]]:::plan
    PgSelectRows182 --> First181
    PgSelect173 --> PgSelectRows182
    PgSelectSingle184{{"PgSelectSingle[184∈5] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First181 --> PgSelectSingle184
    PgClassExpression255{{"PgClassExpression[255∈5] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle145 --> PgClassExpression255
    PgClassExpression256{{"PgClassExpression[256∈5] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle145 --> PgClassExpression256
    PgClassExpression257{{"PgClassExpression[257∈5] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle145 --> PgClassExpression257
    PgSelect188[["PgSelect[188∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression187 --> PgSelect188
    PgSelect201[["PgSelect[201∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression187 --> PgSelect201
    PgSelect214[["PgSelect[214∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression187 --> PgSelect214
    PgSelect227[["PgSelect[227∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression187 --> PgSelect227
    PgSelect240[["PgSelect[240∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression187 --> PgSelect240
    First196{{"First[196∈6] ➊^"}}:::plan
    PgSelectRows197[["PgSelectRows[197∈6] ➊^"]]:::plan
    PgSelectRows197 --> First196
    PgSelect188 --> PgSelectRows197
    PgSelectSingle199{{"PgSelectSingle[199∈6] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First196 --> PgSelectSingle199
    First209{{"First[209∈6] ➊^"}}:::plan
    PgSelectRows210[["PgSelectRows[210∈6] ➊^"]]:::plan
    PgSelectRows210 --> First209
    PgSelect201 --> PgSelectRows210
    PgSelectSingle212{{"PgSelectSingle[212∈6] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First209 --> PgSelectSingle212
    First222{{"First[222∈6] ➊^"}}:::plan
    PgSelectRows223[["PgSelectRows[223∈6] ➊^"]]:::plan
    PgSelectRows223 --> First222
    PgSelect214 --> PgSelectRows223
    PgSelectSingle225{{"PgSelectSingle[225∈6] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First222 --> PgSelectSingle225
    First235{{"First[235∈6] ➊^"}}:::plan
    PgSelectRows236[["PgSelectRows[236∈6] ➊^"]]:::plan
    PgSelectRows236 --> First235
    PgSelect227 --> PgSelectRows236
    PgSelectSingle238{{"PgSelectSingle[238∈6] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First235 --> PgSelectSingle238
    First248{{"First[248∈6] ➊^"}}:::plan
    PgSelectRows249[["PgSelectRows[249∈6] ➊^"]]:::plan
    PgSelectRows249 --> First248
    PgSelect240 --> PgSelectRows249
    PgSelectSingle251{{"PgSelectSingle[251∈6] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First248 --> PgSelectSingle251
    PgClassExpression258{{"PgClassExpression[258∈6] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle212 --> PgClassExpression258
    PgClassExpression259{{"PgClassExpression[259∈6] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle212 --> PgClassExpression259
    PgClassExpression260{{"PgClassExpression[260∈6] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle212 --> PgClassExpression260

    %% define steps
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,PgFromExpression12,Constant14,PgFromExpression19,Constant21,PgFromExpression26,Constant261,Constant262,Constant263 bucket0
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect8,PgSelect15,PgSelect22,First27,PgSelectRows28,PgSelectSingle29,PgClassExpression30 bucket1
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect32,First36,PgSelectRows37,PgSelectSingle38,PgSelect40,First42,PgSelectRows43,PgSelectSingle44,PgSelect46,First48,PgSelectRows49,PgSelectSingle50,PgClassExpression51,Lambda52,PgClassExpression53,PgClassExpression118,Lambda119,PgClassExpression120,PgClassExpression185,Lambda186,PgClassExpression187 bucket2
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect54,First62,PgSelectRows63,PgSelectSingle65,PgSelect67,First75,PgSelectRows76,PgSelectSingle78,PgSelect80,First88,PgSelectRows89,PgSelectSingle91,PgSelect93,First101,PgSelectRows102,PgSelectSingle104,PgSelect106,First114,PgSelectRows115,PgSelectSingle117,PgClassExpression252,PgClassExpression253,PgClassExpression254 bucket4
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect121,First129,PgSelectRows130,PgSelectSingle132,PgSelect134,First142,PgSelectRows143,PgSelectSingle145,PgSelect147,First155,PgSelectRows156,PgSelectSingle158,PgSelect160,First168,PgSelectRows169,PgSelectSingle171,PgSelect173,First181,PgSelectRows182,PgSelectSingle184,PgClassExpression255,PgClassExpression256,PgClassExpression257 bucket5
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect188,First196,PgSelectRows197,PgSelectSingle199,PgSelect201,First209,PgSelectRows210,PgSelectSingle212,PgSelect214,First222,PgSelectRows223,PgSelectSingle225,PgSelect227,First235,PgSelectRows236,PgSelectSingle238,PgSelect240,First248,PgSelectRows249,PgSelectSingle251,PgClassExpression258,PgClassExpression259,PgClassExpression260 bucket6

    %% implicit side effects
    PgSelect8 -.-o PgSelect15
    PgSelect15 -.-o PgSelect22

