%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object11{{"Object[11∈0] ➊<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access9{{"Access[9∈0] ➊<br />ᐸ2.pgSettingsᐳ"}}:::plan
    Access10{{"Access[10∈0] ➊<br />ᐸ2.withPgClientᐳ"}}:::plan
    Access9 & Access10 --> Object11
    PgFromExpression12{{"PgFromExpression[12∈0] ➊"}}:::plan
    Constant6{{"Constant[6∈0] ➊<br />ᐸ2ᐳ"}}:::plan
    Constant7{{"Constant[7∈0] ➊<br />ᐸ'Computed post ꖛ1'ᐳ"}}:::plan
    Constant6 & Constant7 --> PgFromExpression12
    PgFromExpression19{{"PgFromExpression[19∈0] ➊"}}:::plan
    Constant14{{"Constant[14∈0] ➊<br />ᐸ'Computed post ꖛ2'ᐳ"}}:::plan
    Constant6 & Constant14 --> PgFromExpression19
    PgFromExpression26{{"PgFromExpression[26∈0] ➊"}}:::plan
    Constant21{{"Constant[21∈0] ➊<br />ᐸ'Computed post ꖛ3'ᐳ"}}:::plan
    Constant6 & Constant21 --> PgFromExpression26
    __Value2["__Value[2∈0] ➊<br />ᐸcontextᐳ"]:::plan
    __Value2 --> Access9
    __Value2 --> Access10
    __Value4["__Value[4∈0] ➊<br />ᐸrootValueᐳ"]:::plan
    Constant186{{"Constant[186∈0] ➊<br />ᐸ1000000ᐳ"}}:::plan
    Constant187{{"Constant[187∈0] ➊<br />ᐸ1000001ᐳ"}}:::plan
    Constant188{{"Constant[188∈0] ➊<br />ᐸ1000002ᐳ"}}:::plan
    PgSelect8[["PgSelect[8∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression12 --> PgSelect8
    PgSelect15[["PgSelect[15∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression19 --> PgSelect15
    PgSelect22[["PgSelect[22∈1] ➊<br />ᐸrelational_posts(mutation)ᐳ"]]:::sideeffectplan
    Object11 & PgFromExpression26 --> PgSelect22
    First27{{"First[27∈1] ➊"}}:::plan
    PgSelectRows28[["PgSelectRows[28∈1] ➊"]]:::plan
    PgSelectRows28 --> First27
    PgSelect22 --> PgSelectRows28
    PgSelectSingle29{{"PgSelectSingle[29∈1] ➊<br />ᐸrelational_postsᐳ"}}:::plan
    First27 --> PgSelectSingle29
    PgClassExpression30{{"PgClassExpression[30∈1] ➊<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgSelectSingle29 --> PgClassExpression30
    PgSelect32[["PgSelect[32∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant186 --> PgSelect32
    PgPolymorphic40{{"PgPolymorphic[40∈2] ➊"}}:::plan
    PgSelectSingle38{{"PgSelectSingle[38∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression39{{"PgClassExpression[39∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle38 & PgClassExpression39 --> PgPolymorphic40
    PgSelect85[["PgSelect[85∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant187 --> PgSelect85
    PgPolymorphic91{{"PgPolymorphic[91∈2] ➊"}}:::plan
    PgSelectSingle89{{"PgSelectSingle[89∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression90{{"PgClassExpression[90∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle89 & PgClassExpression90 --> PgPolymorphic91
    PgSelect136[["PgSelect[136∈2] ➊<br />ᐸrelational_itemsᐳ"]]:::plan
    Object11 & Constant188 --> PgSelect136
    PgPolymorphic142{{"PgPolymorphic[142∈2] ➊"}}:::plan
    PgSelectSingle140{{"PgSelectSingle[140∈2] ➊<br />ᐸrelational_itemsᐳ"}}:::plan
    PgClassExpression141{{"PgClassExpression[141∈2] ➊<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle140 & PgClassExpression141 --> PgPolymorphic142
    First36{{"First[36∈2] ➊"}}:::plan
    PgSelectRows37[["PgSelectRows[37∈2] ➊"]]:::plan
    PgSelectRows37 --> First36
    PgSelect32 --> PgSelectRows37
    First36 --> PgSelectSingle38
    PgSelectSingle38 --> PgClassExpression39
    PgClassExpression41{{"PgClassExpression[41∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle38 --> PgClassExpression41
    First87{{"First[87∈2] ➊"}}:::plan
    PgSelectRows88[["PgSelectRows[88∈2] ➊"]]:::plan
    PgSelectRows88 --> First87
    PgSelect85 --> PgSelectRows88
    First87 --> PgSelectSingle89
    PgSelectSingle89 --> PgClassExpression90
    PgClassExpression92{{"PgClassExpression[92∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle89 --> PgClassExpression92
    First138{{"First[138∈2] ➊"}}:::plan
    PgSelectRows139[["PgSelectRows[139∈2] ➊"]]:::plan
    PgSelectRows139 --> First138
    PgSelect136 --> PgSelectRows139
    First138 --> PgSelectSingle140
    PgSelectSingle140 --> PgClassExpression141
    PgClassExpression143{{"PgClassExpression[143∈2] ➊<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle140 --> PgClassExpression143
    PgSelect42[["PgSelect[42∈4] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect42
    PgSelect50[["PgSelect[50∈4] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect50
    PgSelect61[["PgSelect[61∈4] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect61
    PgSelect69[["PgSelect[69∈4] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect69
    PgSelect77[["PgSelect[77∈4] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression41 --> PgSelect77
    First46{{"First[46∈4] ➊^"}}:::plan
    PgSelectRows47[["PgSelectRows[47∈4] ➊^"]]:::plan
    PgSelectRows47 --> First46
    PgSelect42 --> PgSelectRows47
    PgSelectSingle48{{"PgSelectSingle[48∈4] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First46 --> PgSelectSingle48
    First54{{"First[54∈4] ➊^"}}:::plan
    PgSelectRows55[["PgSelectRows[55∈4] ➊^"]]:::plan
    PgSelectRows55 --> First54
    PgSelect50 --> PgSelectRows55
    PgSelectSingle56{{"PgSelectSingle[56∈4] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First54 --> PgSelectSingle56
    PgClassExpression57{{"PgClassExpression[57∈4] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression57
    PgClassExpression58{{"PgClassExpression[58∈4] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression58
    PgClassExpression59{{"PgClassExpression[59∈4] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression59
    First65{{"First[65∈4] ➊^"}}:::plan
    PgSelectRows66[["PgSelectRows[66∈4] ➊^"]]:::plan
    PgSelectRows66 --> First65
    PgSelect61 --> PgSelectRows66
    PgSelectSingle67{{"PgSelectSingle[67∈4] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First65 --> PgSelectSingle67
    First73{{"First[73∈4] ➊^"}}:::plan
    PgSelectRows74[["PgSelectRows[74∈4] ➊^"]]:::plan
    PgSelectRows74 --> First73
    PgSelect69 --> PgSelectRows74
    PgSelectSingle75{{"PgSelectSingle[75∈4] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First73 --> PgSelectSingle75
    First81{{"First[81∈4] ➊^"}}:::plan
    PgSelectRows82[["PgSelectRows[82∈4] ➊^"]]:::plan
    PgSelectRows82 --> First81
    PgSelect77 --> PgSelectRows82
    PgSelectSingle83{{"PgSelectSingle[83∈4] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First81 --> PgSelectSingle83
    PgSelect93[["PgSelect[93∈5] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression92 --> PgSelect93
    PgSelect101[["PgSelect[101∈5] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression92 --> PgSelect101
    PgSelect112[["PgSelect[112∈5] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression92 --> PgSelect112
    PgSelect120[["PgSelect[120∈5] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression92 --> PgSelect120
    PgSelect128[["PgSelect[128∈5] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression92 --> PgSelect128
    First97{{"First[97∈5] ➊^"}}:::plan
    PgSelectRows98[["PgSelectRows[98∈5] ➊^"]]:::plan
    PgSelectRows98 --> First97
    PgSelect93 --> PgSelectRows98
    PgSelectSingle99{{"PgSelectSingle[99∈5] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First97 --> PgSelectSingle99
    First105{{"First[105∈5] ➊^"}}:::plan
    PgSelectRows106[["PgSelectRows[106∈5] ➊^"]]:::plan
    PgSelectRows106 --> First105
    PgSelect101 --> PgSelectRows106
    PgSelectSingle107{{"PgSelectSingle[107∈5] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First105 --> PgSelectSingle107
    PgClassExpression108{{"PgClassExpression[108∈5] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression108
    PgClassExpression109{{"PgClassExpression[109∈5] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression109
    PgClassExpression110{{"PgClassExpression[110∈5] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle107 --> PgClassExpression110
    First116{{"First[116∈5] ➊^"}}:::plan
    PgSelectRows117[["PgSelectRows[117∈5] ➊^"]]:::plan
    PgSelectRows117 --> First116
    PgSelect112 --> PgSelectRows117
    PgSelectSingle118{{"PgSelectSingle[118∈5] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First116 --> PgSelectSingle118
    First124{{"First[124∈5] ➊^"}}:::plan
    PgSelectRows125[["PgSelectRows[125∈5] ➊^"]]:::plan
    PgSelectRows125 --> First124
    PgSelect120 --> PgSelectRows125
    PgSelectSingle126{{"PgSelectSingle[126∈5] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First124 --> PgSelectSingle126
    First132{{"First[132∈5] ➊^"}}:::plan
    PgSelectRows133[["PgSelectRows[133∈5] ➊^"]]:::plan
    PgSelectRows133 --> First132
    PgSelect128 --> PgSelectRows133
    PgSelectSingle134{{"PgSelectSingle[134∈5] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First132 --> PgSelectSingle134
    PgSelect144[["PgSelect[144∈6] ➊<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object11 & PgClassExpression143 --> PgSelect144
    PgSelect152[["PgSelect[152∈6] ➊<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object11 & PgClassExpression143 --> PgSelect152
    PgSelect163[["PgSelect[163∈6] ➊<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object11 & PgClassExpression143 --> PgSelect163
    PgSelect171[["PgSelect[171∈6] ➊<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object11 & PgClassExpression143 --> PgSelect171
    PgSelect179[["PgSelect[179∈6] ➊<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object11 & PgClassExpression143 --> PgSelect179
    First148{{"First[148∈6] ➊^"}}:::plan
    PgSelectRows149[["PgSelectRows[149∈6] ➊^"]]:::plan
    PgSelectRows149 --> First148
    PgSelect144 --> PgSelectRows149
    PgSelectSingle150{{"PgSelectSingle[150∈6] ➊^<br />ᐸrelational_topicsᐳ"}}:::plan
    First148 --> PgSelectSingle150
    First156{{"First[156∈6] ➊^"}}:::plan
    PgSelectRows157[["PgSelectRows[157∈6] ➊^"]]:::plan
    PgSelectRows157 --> First156
    PgSelect152 --> PgSelectRows157
    PgSelectSingle158{{"PgSelectSingle[158∈6] ➊^<br />ᐸrelational_postsᐳ"}}:::plan
    First156 --> PgSelectSingle158
    PgClassExpression159{{"PgClassExpression[159∈6] ➊^<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle158 --> PgClassExpression159
    PgClassExpression160{{"PgClassExpression[160∈6] ➊^<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle158 --> PgClassExpression160
    PgClassExpression161{{"PgClassExpression[161∈6] ➊^<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle158 --> PgClassExpression161
    First167{{"First[167∈6] ➊^"}}:::plan
    PgSelectRows168[["PgSelectRows[168∈6] ➊^"]]:::plan
    PgSelectRows168 --> First167
    PgSelect163 --> PgSelectRows168
    PgSelectSingle169{{"PgSelectSingle[169∈6] ➊^<br />ᐸrelational_dividersᐳ"}}:::plan
    First167 --> PgSelectSingle169
    First175{{"First[175∈6] ➊^"}}:::plan
    PgSelectRows176[["PgSelectRows[176∈6] ➊^"]]:::plan
    PgSelectRows176 --> First175
    PgSelect171 --> PgSelectRows176
    PgSelectSingle177{{"PgSelectSingle[177∈6] ➊^<br />ᐸrelational_checklistsᐳ"}}:::plan
    First175 --> PgSelectSingle177
    First183{{"First[183∈6] ➊^"}}:::plan
    PgSelectRows184[["PgSelectRows[184∈6] ➊^"]]:::plan
    PgSelectRows184 --> First183
    PgSelect179 --> PgSelectRows184
    PgSelectSingle185{{"PgSelectSingle[185∈6] ➊^<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First183 --> PgSelectSingle185

    %% define steps

    %% implicit side effects
    PgSelect8 -.-o PgSelect15
    PgSelect15 -.-o PgSelect22

    subgraph "Buckets for mutations/basics/create-three-relational-posts-computed"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value2,__Value4,Constant6,Constant7,Access9,Access10,Object11,PgFromExpression12,Constant14,PgFromExpression19,Constant21,PgFromExpression26,Constant186,Constant187,Constant188 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 11, 12, 19, 26, 186, 187, 188, 4<br /><br />1: PgSelect[8]<br />2: PgSelect[15]<br />3: PgSelect[22]<br />4: PgSelectRows[28]<br />ᐳ: 27, 29, 30"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgSelect8,PgSelect15,PgSelect22,First27,PgSelectRows28,PgSelectSingle29,PgClassExpression30 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 11, 186, 187, 188, 30, 4<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[30]<br />1: 32, 85, 136<br />2: 37, 88, 139<br />ᐳ: 36, 38, 39, 40, 41, 87, 89, 90, 91, 92, 138, 140, 141, 142, 143"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect32,First36,PgSelectRows37,PgSelectSingle38,PgClassExpression39,PgPolymorphic40,PgClassExpression41,PgSelect85,First87,PgSelectRows88,PgSelectSingle89,PgClassExpression90,PgPolymorphic91,PgClassExpression92,PgSelect136,First138,PgSelectRows139,PgSelectSingle140,PgClassExpression141,PgPolymorphic142,PgClassExpression143 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 4, 11, 41, 40, 92, 91, 143, 142<br /><br />ROOT __ValueᐸrootValueᐳ[4]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3 bucket3
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 41, 40<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 42, 50, 61, 69, 77<br />2: 47, 55, 66, 74, 82<br />ᐳ: 46, 48, 54, 56, 57, 58, 59, 65, 67, 73, 75, 81, 83"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect42,First46,PgSelectRows47,PgSelectSingle48,PgSelect50,First54,PgSelectRows55,PgSelectSingle56,PgClassExpression57,PgClassExpression58,PgClassExpression59,PgSelect61,First65,PgSelectRows66,PgSelectSingle67,PgSelect69,First73,PgSelectRows74,PgSelectSingle75,PgSelect77,First81,PgSelectRows82,PgSelectSingle83 bucket4
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 92, 91<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 93, 101, 112, 120, 128<br />2: 98, 106, 117, 125, 133<br />ᐳ: 97, 99, 105, 107, 108, 109, 110, 116, 118, 124, 126, 132, 134"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect93,First97,PgSelectRows98,PgSelectSingle99,PgSelect101,First105,PgSelectRows106,PgSelectSingle107,PgClassExpression108,PgClassExpression109,PgClassExpression110,PgSelect112,First116,PgSelectRows117,PgSelectSingle118,PgSelect120,First124,PgSelectRows125,PgSelectSingle126,PgSelect128,First132,PgSelectRows133,PgSelectSingle134 bucket5
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 11, 143, 142<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem<br /><br />1: 144, 152, 163, 171, 179<br />2: 149, 157, 168, 176, 184<br />ᐳ: 148, 150, 156, 158, 159, 160, 161, 167, 169, 175, 177, 183, 185"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect144,First148,PgSelectRows149,PgSelectSingle150,PgSelect152,First156,PgSelectRows157,PgSelectSingle158,PgClassExpression159,PgClassExpression160,PgClassExpression161,PgSelect163,First167,PgSelectRows168,PgSelectSingle169,PgSelect171,First175,PgSelectRows176,PgSelectSingle177,PgSelect179,First183,PgSelectRows184,PgSelectSingle185 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6
    end
